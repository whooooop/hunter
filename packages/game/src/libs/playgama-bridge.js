(() => { var e = { 258: e => { !function (t) { e.exports = t; var r = "listeners", n = { on: function (e, t) { return a(this, e).push(t), this }, once: function (e, t) { var r = this; return n.originalListener = t, a(r, e).push(n), r; function n() { i.call(r, e, n), t.apply(this, arguments) } }, off: i, emit: function (e, t) { var r = this, n = a(r, e, !0); if (!n) return !1; var o = arguments.length; if (1 === o) n.forEach((function (e) { e.call(r) })); else if (2 === o) n.forEach((function (e) { e.call(r, t) })); else { var i = Array.prototype.slice.call(arguments, 1); n.forEach((function (e) { e.apply(r, i) })) } return !!n.length } }; function o(e) { for (var t in n) e[t] = n[t]; return e } function i(e, t) { var n, o = this; if (arguments.length) { if (t) { if (n = a(o, e, !0)) { if (!(n = n.filter((function (e) { return e !== t && e.originalListener !== t }))).length) return i.call(o, e); o[r][e] = n } } else if ((n = o[r]) && (delete n[e], !Object.keys(n).length)) return i.call(o) } else delete o[r]; return o } function a(e, t, n) { if (!n || e[r]) { var o = e[r] || (e[r] = {}); return o[t] || (o[t] = []) } } o(t.prototype), t.mixin = o }((function e() { if (!(this instanceof e)) return new e })) } }, t = {}; function r(n) { var o = t[n]; if (void 0 !== o) return o.exports; var i = t[n] = { exports: {} }; return e[n](i, i.exports, r), i.exports } r.n = e => { var t = e && e.__esModule ? () => e.default : () => e; return r.d(t, { a: t }), t }, r.d = (e, t) => { for (var n in t) r.o(t, n) && !r.o(e, n) && Object.defineProperty(e, n, { enumerable: !0, get: t[n] }) }, r.o = (e, t) => Object.prototype.hasOwnProperty.call(e, t), (() => { "use strict"; var e = { VK: "vk", OK: "ok", YANDEX: "yandex", CRAZY_GAMES: "crazy_games", ABSOLUTE_GAMES: "absolute_games", GAME_DISTRIBUTION: "game_distribution", PLAYGAMA: "playgama", WORTAL: "wortal", PLAYDECK: "playdeck", TELEGRAM: "telegram", Y8: "y8", LAGGED: "lagged", FACEBOOK: "facebook", POKI: "poki", MOCK: "mock", QA_TOOL: "qa_tool", MSN: "msn" }, t = { PLATFORM: "platform", PLAYER: "player", GAME: "game", STORAGE: "storage", ADVERTISEMENT: "advertisement", SOCIAL: "social", DEVICE: "device", LEADERBOARD: "leaderboard", PAYMENTS: "payments", REMOTE_CONFIG: "remote_config", CLIPBOARD: "clipboard", ACHIEVEMENTS: "achievements" }, n = { INTERSTITIAL_STATE_CHANGED: "interstitial_state_changed", REWARDED_STATE_CHANGED: "rewarded_state_changed", BANNER_STATE_CHANGED: "banner_state_changed", VISIBILITY_STATE_CHANGED: "visibility_state_changed" }, o = { VISIBLE: "visible", HIDDEN: "hidden" }, i = { LOADING: "loading", OPENED: "opened", CLOSED: "closed", FAILED: "failed" }, a = { LOADING: "loading", OPENED: "opened", CLOSED: "closed", FAILED: "failed", REWARDED: "rewarded" }, s = { LOADING: "loading", SHOWN: "shown", HIDDEN: "hidden", FAILED: "failed" }, u = "banner-container", c = { LOCAL_STORAGE: "local_storage", PLATFORM_INTERNAL: "platform_internal" }, l = { DESKTOP: "desktop", MOBILE: "mobile", TABLET: "tablet", TV: "tv" }, f = { GAME_READY: "game_ready", IN_GAME_LOADING_STARTED: "in_game_loading_started", IN_GAME_LOADING_STOPPED: "in_game_loading_stopped", GAMEPLAY_STARTED: "gameplay_started", GAMEPLAY_STOPPED: "gameplay_stopped", PLAYER_GOT_ACHIEVEMENT: "player_got_achievement", GAME_OVER: "game_over" }, p = { INITIALIZE: "initialize", AUTHORIZE_PLAYER: "authorize_player", SHARE: "share", INVITE_FRIENDS: "invite_friends", JOIN_COMMUNITY: "join_community", CREATE_POST: "create_post", ADD_TO_HOME_SCREEN: "add_to_home_screen", ADD_TO_FAVORITES: "add_to_favorites", RATE: "rate", SET_LEADERBOARD_SCORE: "set_leaderboard_score", GET_LEADERBOARD_SCORE: "get_leaderboard_score", GET_LEADERBOARD_ENTRIES: "get_leaderboard_entries", GET_PURCHASES: "get_purchases", GET_CATALOG: "get_catalog", PURCHASE: "purchase", CONSUME_PURCHASE: "consume_purchase", GET_REMOTE_CONFIG: "get_remote_config", GET_STORAGE_DATA: "get_storage_data", SHOW_LEADERBOARD_NATIVE_POPUP: "show_leaderboard_native_popup", CLIPBOARD_WRITE: "clipboard_write", ADBLOCK_DETECT: "adblock_detect" }, d = { message: "Before using the SDK you must initialize it" }, h = { message: "Storage not supported" }, y = { message: "Storage not available" }, m = { message: "GameDistribution Game ID is undefined" }, v = { message: "Y8 Game params are not found" }, _ = { message: "OK Game params are not found" }, g = { message: "Lagged Game params are not found" }, S = { message: "Message is too long" }; function b(e) { return b = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e }, b(e) } function P(e, t) { for (var r = 0; r < t.length; r++) { var n = t[r]; n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, E(n.key), n) } } function E(e) { var t = function (e, t) { if ("object" != b(e) || !e) return e; var r = e[Symbol.toPrimitive]; if (void 0 !== r) { var n = r.call(e, "string"); if ("object" != b(n)) return n; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(e) }(e); return "symbol" == b(t) ? t : String(t) } function A(e, t, r) { !function (e, t) { if (t.has(e)) throw new TypeError("Cannot initialize the same private elements twice on an object") }(e, t), t.set(e, r) } function w(e, t, r) { return function (e, t, r) { if (t.set) t.set.call(e, r); else { if (!t.writable) throw new TypeError("attempted to set read only private field"); t.value = r } }(e, D(e, t, "set"), r), r } function O(e, t) { return function (e, t) { return t.get ? t.get.call(e) : t.value }(e, D(e, t, "get")) } function D(e, t, r) { if (!t.has(e)) throw new TypeError("attempted to " + r + " private field on non-instance"); return t.get(e) } var k = new WeakMap, R = new WeakMap, I = new WeakMap; const T = function () { function e() { var t = this; !function (e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, e), A(this, k, { writable: !0, value: void 0 }), A(this, R, { writable: !0, value: void 0 }), A(this, I, { writable: !0, value: void 0 }), w(this, k, new Promise((function (e, r) { w(t, R, e), w(t, I, r) }))) } var t, r; return t = e, (r = [{ key: "promise", get: function () { return O(this, k) } }, { key: "resolve", value: function (e) { O(this, R).call(this, e) } }, { key: "reject", value: function (e) { O(this, I).call(this, e) } }]) && P(t.prototype, r), Object.defineProperty(t, "prototype", { writable: !1 }), e }(); function L(e) { return L = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e }, L(e) } function j(e, t) { for (var r = 0; r < t.length; r++) { var n = t[r]; n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, C(n.key), n) } } function N(e, t, r) { return t && j(e.prototype, t), r && j(e, r), Object.defineProperty(e, "prototype", { writable: !1 }), e } function C(e) { var t = function (e, t) { if ("object" != L(e) || !e) return e; var r = e[Symbol.toPrimitive]; if (void 0 !== r) { var n = r.call(e, "string"); if ("object" != L(n)) return n; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(e) }(e); return "symbol" == L(t) ? t : String(t) } const B = N((function e(t) { var r, n, o; !function (e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, e), r = this, o = void 0, (n = C(n = "_platformBridge")) in r ? Object.defineProperty(r, n, { value: o, enumerable: !0, configurable: !0, writable: !0 }) : r[n] = o, this._platformBridge = t })); function G(e) { return G = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e }, G(e) } function M(e, t) { for (var r = 0; r < t.length; r++) { var n = t[r]; n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, F(n.key), n) } } function F(e) { var t = function (e, t) { if ("object" != G(e) || !e) return e; var r = e[Symbol.toPrimitive]; if (void 0 !== r) { var n = r.call(e, "string"); if ("object" != G(n)) return n; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(e) }(e); return "symbol" == G(t) ? t : String(t) } function U(e, t) { return U = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) { return e.__proto__ = t, e }, U(e, t) } function H(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e } function z(e) { return z = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (e) { return e.__proto__ || Object.getPrototypeOf(e) }, z(e) } function W(e, t, r) { if (!t.has(e)) throw new TypeError("attempted to " + r + " private field on non-instance"); return t.get(e) } var x = new WeakMap; const V = function (e) { !function (e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function"); e.prototype = Object.create(t && t.prototype, { constructor: { value: e, writable: !0, configurable: !0 } }), Object.defineProperty(e, "prototype", { writable: !1 }), t && U(e, t) }(a, e); var t, r, n, o, i = (n = a, o = function () { if ("undefined" == typeof Reflect || !Reflect.construct) return !1; if (Reflect.construct.sham) return !1; if ("function" == typeof Proxy) return !0; try { return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function () { }))), !0 } catch (e) { return !1 } }(), function () { var e, t = z(n); if (o) { var r = z(this).constructor; e = Reflect.construct(t, arguments, r) } else e = t.apply(this, arguments); return function (e, t) { if (t && ("object" === G(t) || "function" == typeof t)) return t; if (void 0 !== t) throw new TypeError("Derived constructors may only return object or undefined"); return H(e) }(this, e) }); function a() { var e, t, r, n; !function (e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, a); for (var o = arguments.length, s = new Array(o), u = 0; u < o; u++)s[u] = arguments[u]; return t = H(e = i.call.apply(i, [this].concat(s))), n = { writable: !0, value: !1 }, function (e, t) { if (t.has(e)) throw new TypeError("Cannot initialize the same private elements twice on an object") }(t, r = x), r.set(t, n), e } return t = a, (r = [{ key: "id", get: function () { return this._platformBridge.platformId } }, { key: "sdk", get: function () { return this._platformBridge.platformSdk } }, { key: "language", get: function () { return this._platformBridge.platformLanguage } }, { key: "payload", get: function () { return this._platformBridge.platformPayload } }, { key: "tld", get: function () { return this._platformBridge.platformTld } }, { key: "isGetAllGamesSupported", get: function () { return this._platformBridge.isPlatformGetAllGamesSupported } }, { key: "isGetGameByIdSupported", get: function () { return this._platformBridge.isPlatformGetGameByIdSupported } }, { key: "sendMessage", value: function (e) { if (e === f.GAME_READY) { if (function (e, t) { return t.get ? t.get.call(e) : t.value }(this, W(this, x, "get"))) return Promise.reject(); !function (e, t, r) { (function (e, t, r) { if (t.set) t.set.call(e, r); else { if (!t.writable) throw new TypeError("attempted to set read only private field"); t.value = r } })(e, W(e, t, "set"), r) }(this, x, !0) } return this._platformBridge.sendMessage(e) } }, { key: "getServerTime", value: function () { return this._platformBridge.getServerTime() } }, { key: "getAllGames", value: function () { return this._platformBridge.getAllGames() } }, { key: "getGameById", value: function (e) { if (e) { var t = e[this._platformBridge.platformId]; if (t) return this.getGameById(t) } return this._platformBridge.getGameById(e) } }]) && M(t.prototype, r), Object.defineProperty(t, "prototype", { writable: !1 }), a }(B); function Y(e) { return Y = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e }, Y(e) } function Z(e, t) { for (var r = 0; r < t.length; r++) { var n = t[r]; n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, K(n.key), n) } } function K(e) { var t = function (e, t) { if ("object" != Y(e) || !e) return e; var r = e[Symbol.toPrimitive]; if (void 0 !== r) { var n = r.call(e, "string"); if ("object" != Y(n)) return n; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(e) }(e); return "symbol" == Y(t) ? t : String(t) } function J(e, t) { return J = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) { return e.__proto__ = t, e }, J(e, t) } function q(e) { return q = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (e) { return e.__proto__ || Object.getPrototypeOf(e) }, q(e) } const X = function (e) { !function (e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function"); e.prototype = Object.create(t && t.prototype, { constructor: { value: e, writable: !0, configurable: !0 } }), Object.defineProperty(e, "prototype", { writable: !1 }), t && J(e, t) }(a, e); var t, r, n, o, i = (n = a, o = function () { if ("undefined" == typeof Reflect || !Reflect.construct) return !1; if (Reflect.construct.sham) return !1; if ("function" == typeof Proxy) return !0; try { return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function () { }))), !0 } catch (e) { return !1 } }(), function () { var e, t = q(n); if (o) { var r = q(this).constructor; e = Reflect.construct(t, arguments, r) } else e = t.apply(this, arguments); return function (e, t) { if (t && ("object" === Y(t) || "function" == typeof t)) return t; if (void 0 !== t) throw new TypeError("Derived constructors may only return object or undefined"); return function (e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e }(e) }(this, e) }); function a() { return function (e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, a), i.apply(this, arguments) } return t = a, (r = [{ key: "isAuthorizationSupported", get: function () { return this._platformBridge.isPlayerAuthorizationSupported } }, { key: "isAuthorized", get: function () { return this._platformBridge.isPlayerAuthorized } }, { key: "id", get: function () { return this._platformBridge.playerId } }, { key: "name", get: function () { return this._platformBridge.playerName } }, { key: "photos", get: function () { return this._platformBridge.playerPhotos } }, { key: "authorize", value: function (e) { if (e) { var t = e[this._platformBridge.platformId]; if (t) return this.authorize(t) } return this._platformBridge.authorizePlayer(e) } }]) && Z(t.prototype, r), Object.defineProperty(t, "prototype", { writable: !1 }), a }(B); var Q = r(258), $ = r.n(Q); function ee(e) { return ee = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e }, ee(e) } function te(e, t) { for (var r = 0; r < t.length; r++) { var n = t[r]; n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, re(n.key), n) } } function re(e) { var t = function (e, t) { if ("object" != ee(e) || !e) return e; var r = e[Symbol.toPrimitive]; if (void 0 !== r) { var n = r.call(e, "string"); if ("object" != ee(n)) return n; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(e) }(e); return "symbol" == ee(t) ? t : String(t) } function ne(e, t) { return ne = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) { return e.__proto__ = t, e }, ne(e, t) } function oe(e) { return oe = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (e) { return e.__proto__ || Object.getPrototypeOf(e) }, oe(e) } var ie = function (e) { !function (e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function"); e.prototype = Object.create(t && t.prototype, { constructor: { value: e, writable: !0, configurable: !0 } }), Object.defineProperty(e, "prototype", { writable: !1 }), t && ne(e, t) }(s, e); var t, r, o, i, a = (o = s, i = function () { if ("undefined" == typeof Reflect || !Reflect.construct) return !1; if (Reflect.construct.sham) return !1; if ("function" == typeof Proxy) return !0; try { return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function () { }))), !0 } catch (e) { return !1 } }(), function () { var e, t = oe(o); if (i) { var r = oe(this).constructor; e = Reflect.construct(t, arguments, r) } else e = t.apply(this, arguments); return function (e, t) { if (t && ("object" === ee(t) || "function" == typeof t)) return t; if (void 0 !== t) throw new TypeError("Derived constructors may only return object or undefined"); return function (e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e }(e) }(this, e) }); function s(e) { var t; return function (e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, s), (t = a.call(this, e))._platformBridge.on(n.VISIBILITY_STATE_CHANGED, (function (e) { return t.emit(n.VISIBILITY_STATE_CHANGED, e) })), t } return t = s, (r = [{ key: "visibilityState", get: function () { return this._platformBridge.visibilityState } }]) && te(t.prototype, r), Object.defineProperty(t, "prototype", { writable: !1 }), s }(B); $().mixin(ie.prototype); const ae = ie; function se(e) { return se = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e }, se(e) } function ue(e, t) { for (var r = 0; r < t.length; r++) { var n = t[r]; n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, ce(n.key), n) } } function ce(e) { var t = function (e, t) { if ("object" != se(e) || !e) return e; var r = e[Symbol.toPrimitive]; if (void 0 !== r) { var n = r.call(e, "string"); if ("object" != se(n)) return n; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(e) }(e); return "symbol" == se(t) ? t : String(t) } function le(e, t) { return le = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) { return e.__proto__ = t, e }, le(e, t) } function fe(e) { return fe = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (e) { return e.__proto__ || Object.getPrototypeOf(e) }, fe(e) } const pe = function (e) { !function (e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function"); e.prototype = Object.create(t && t.prototype, { constructor: { value: e, writable: !0, configurable: !0 } }), Object.defineProperty(e, "prototype", { writable: !1 }), t && le(e, t) }(a, e); var t, r, n, o, i = (n = a, o = function () { if ("undefined" == typeof Reflect || !Reflect.construct) return !1; if (Reflect.construct.sham) return !1; if ("function" == typeof Proxy) return !0; try { return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function () { }))), !0 } catch (e) { return !1 } }(), function () { var e, t = fe(n); if (o) { var r = fe(this).constructor; e = Reflect.construct(t, arguments, r) } else e = t.apply(this, arguments); return function (e, t) { if (t && ("object" === se(t) || "function" == typeof t)) return t; if (void 0 !== t) throw new TypeError("Derived constructors may only return object or undefined"); return function (e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e }(e) }(this, e) }); function a() { return function (e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, a), i.apply(this, arguments) } return t = a, r = [{ key: "defaultType", get: function () { return this._platformBridge.defaultStorageType } }, { key: "isSupported", value: function (e) { if (e) { var t = e[this._platformBridge.platformId]; if (t) return this.isSupported(t) } return this._platformBridge.isStorageSupported(e) } }, { key: "isAvailable", value: function (e) { if (e) { var t = e[this._platformBridge.platformId]; if (t) return this.isSupported(t) } return this._platformBridge.isStorageAvailable(e) } }, { key: "get", value: function (e, t) { var r = !(arguments.length > 2 && void 0 !== arguments[2]) || arguments[2]; if (t) { var n = t[this._platformBridge.platformId]; if (n) return this.get(e, n, r) } var o = t; return o || (o = this.defaultType), this._platformBridge.isStorageAvailable(o) ? this._platformBridge.getDataFromStorage(e, o, r) : Promise.reject() } }, { key: "set", value: function (e, t, r) { if (r) { var n = r[this._platformBridge.platformId]; if (n) return this.set(e, t, n) } var o = r; return o || (o = this.defaultType), this._platformBridge.isStorageAvailable(o) ? this._platformBridge.setDataToStorage(e, t, o) : Promise.reject() } }, { key: "delete", value: function (e, t) { if (t) { var r = t[this._platformBridge.platformId]; if (r) return this.delete(e, r) } var n = t; return n || (n = this.defaultType), this._platformBridge.isStorageAvailable(n) ? this._platformBridge.deleteDataFromStorage(e, n) : Promise.reject() } }], r && ue(t.prototype, r), Object.defineProperty(t, "prototype", { writable: !1 }), a }(B); function de(e) { return de = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e }, de(e) } function he(e, t) { for (var r = 0; r < t.length; r++) { var n = t[r]; n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, ye(n.key), n) } } function ye(e) { var t = function (e, t) { if ("object" != de(e) || !e) return e; var r = e[Symbol.toPrimitive]; if (void 0 !== r) { var n = r.call(e, "string"); if ("object" != de(n)) return n; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(e) }(e); return "symbol" == de(t) ? t : String(t) } function me(e, t) { _e(e, t), t.add(e) } function ve(e, t, r) { _e(e, t), t.set(e, r) } function _e(e, t) { if (t.has(e)) throw new TypeError("Cannot initialize the same private elements twice on an object") } function ge(e, t, r) { if (!t.has(e)) throw new TypeError("attempted to get private field on non-instance"); return r } function Se(e, t, r) { return function (e, t, r) { if (t.set) t.set.call(e, r); else { if (!t.writable) throw new TypeError("attempted to set read only private field"); t.value = r } }(e, Pe(e, t, "set"), r), r } function be(e, t) { return function (e, t) { return t.get ? t.get.call(e) : t.value }(e, Pe(e, t, "get")) } function Pe(e, t, r) { if (!t.has(e)) throw new TypeError("attempted to " + r + " private field on non-instance"); return t.get(e) } var Ee = "started", Ae = new WeakMap, we = new WeakMap, Oe = new WeakMap, De = new WeakMap, ke = new WeakSet, Re = new WeakSet, Ie = function () { function e(t) { !function (e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, e), me(this, Re), me(this, ke), ve(this, Ae, { writable: !0, value: 0 }), ve(this, we, { writable: !0, value: 0 }), ve(this, Oe, { writable: !0, value: "created" }), ve(this, De, { writable: !0, value: 0 }), Se(this, Ae, t) } var t, r; return t = e, (r = [{ key: "state", get: function () { return be(this, Oe) } }, { key: "start", value: function () { var e = this; be(this, Oe) !== Ee && (Se(this, we, be(this, Ae)), ge(this, ke, Te).call(this, Ee), Se(this, De, setInterval((function () { Se(e, we, be(e, we) - 1), e.emit("time_left_changed", be(e, we)), be(e, we) <= 0 && (ge(e, Re, Le).call(e), ge(e, ke, Te).call(e, "completed")) }), 1e3))) } }, { key: "stop", value: function () { ge(this, Re, Le).call(this), be(this, Oe) === Ee && ge(this, ke, Te).call(this, "stopped") } }]) && he(t.prototype, r), Object.defineProperty(t, "prototype", { writable: !1 }), e }(); function Te(e) { Se(this, Oe, e), this.emit("state_changed", be(this, Oe)) } function Le() { clearInterval(be(this, De)), Se(this, we, 0) } $().mixin(Ie.prototype); const je = Ie; function Ne(e) { return Ne = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e }, Ne(e) } function Ce(e, t) { for (var r = 0; r < t.length; r++) { var n = t[r]; n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, Be(n.key), n) } } function Be(e) { var t = function (e, t) { if ("object" != Ne(e) || !e) return e; var r = e[Symbol.toPrimitive]; if (void 0 !== r) { var n = r.call(e, "string"); if ("object" != Ne(n)) return n; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(e) }(e); return "symbol" == Ne(t) ? t : String(t) } function Ge(e, t) { return Ge = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) { return e.__proto__ = t, e }, Ge(e, t) } function Me(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e } function Fe(e) { return Fe = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (e) { return e.__proto__ || Object.getPrototypeOf(e) }, Fe(e) } function Ue(e, t) { ze(e, t), t.add(e) } function He(e, t, r) { ze(e, t), t.set(e, r) } function ze(e, t) { if (t.has(e)) throw new TypeError("Cannot initialize the same private elements twice on an object") } function We(e, t, r) { return function (e, t, r) { if (t.set) t.set.call(e, r); else { if (!t.writable) throw new TypeError("attempted to set read only private field"); t.value = r } }(e, Ye(e, t, "set"), r), r } function xe(e, t, r) { if (!t.has(e)) throw new TypeError("attempted to get private field on non-instance"); return r } function Ve(e, t) { return function (e, t) { return t.get ? t.get.call(e) : t.value }(e, Ye(e, t, "get")) } function Ye(e, t, r) { if (!t.has(e)) throw new TypeError("attempted to " + r + " private field on non-instance"); return t.get(e) } var Ze = new WeakMap, Ke = new WeakMap, Je = new WeakMap, qe = new WeakMap, Xe = new WeakMap, Qe = new WeakMap, $e = new WeakSet, et = new WeakSet, tt = new WeakSet, rt = new WeakSet, nt = new WeakSet, ot = new WeakSet, it = function (e) { !function (e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function"); e.prototype = Object.create(t && t.prototype, { constructor: { value: e, writable: !0, configurable: !0 } }), Object.defineProperty(e, "prototype", { writable: !1 }), t && Ge(e, t) }(l, e); var t, r, o, u, c = (o = l, u = function () { if ("undefined" == typeof Reflect || !Reflect.construct) return !1; if (Reflect.construct.sham) return !1; if ("function" == typeof Proxy) return !0; try { return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function () { }))), !0 } catch (e) { return !1 } }(), function () { var e, t = Fe(o); if (u) { var r = Fe(this).constructor; e = Reflect.construct(t, arguments, r) } else e = t.apply(this, arguments); return function (e, t) { if (t && ("object" === Ne(t) || "function" == typeof t)) return t; if (void 0 !== t) throw new TypeError("Derived constructors may only return object or undefined"); return Me(e) }(this, e) }); function l(e) { var t; return function (e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, l), Ue(Me(t = c.call(this, e)), ot), Ue(Me(t), nt), Ue(Me(t), rt), Ue(Me(t), tt), Ue(Me(t), et), Ue(Me(t), $e), He(Me(t), Ze, { writable: !0, value: s.HIDDEN }), He(Me(t), Ke, { writable: !0, value: i.CLOSED }), He(Me(t), Je, { writable: !0, value: void 0 }), He(Me(t), qe, { writable: !0, value: 60 }), He(Me(t), Xe, { writable: !0, value: a.CLOSED }), He(Me(t), Qe, { writable: !0, value: null }), t._platformBridge.on(n.BANNER_STATE_CHANGED, (function (e) { return xe(Me(t), tt, ut).call(Me(t), e) })), t._platformBridge.on(n.INTERSTITIAL_STATE_CHANGED, (function (e) { e === i.CLOSED && xe(Me(t), $e, at).call(Me(t)), xe(Me(t), rt, ct).call(Me(t), e) })), t._platformBridge.on(n.REWARDED_STATE_CHANGED, (function (e) { return xe(Me(t), nt, lt).call(Me(t), e) })), t } return t = l, r = [{ key: "isBannerSupported", get: function () { return this._platformBridge.isBannerSupported } }, { key: "bannerState", get: function () { return Ve(this, Ze) } }, { key: "interstitialState", get: function () { return Ve(this, Ke) } }, { key: "rewardedPlacement", get: function () { return Ve(this, Qe) } }, { key: "rewardedState", get: function () { return Ve(this, Xe) } }, { key: "minimumDelayBetweenInterstitial", get: function () { return Ve(this, qe) } }, { key: "setMinimumDelayBetweenInterstitial", value: function (e) { var t = Ne(e), r = Ve(this, qe); switch (t) { case "number": r = e; break; case "string": if (r = parseInt(e, 10), Number.isNaN(r)) return; break; default: return }We(this, qe, r), Ve(this, Je) && (Ve(this, Je).stop(), xe(this, $e, at).call(this)) } }, { key: "showBanner", value: function () { var e, t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "bottom", r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null; if (this.bannerState !== s.LOADING && this.bannerState !== s.SHOWN) if (xe(this, tt, ut).call(this, s.LOADING), this.isBannerSupported) { var n, o = r; o || null !== (n = this._platformBridge.options) && void 0 !== n && null !== (n = n.advertisement) && void 0 !== n && null !== (n = n.banner) && void 0 !== n && n.placementFallback && (o = this._platformBridge.options.advertisement.banner.placementFallback); var i = null === (e = this._platformBridge.options) || void 0 === e || null === (e = e.advertisement) || void 0 === e || null === (e = e.banner) || void 0 === e ? void 0 : e.placements, a = xe(this, ot, ft).call(this, o, i); this._platformBridge.showBanner(t, a) } else xe(this, tt, ut).call(this, s.FAILED) } }, { key: "hideBanner", value: function () { this.bannerState !== s.LOADING && this.bannerState !== s.HIDDEN && this.isBannerSupported && this._platformBridge.hideBanner() } }, { key: "preloadInterstitial", value: function () { var e, t, r = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : null; r && "string" == typeof r || null !== (t = this._platformBridge.options) && void 0 !== t && null !== (t = t.advertisement) && void 0 !== t && null !== (t = t.interstitial) && void 0 !== t && t.placementFallback && (r = this._platformBridge.options.advertisement.interstitial.placementFallback); var n = null === (e = this._platformBridge.options) || void 0 === e || null === (e = e.advertisement) || void 0 === e || null === (e = e.interstitial) || void 0 === e ? void 0 : e.placements, o = xe(this, ot, ft).call(this, r, n); this._platformBridge.preloadInterstitial(o) } }, { key: "showInterstitial", value: function () { var e, t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : null; if (!xe(this, et, st).call(this)) if (xe(this, rt, ct).call(this, i.LOADING), this._platformBridge.isMinimumDelayBetweenInterstitialEnabled && Ve(this, Je) && Ve(this, Je).state === Ee) xe(this, rt, ct).call(this, i.FAILED); else { var r, n = t; n || null !== (r = this._platformBridge.options) && void 0 !== r && null !== (r = r.advertisement) && void 0 !== r && null !== (r = r.interstitial) && void 0 !== r && r.placementFallback && (n = this._platformBridge.options.advertisement.interstitial.placementFallback); var o = null === (e = this._platformBridge.options) || void 0 === e || null === (e = e.advertisement) || void 0 === e || null === (e = e.interstitial) || void 0 === e ? void 0 : e.placements, a = xe(this, ot, ft).call(this, n, o); this._platformBridge.showInterstitial(a) } } }, { key: "preloadRewarded", value: function () { var e, t, r = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : null; r && "string" == typeof r || null !== (t = this._platformBridge.options) && void 0 !== t && null !== (t = t.advertisement) && void 0 !== t && null !== (t = t.rewarded) && void 0 !== t && t.placementFallback && (r = this._platformBridge.options.advertisement.rewarded.placementFallback); var n = null === (e = this._platformBridge.options) || void 0 === e || null === (e = e.advertisement) || void 0 === e || null === (e = e.rewarded) || void 0 === e ? void 0 : e.placements, o = xe(this, ot, ft).call(this, r, n); this._platformBridge.preloadRewarded(o) } }, { key: "showRewarded", value: function () { var e, t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : null; if (!xe(this, et, st).call(this)) { var r; We(this, Qe, t), Ve(this, Qe) || null !== (r = this._platformBridge.options) && void 0 !== r && null !== (r = r.advertisement) && void 0 !== r && null !== (r = r.rewarded) && void 0 !== r && r.placementFallback && We(this, Qe, this._platformBridge.options.advertisement.rewarded.placementFallback); var n = null === (e = this._platformBridge.options) || void 0 === e || null === (e = e.advertisement) || void 0 === e || null === (e = e.rewarded) || void 0 === e ? void 0 : e.placements, o = xe(this, ot, ft).call(this, Ve(this, Qe), n); xe(this, nt, lt).call(this, a.LOADING), this._platformBridge.showRewarded(o) } } }, { key: "checkAdBlock", value: function () { return this._platformBridge.checkAdBlock() } }], r && Ce(t.prototype, r), Object.defineProperty(t, "prototype", { writable: !1 }), l }(B); function at() { Ve(this, qe) > 0 && this._platformBridge.isMinimumDelayBetweenInterstitialEnabled && (We(this, Je, new je(Ve(this, qe))), Ve(this, Je).start()) } function st() { var e = [i.LOADING, i.OPENED].includes(Ve(this, Ke)), t = [a.LOADING, a.OPENED, a.REWARDED].includes(Ve(this, Xe)); return e || t } function ut(e) { Ve(this, Ze) !== e && (We(this, Ze, e), this.emit(n.BANNER_STATE_CHANGED, Ve(this, Ze))) } function ct(e) { Ve(this, Ke) !== e && (We(this, Ke, e), this.emit(n.INTERSTITIAL_STATE_CHANGED, Ve(this, Ke))) } function lt(e) { Ve(this, Xe) !== e && (We(this, Xe, e), this.emit(n.REWARDED_STATE_CHANGED, Ve(this, Xe))) } function ft(e, t) { if (!e) return e; if (!t) return e; var r = t.find((function (t) { return t.id === e })); return r && r[this._platformBridge.platformId] ? r[this._platformBridge.platformId] : e } $().mixin(it.prototype); const pt = it; function dt(e) { return dt = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e }, dt(e) } function ht(e, t) { for (var r = 0; r < t.length; r++) { var n = t[r]; n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, yt(n.key), n) } } function yt(e) { var t = function (e, t) { if ("object" != dt(e) || !e) return e; var r = e[Symbol.toPrimitive]; if (void 0 !== r) { var n = r.call(e, "string"); if ("object" != dt(n)) return n; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(e) }(e); return "symbol" == dt(t) ? t : String(t) } function mt(e, t) { return mt = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) { return e.__proto__ = t, e }, mt(e, t) } function vt(e) { return vt = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (e) { return e.__proto__ || Object.getPrototypeOf(e) }, vt(e) } const _t = function (e) { !function (e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function"); e.prototype = Object.create(t && t.prototype, { constructor: { value: e, writable: !0, configurable: !0 } }), Object.defineProperty(e, "prototype", { writable: !1 }), t && mt(e, t) }(a, e); var t, r, n, o, i = (n = a, o = function () { if ("undefined" == typeof Reflect || !Reflect.construct) return !1; if (Reflect.construct.sham) return !1; if ("function" == typeof Proxy) return !0; try { return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function () { }))), !0 } catch (e) { return !1 } }(), function () { var e, t = vt(n); if (o) { var r = vt(this).constructor; e = Reflect.construct(t, arguments, r) } else e = t.apply(this, arguments); return function (e, t) { if (t && ("object" === dt(t) || "function" == typeof t)) return t; if (void 0 !== t) throw new TypeError("Derived constructors may only return object or undefined"); return function (e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e }(e) }(this, e) }); function a() { return function (e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, a), i.apply(this, arguments) } return t = a, (r = [{ key: "isInviteFriendsSupported", get: function () { return this._platformBridge.isInviteFriendsSupported } }, { key: "isJoinCommunitySupported", get: function () { return this._platformBridge.isJoinCommunitySupported } }, { key: "isShareSupported", get: function () { return this._platformBridge.isShareSupported } }, { key: "isCreatePostSupported", get: function () { return this._platformBridge.isCreatePostSupported } }, { key: "isAddToHomeScreenSupported", get: function () { return this._platformBridge.isAddToHomeScreenSupported } }, { key: "isAddToFavoritesSupported", get: function () { return this._platformBridge.isAddToFavoritesSupported } }, { key: "isRateSupported", get: function () { return this._platformBridge.isRateSupported } }, { key: "isExternalLinksAllowed", get: function () { return this._platformBridge.isExternalLinksAllowed } }, { key: "inviteFriends", value: function (e) { if (e) { var t = e[this._platformBridge.platformId]; if (t) return this.inviteFriends(t) } return this._platformBridge.inviteFriends(e) } }, { key: "joinCommunity", value: function (e) { if (e) { var t = e[this._platformBridge.platformId]; if (t) return this.joinCommunity(t) } return this._platformBridge.joinCommunity(e) } }, { key: "share", value: function (e) { if (e) { var t = e[this._platformBridge.platformId]; if (t) return this.share(t) } return this._platformBridge.share(e) } }, { key: "createPost", value: function (e) { if (e) { var t = e[this._platformBridge.platformId]; if (t) return this.createPost(t) } return this._platformBridge.createPost(e) } }, { key: "addToHomeScreen", value: function () { return this._platformBridge.addToHomeScreen() } }, { key: "addToFavorites", value: function () { return this._platformBridge.addToFavorites() } }, { key: "rate", value: function () { return this._platformBridge.rate() } }]) && ht(t.prototype, r), Object.defineProperty(t, "prototype", { writable: !1 }), a }(B); function gt(e) { return gt = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e }, gt(e) } function St(e, t) { for (var r = 0; r < t.length; r++) { var n = t[r]; n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, bt(n.key), n) } } function bt(e) { var t = function (e, t) { if ("object" != gt(e) || !e) return e; var r = e[Symbol.toPrimitive]; if (void 0 !== r) { var n = r.call(e, "string"); if ("object" != gt(n)) return n; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(e) }(e); return "symbol" == gt(t) ? t : String(t) } function Pt(e, t) { return Pt = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) { return e.__proto__ = t, e }, Pt(e, t) } function Et(e) { return Et = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (e) { return e.__proto__ || Object.getPrototypeOf(e) }, Et(e) } const At = function (e) { !function (e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function"); e.prototype = Object.create(t && t.prototype, { constructor: { value: e, writable: !0, configurable: !0 } }), Object.defineProperty(e, "prototype", { writable: !1 }), t && Pt(e, t) }(a, e); var t, r, n, o, i = (n = a, o = function () { if ("undefined" == typeof Reflect || !Reflect.construct) return !1; if (Reflect.construct.sham) return !1; if ("function" == typeof Proxy) return !0; try { return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function () { }))), !0 } catch (e) { return !1 } }(), function () { var e, t = Et(n); if (o) { var r = Et(this).constructor; e = Reflect.construct(t, arguments, r) } else e = t.apply(this, arguments); return function (e, t) { if (t && ("object" === gt(t) || "function" == typeof t)) return t; if (void 0 !== t) throw new TypeError("Derived constructors may only return object or undefined"); return function (e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e }(e) }(this, e) }); function a() { return function (e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, a), i.apply(this, arguments) } return t = a, (r = [{ key: "type", get: function () { return this._platformBridge.deviceType } }]) && St(t.prototype, r), Object.defineProperty(t, "prototype", { writable: !1 }), a }(B); function wt(e) { return wt = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e }, wt(e) } function Ot(e, t) { for (var r = 0; r < t.length; r++) { var n = t[r]; n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, Dt(n.key), n) } } function Dt(e) { var t = function (e, t) { if ("object" != wt(e) || !e) return e; var r = e[Symbol.toPrimitive]; if (void 0 !== r) { var n = r.call(e, "string"); if ("object" != wt(n)) return n; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(e) }(e); return "symbol" == wt(t) ? t : String(t) } function kt(e, t) { return kt = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) { return e.__proto__ = t, e }, kt(e, t) } function Rt(e) { return Rt = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (e) { return e.__proto__ || Object.getPrototypeOf(e) }, Rt(e) } const It = function (e) { !function (e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function"); e.prototype = Object.create(t && t.prototype, { constructor: { value: e, writable: !0, configurable: !0 } }), Object.defineProperty(e, "prototype", { writable: !1 }), t && kt(e, t) }(a, e); var t, r, n, o, i = (n = a, o = function () { if ("undefined" == typeof Reflect || !Reflect.construct) return !1; if (Reflect.construct.sham) return !1; if ("function" == typeof Proxy) return !0; try { return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function () { }))), !0 } catch (e) { return !1 } }(), function () { var e, t = Rt(n); if (o) { var r = Rt(this).constructor; e = Reflect.construct(t, arguments, r) } else e = t.apply(this, arguments); return function (e, t) { if (t && ("object" === wt(t) || "function" == typeof t)) return t; if (void 0 !== t) throw new TypeError("Derived constructors may only return object or undefined"); return function (e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e }(e) }(this, e) }); function a() { return function (e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, a), i.apply(this, arguments) } return t = a, (r = [{ key: "isSupported", get: function () { return this._platformBridge.isLeaderboardSupported } }, { key: "isNativePopupSupported", get: function () { return this._platformBridge.isLeaderboardNativePopupSupported } }, { key: "isMultipleBoardsSupported", get: function () { return this._platformBridge.isLeaderboardMultipleBoardsSupported } }, { key: "isSetScoreSupported", get: function () { return this._platformBridge.isLeaderboardSetScoreSupported } }, { key: "isGetScoreSupported", get: function () { return this._platformBridge.isLeaderboardGetScoreSupported } }, { key: "isGetEntriesSupported", get: function () { return this._platformBridge.isLeaderboardGetEntriesSupported } }, { key: "setScore", value: function (e) { if (e) { var t = e[this._platformBridge.platformId]; if (t) return this.setScore(t) } return this._platformBridge.setLeaderboardScore(e) } }, { key: "getScore", value: function (e) { if (e) { var t = e[this._platformBridge.platformId]; if (t) return this.getScore(t) } return this._platformBridge.getLeaderboardScore(e) } }, { key: "getEntries", value: function (e) { if (e) { var t = e[this._platformBridge.platformId]; if (t) return this.getEntries(t) } return this._platformBridge.getLeaderboardEntries(e) } }, { key: "showNativePopup", value: function (e) { if (e) { var t = e[this._platformBridge.platformId]; if (t) return this.showNativePopup(t) } return this._platformBridge.showLeaderboardNativePopup(e) } }]) && Ot(t.prototype, r), Object.defineProperty(t, "prototype", { writable: !1 }), a }(B); function Tt(e) { return Tt = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e }, Tt(e) } function Lt(e, t) { for (var r = 0; r < t.length; r++) { var n = t[r]; n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, jt(n.key), n) } } function jt(e) { var t = function (e, t) { if ("object" != Tt(e) || !e) return e; var r = e[Symbol.toPrimitive]; if (void 0 !== r) { var n = r.call(e, "string"); if ("object" != Tt(n)) return n; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(e) }(e); return "symbol" == Tt(t) ? t : String(t) } function Nt(e, t) { return Nt = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) { return e.__proto__ = t, e }, Nt(e, t) } function Ct(e) { return Ct = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (e) { return e.__proto__ || Object.getPrototypeOf(e) }, Ct(e) } const Bt = function (e) { !function (e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function"); e.prototype = Object.create(t && t.prototype, { constructor: { value: e, writable: !0, configurable: !0 } }), Object.defineProperty(e, "prototype", { writable: !1 }), t && Nt(e, t) }(a, e); var t, r, n, o, i = (n = a, o = function () { if ("undefined" == typeof Reflect || !Reflect.construct) return !1; if (Reflect.construct.sham) return !1; if ("function" == typeof Proxy) return !0; try { return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function () { }))), !0 } catch (e) { return !1 } }(), function () { var e, t = Ct(n); if (o) { var r = Ct(this).constructor; e = Reflect.construct(t, arguments, r) } else e = t.apply(this, arguments); return function (e, t) { if (t && ("object" === Tt(t) || "function" == typeof t)) return t; if (void 0 !== t) throw new TypeError("Derived constructors may only return object or undefined"); return function (e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e }(e) }(this, e) }); function a() { return function (e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, a), i.apply(this, arguments) } return t = a, (r = [{ key: "isSupported", get: function () { return this._platformBridge.isPaymentsSupported } }, { key: "purchase", value: function (e) { return this._platformBridge.paymentsPurchase(e) } }, { key: "getPurchases", value: function () { return this._platformBridge.paymentsGetPurchases() } }, { key: "getCatalog", value: function () { return this._platformBridge.paymentsGetCatalog() } }, { key: "consumePurchase", value: function (e) { return this._platformBridge.paymentsConsumePurchase(e) } }]) && Lt(t.prototype, r), Object.defineProperty(t, "prototype", { writable: !1 }), a }(B); function Gt(e) { return Gt = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e }, Gt(e) } function Mt(e, t) { for (var r = 0; r < t.length; r++) { var n = t[r]; n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, Ft(n.key), n) } } function Ft(e) { var t = function (e, t) { if ("object" != Gt(e) || !e) return e; var r = e[Symbol.toPrimitive]; if (void 0 !== r) { var n = r.call(e, "string"); if ("object" != Gt(n)) return n; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(e) }(e); return "symbol" == Gt(t) ? t : String(t) } function Ut(e, t) { return Ut = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) { return e.__proto__ = t, e }, Ut(e, t) } function Ht(e) { return Ht = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (e) { return e.__proto__ || Object.getPrototypeOf(e) }, Ht(e) } const zt = function (e) { !function (e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function"); e.prototype = Object.create(t && t.prototype, { constructor: { value: e, writable: !0, configurable: !0 } }), Object.defineProperty(e, "prototype", { writable: !1 }), t && Ut(e, t) }(a, e); var t, r, n, o, i = (n = a, o = function () { if ("undefined" == typeof Reflect || !Reflect.construct) return !1; if (Reflect.construct.sham) return !1; if ("function" == typeof Proxy) return !0; try { return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function () { }))), !0 } catch (e) { return !1 } }(), function () { var e, t = Ht(n); if (o) { var r = Ht(this).constructor; e = Reflect.construct(t, arguments, r) } else e = t.apply(this, arguments); return function (e, t) { if (t && ("object" === Gt(t) || "function" == typeof t)) return t; if (void 0 !== t) throw new TypeError("Derived constructors may only return object or undefined"); return function (e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e }(e) }(this, e) }); function a() { return function (e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, a), i.apply(this, arguments) } return t = a, (r = [{ key: "isSupported", get: function () { return this._platformBridge.isRemoteConfigSupported } }, { key: "get", value: function (e) { if (e) { var t = e[this._platformBridge.platformId]; if (t) return this.get(t) } return this._platformBridge.getRemoteConfig(e) } }]) && Mt(t.prototype, r), Object.defineProperty(t, "prototype", { writable: !1 }), a }(B); function Wt(e) { return Wt = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e }, Wt(e) } function xt(e, t) { for (var r = 0; r < t.length; r++) { var n = t[r]; n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, Vt(n.key), n) } } function Vt(e) { var t = function (e, t) { if ("object" != Wt(e) || !e) return e; var r = e[Symbol.toPrimitive]; if (void 0 !== r) { var n = r.call(e, "string"); if ("object" != Wt(n)) return n; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(e) }(e); return "symbol" == Wt(t) ? t : String(t) } function Yt(e, t) { return Yt = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) { return e.__proto__ = t, e }, Yt(e, t) } function Zt(e) { return Zt = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (e) { return e.__proto__ || Object.getPrototypeOf(e) }, Zt(e) } const Kt = function (e) { !function (e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function"); e.prototype = Object.create(t && t.prototype, { constructor: { value: e, writable: !0, configurable: !0 } }), Object.defineProperty(e, "prototype", { writable: !1 }), t && Yt(e, t) }(a, e); var t, r, n, o, i = (n = a, o = function () { if ("undefined" == typeof Reflect || !Reflect.construct) return !1; if (Reflect.construct.sham) return !1; if ("function" == typeof Proxy) return !0; try { return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function () { }))), !0 } catch (e) { return !1 } }(), function () { var e, t = Zt(n); if (o) { var r = Zt(this).constructor; e = Reflect.construct(t, arguments, r) } else e = t.apply(this, arguments); return function (e, t) { if (t && ("object" === Wt(t) || "function" == typeof t)) return t; if (void 0 !== t) throw new TypeError("Derived constructors may only return object or undefined"); return function (e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e }(e) }(this, e) }); function a() { return function (e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, a), i.apply(this, arguments) } return t = a, (r = [{ key: "isSupported", get: function () { return this._platformBridge.isClipboardSupported } }, { key: "read", value: function () { return this._platformBridge.clipboardRead() } }, { key: "write", value: function (e) { return this._platformBridge.clipboardWrite(e) } }]) && xt(t.prototype, r), Object.defineProperty(t, "prototype", { writable: !1 }), a }(B); function Jt(e) { return Jt = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e }, Jt(e) } function qt(e, t) { for (var r = 0; r < t.length; r++) { var n = t[r]; n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, Xt(n.key), n) } } function Xt(e) { var t = function (e, t) { if ("object" != Jt(e) || !e) return e; var r = e[Symbol.toPrimitive]; if (void 0 !== r) { var n = r.call(e, "string"); if ("object" != Jt(n)) return n; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(e) }(e); return "symbol" == Jt(t) ? t : String(t) } function Qt(e, t) { return Qt = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) { return e.__proto__ = t, e }, Qt(e, t) } function $t(e) { return $t = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (e) { return e.__proto__ || Object.getPrototypeOf(e) }, $t(e) } const er = function (e) { !function (e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function"); e.prototype = Object.create(t && t.prototype, { constructor: { value: e, writable: !0, configurable: !0 } }), Object.defineProperty(e, "prototype", { writable: !1 }), t && Qt(e, t) }(a, e); var t, r, n, o, i = (n = a, o = function () { if ("undefined" == typeof Reflect || !Reflect.construct) return !1; if (Reflect.construct.sham) return !1; if ("function" == typeof Proxy) return !0; try { return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function () { }))), !0 } catch (e) { return !1 } }(), function () { var e, t = $t(n); if (o) { var r = $t(this).constructor; e = Reflect.construct(t, arguments, r) } else e = t.apply(this, arguments); return function (e, t) { if (t && ("object" === Jt(t) || "function" == typeof t)) return t; if (void 0 !== t) throw new TypeError("Derived constructors may only return object or undefined"); return function (e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e }(e) }(this, e) }); function a() { return function (e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, a), i.apply(this, arguments) } return t = a, (r = [{ key: "isSupported", get: function () { return this._platformBridge.isAchievementsSupported } }, { key: "isGetListSupported", get: function () { return this._platformBridge.isGetAchievementsListSupported } }, { key: "isNativePopupSupported", get: function () { return this._platformBridge.isAchievementsNativePopupSupported } }, { key: "unlock", value: function (e) { if (e) { var t = e[this._platformBridge.platformId]; if (t) return this.unlock(t) } return this._platformBridge.unlockAchievement(e) } }, { key: "getList", value: function (e) { if (e) { var t = e[this._platformBridge.platformId]; if (t) return this.getList(t) } return this._platformBridge.getAchievementsList(e) } }, { key: "showNativePopup", value: function (e) { if (e) { var t = e[this._platformBridge.platformId]; if (t) return this.showNativePopup(t) } return this._platformBridge.showAchievementsNativePopup(e) } }]) && qt(t.prototype, r), Object.defineProperty(t, "prototype", { writable: !1 }), a }(B); function tr(e) { return tr = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e }, tr(e) } function rr(e, t) { var r = Object.keys(e); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(e); t && (n = n.filter((function (t) { return Object.getOwnPropertyDescriptor(e, t).enumerable }))), r.push.apply(r, n) } return r } function nr(e) { for (var t = 1; t < arguments.length; t++) { var r = null != arguments[t] ? arguments[t] : {}; t % 2 ? rr(Object(r), !0).forEach((function (t) { ir(e, t, r[t]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(r)) : rr(Object(r)).forEach((function (t) { Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(r, t)) })) } return e } function or(e, t) { for (var r = 0; r < t.length; r++) { var n = t[r]; n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, ar(n.key), n) } } function ir(e, t, r) { return (t = ar(t)) in e ? Object.defineProperty(e, t, { value: r, enumerable: !0, configurable: !0, writable: !0 }) : e[t] = r, e } function ar(e) { var t = function (e, t) { if ("object" != tr(e) || !e) return e; var r = e[Symbol.toPrimitive]; if (void 0 !== r) { var n = r.call(e, "string"); if ("object" != tr(n)) return n; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(e) }(e); return "symbol" == tr(t) ? t : String(t) } function sr(e, t) { var r = function (e, t, r) { if (!t.has(e)) throw new TypeError("attempted to get private field on non-instance"); return t.get(e) }(e, t); return function (e, t) { return t.get ? t.get.call(e) : t.value }(e, r) } var ur = new WeakMap, cr = function () { function t(e) { var r, n, i, a = this; !function (e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, t), ir(this, "_isInitialized", !1), ir(this, "_platformSdk", null), ir(this, "_isPlayerAuthorized", !1), ir(this, "_playerId", null), ir(this, "_playerName", null), ir(this, "_playerPhotos", []), ir(this, "_visibilityState", null), ir(this, "_localStorage", null), ir(this, "_defaultStorageType", c.LOCAL_STORAGE), ir(this, "_platformStorageCachedData", null), ir(this, "_isBannerSupported", !1), ir(this, "_paymentsPurchases", []), i = { writable: !0, value: {} }, function (e, t) { if (t.has(e)) throw new TypeError("Cannot initialize the same private elements twice on an object") }(r = this, n = ur), n.set(r, i); try { this._localStorage = window.localStorage } catch (e) { } this._visibilityState = document.visibilityState, document.addEventListener("visibilitychange", (function () { a._setVisibilityState(document.visibilityState) })), window.addEventListener("blur", (function () { a._setVisibilityState(o.HIDDEN) })), window.addEventListener("focus", (function () { a._setVisibilityState(o.VISIBLE) })), e && (this._options = nr({}, e)) } var r, u; return r = t, (u = [{ key: "options", get: function () { return this._options } }, { key: "platformId", get: function () { return e.MOCK } }, { key: "platformSdk", get: function () { return this._platformSdk } }, { key: "platformLanguage", get: function () { var e = navigator.language; return "string" == typeof e ? e.substring(0, 2).toLowerCase() : "en" } }, { key: "platformPayload", get: function () { return new URL(window.location.href).searchParams.get("payload") } }, { key: "platformTld", get: function () { return null } }, { key: "isPlatformGetAllGamesSupported", get: function () { return !1 } }, { key: "isPlatformGetGameByIdSupported", get: function () { return !1 } }, { key: "visibilityState", get: function () { return this._visibilityState } }, { key: "isPlayerAuthorizationSupported", get: function () { return !1 } }, { key: "isPlayerAuthorized", get: function () { return this._isPlayerAuthorized } }, { key: "playerId", get: function () { return this._playerId } }, { key: "playerName", get: function () { return this._playerName } }, { key: "playerPhotos", get: function () { return this._playerPhotos } }, { key: "defaultStorageType", get: function () { return this._defaultStorageType } }, { key: "isBannerSupported", get: function () { return this._isBannerSupported } }, { key: "isMinimumDelayBetweenInterstitialEnabled", get: function () { return !0 } }, { key: "isInviteFriendsSupported", get: function () { return !1 } }, { key: "isJoinCommunitySupported", get: function () { return !1 } }, { key: "isShareSupported", get: function () { return !1 } }, { key: "isCreatePostSupported", get: function () { return !1 } }, { key: "isAddToHomeScreenSupported", get: function () { return !1 } }, { key: "isAddToFavoritesSupported", get: function () { return !1 } }, { key: "isRateSupported", get: function () { return !1 } }, { key: "isExternalLinksAllowed", get: function () { return !0 } }, { key: "deviceType", get: function () { if (navigator && navigator.userAgent) { var e = navigator.userAgent.toLowerCase(); if (/android|webos|iphone|ipod|blackberry|iemobile|opera mini/i.test(e)) return l.MOBILE; if (/ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP)))/.test(e)) return l.TABLET } return l.DESKTOP } }, { key: "isLeaderboardSupported", get: function () { return !1 } }, { key: "isLeaderboardNativePopupSupported", get: function () { return !1 } }, { key: "isLeaderboardMultipleBoardsSupported", get: function () { return !1 } }, { key: "isLeaderboardSetScoreSupported", get: function () { return !1 } }, { key: "isLeaderboardGetScoreSupported", get: function () { return !1 } }, { key: "isLeaderboardGetEntriesSupported", get: function () { return !1 } }, { key: "isPaymentsSupported", get: function () { return !1 } }, { key: "isRemoteConfigSupported", get: function () { return !1 } }, { key: "isClipboardSupported", get: function () { return !0 } }, { key: "isAchievementsSupported", get: function () { return !1 } }, { key: "isGetAchievementsListSupported", get: function () { return !1 } }, { key: "isAchievementsNativePopupSupported", get: function () { return !1 } }, { key: "initialize", value: function () { return Promise.resolve() } }, { key: "sendMessage", value: function () { return Promise.resolve() } }, { key: "getServerTime", value: function () { return new Promise((function (e, t) { fetch("https://worldtimeapi.org/api/timezone/Etc/UTC").then((function (e) { if (!e.ok) throw new Error("Network response was not ok"); return e.json() })).then((function (t) { e(1e3 * t.unixtime) })).catch((function () { t() })) })) } }, { key: "getAllGames", value: function () { return Promise.reject() } }, { key: "getGameById", value: function () { return Promise.reject() } }, { key: "authorizePlayer", value: function () { return Promise.reject() } }, { key: "isStorageSupported", value: function (e) { switch (e) { case c.LOCAL_STORAGE: return null !== this._localStorage; case c.PLATFORM_INTERNAL: default: return !1 } } }, { key: "isStorageAvailable", value: function (e) { switch (e) { case c.LOCAL_STORAGE: return null !== this._localStorage; case c.PLATFORM_INTERNAL: default: return !1 } } }, { key: "getDataFromStorage", value: function (e, t, r) { if (t === c.LOCAL_STORAGE) { if (this._localStorage) { if (Array.isArray(e)) { for (var n = [], o = 0; o < e.length; o++)n.push(this._getDataFromLocalStorage(e[o], r)); return Promise.resolve(n) } var i = this._getDataFromLocalStorage(e, r); return Promise.resolve(i) } return Promise.reject(h) } return Promise.reject(h) } }, { key: "setDataToStorage", value: function (e, t, r) { if (r === c.LOCAL_STORAGE) { if (this._localStorage) { if (Array.isArray(e)) { for (var n = 0; n < e.length; n++)this._setDataToLocalStorage(e[n], t[n]); return Promise.resolve() } return this._setDataToLocalStorage(e, t), Promise.resolve() } return Promise.reject(h) } return Promise.reject(h) } }, { key: "deleteDataFromStorage", value: function (e, t) { if (t === c.LOCAL_STORAGE) { if (this._localStorage) { if (Array.isArray(e)) { for (var r = 0; r < e.length; r++)this._deleteDataFromLocalStorage(e[r]); return Promise.resolve() } return this._deleteDataFromLocalStorage(e), Promise.resolve() } return Promise.reject(h) } return Promise.reject(h) } }, { key: "showBanner", value: function () { this._setBannerState(s.FAILED) } }, { key: "hideBanner", value: function () { this._setBannerState(s.HIDDEN) } }, { key: "preloadInterstitial", value: function () { } }, { key: "showInterstitial", value: function () { this._setInterstitialState(i.FAILED) } }, { key: "preloadRewarded", value: function () { } }, { key: "showRewarded", value: function () { this._setRewardedState(a.FAILED) } }, { key: "checkAdBlock", value: function () { var e = document.createElement("div"); e.className = "textads banner-ads banner_ads ad-unit ad-zone ad-space adsbox", e.style.position = "absolute", e.style.left = "-9999px", e.style.width = "1px", e.style.height = "1px", document.body.appendChild(e); var t = { method: "HEAD", mode: "no-cors" }; return new Promise((function (r) { fetch("https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js", t).then((function (t) { t.redirected ? r(t.redirected) : window.setTimeout((function () { var t, n = 0 === e.offsetHeight || "none" === (null === (t = window.getComputedStyle(e)) || void 0 === t ? void 0 : t.display); r(n), e.remove() }), 100) })).catch((function () { r(!0) })) })) } }, { key: "inviteFriends", value: function () { return Promise.reject() } }, { key: "joinCommunity", value: function () { return Promise.reject() } }, { key: "share", value: function () { return Promise.reject() } }, { key: "createPost", value: function () { return Promise.reject() } }, { key: "addToHomeScreen", value: function () { return Promise.reject() } }, { key: "addToFavorites", value: function () { return Promise.reject() } }, { key: "rate", value: function () { return Promise.reject() } }, { key: "setLeaderboardScore", value: function () { return Promise.reject() } }, { key: "getLeaderboardScore", value: function () { return Promise.reject() } }, { key: "getLeaderboardEntries", value: function () { return Promise.reject() } }, { key: "showLeaderboardNativePopup", value: function () { return Promise.reject() } }, { key: "paymentsPurchase", value: function (e) { if (this.isPaymentsSupported) { var t = { id: e }; return this._paymentsPurchases.push(t), Promise.resolve(t) } return Promise.reject() } }, { key: "paymentsConsumePurchase", value: function (e) { if (this.isPaymentsSupported) { var t = this._paymentsPurchases.findIndex((function (t) { return t.id === e })); return t < 0 ? Promise.reject() : (this._paymentsPurchases.splice(t, 1), Promise.resolve({ id: e })) } return Promise.reject() } }, { key: "paymentsGetCatalog", value: function () { return this.isPaymentsSupported ? Promise.resolve(this._paymentsGetProductsPlatformData()) : Promise.reject() } }, { key: "paymentsGetPurchases", value: function () { return this.isPaymentsSupported ? Promise.resolve(this._paymentsPurchases) : Promise.reject() } }, { key: "getRemoteConfig", value: function () { return Promise.reject() } }, { key: "clipboardRead", value: function () { return window.navigator && window.navigator.clipboard ? window.navigator.clipboard.readText() : Promise.reject() } }, { key: "clipboardWrite", value: function (e) { return window.navigator && window.navigator.clipboard ? window.navigator.clipboard.writeText(e) : Promise.reject() } }, { key: "unlockAchievement", value: function () { return Promise.reject() } }, { key: "getAchievementsList", value: function () { return Promise.reject() } }, { key: "showAchievementsNativePopup", value: function () { return Promise.reject() } }, { key: "_getDataFromLocalStorage", value: function (e, t) { var r = this._localStorage.getItem(e); if (t && "string" == typeof r) try { r = JSON.parse(r) } catch (e) { } return r } }, { key: "_setDataToLocalStorage", value: function (e, t) { this._localStorage.setItem(e, "object" === tr(t) ? JSON.stringify(t) : t) } }, { key: "_deleteDataFromLocalStorage", value: function (e) { this._localStorage.removeItem(e) } }, { key: "_setVisibilityState", value: function (e) { this._visibilityState !== e && (this._visibilityState = e, this.emit(n.VISIBILITY_STATE_CHANGED, this._visibilityState)) } }, { key: "_setBannerState", value: function (e) { this.emit(n.BANNER_STATE_CHANGED, e) } }, { key: "_setInterstitialState", value: function (e) { this.emit(n.INTERSTITIAL_STATE_CHANGED, e) } }, { key: "_setRewardedState", value: function (e) { this.emit(n.REWARDED_STATE_CHANGED, e) } }, { key: "_createPromiseDecorator", value: function (e) { var t = new T; return sr(this, ur)[e] = t, t } }, { key: "_getPromiseDecorator", value: function (e) { return sr(this, ur)[e] } }, { key: "_resolvePromiseDecorator", value: function (e, t) { sr(this, ur)[e] && (sr(this, ur)[e].resolve(t), delete sr(this, ur)[e]) } }, { key: "_rejectPromiseDecorator", value: function (e, t) { sr(this, ur)[e] && (sr(this, ur)[e].reject(t), delete sr(this, ur)[e]) } }, { key: "_paymentsGetProductsPlatformData", value: function () { var e = this; return this._options.payments ? this._options.payments.map((function (t) { return nr({ id: t.id }, t[e.platformId]) })) : [] } }, { key: "_paymentsGetProductPlatformData", value: function (e) { var t = this._options.payments; if (!t) return null; var r = t.find((function (t) { return t.id === e })); return r ? nr({ id: r.id }, r[this.platformId]) : null } }, { key: "_paymentsGenerateTransactionId", value: function (e) { return "".concat(e, "_").concat(Date.now(), "_").concat(Math.random().toString(36).substring(2, 10)) } }]) && or(r.prototype, u), Object.defineProperty(r, "prototype", { writable: !1 }), t }(); $().mixin(cr.prototype); const lr = cr; var fr = function (e) { return new Promise((function (t) { var r = document.createElement("script"); r.src = e, r.addEventListener("load", t), document.head.appendChild(r) })) }; function pr(e) { var t = document.createElement("div"); return t.id = u, t.style.position = "absolute", document.body.appendChild(t), "top" === e ? (t.style.top = "0px", t.style.height = "90px", t.style.width = "100%") : (t.style.bottom = "0px", t.style.height = "90px", t.style.width = "100%"), t } var dr = function () { for (var e = arguments.length, t = new Array(e), r = 0; r < e; r++)t[r] = arguments[r]; return t.length <= 0 ? Promise.resolve() : new Promise((function (e) { var r = setInterval((function () { for (var n = window, o = 0; o < t.length; o++) { var i = n[t[o]]; if (!i) return; n = i } e(), clearInterval(r) }), 100) })) }, hr = function (e) { return /^data:image\/(png|jpeg|jpg|gif|bmp|webp|svg\+xml);base64,[A-Za-z0-9+/]+={0,2}$/.test(e) }, yr = function (e, t) { return void 0 === e[t] ? null : e[t] }; function mr(e, t) { var r = arguments.length > 2 && void 0 !== arguments[2] && arguments[2]; return Array.isArray(e) ? e.reduce((function (e, n, o) { if (e[o] = yr(t, n), r) try { e[o] = JSON.parse(e[o]) } catch (e) { console.error(e) } return e }), new Array(e.length)) : yr(t, e) } function vr(e) { return vr = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e }, vr(e) } function _r(e, t) { for (var r = 0; r < t.length; r++) { var n = t[r]; n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, gr(n.key), n) } } function gr(e) { var t = function (e, t) { if ("object" != vr(e) || !e) return e; var r = e[Symbol.toPrimitive]; if (void 0 !== r) { var n = r.call(e, "string"); if ("object" != vr(n)) return n; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(e) }(e); return "symbol" == vr(t) ? t : String(t) } function Sr() { return Sr = "undefined" != typeof Reflect && Reflect.get ? Reflect.get.bind() : function (e, t, r) { var n = function (e, t) { for (; !Object.prototype.hasOwnProperty.call(e, t) && null !== (e = Er(e));); return e }(e, t); if (n) { var o = Object.getOwnPropertyDescriptor(n, t); return o.get ? o.get.call(arguments.length < 3 ? e : r) : o.value } }, Sr.apply(this, arguments) } function br(e, t) { return br = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) { return e.__proto__ = t, e }, br(e, t) } function Pr(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e } function Er(e) { return Er = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (e) { return e.__proto__ || Object.getPrototypeOf(e) }, Er(e) } function Ar(e, t) { if (t.has(e)) throw new TypeError("Cannot initialize the same private elements twice on an object") } function wr(e, t, r) { if (!t.has(e)) throw new TypeError("attempted to get private field on non-instance"); return r } function Or(e, t) { return function (e, t) { return t.get ? t.get.call(e) : t.value }(e, Dr(e, t, "get")) } function Dr(e, t, r) { if (!t.has(e)) throw new TypeError("attempted to " + r + " private field on non-instance"); return t.get(e) } var kr = new WeakMap, Rr = new WeakSet; function Ir(e, t) { var r = this, n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {}, o = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : "result", i = this._getPromiseDecorator(e); return i || (i = this._createPromiseDecorator(e), this._platformSdk.send(t, n).then((function (t) { t[o] ? r._resolvePromiseDecorator(e) : r._rejectPromiseDecorator(e) })).catch((function (t) { r._rejectPromiseDecorator(e, t) }))), i.promise } const Tr = function (t) { !function (e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function"); e.prototype = Object.create(t && t.prototype, { constructor: { value: e, writable: !0, configurable: !0 } }), Object.defineProperty(e, "prototype", { writable: !1 }), t && br(e, t) }(d, t); var r, n, o, u, f = (o = d, u = function () { if ("undefined" == typeof Reflect || !Reflect.construct) return !1; if (Reflect.construct.sham) return !1; if ("function" == typeof Proxy) return !0; try { return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function () { }))), !0 } catch (e) { return !1 } }(), function () { var e, t = Er(o); if (u) { var r = Er(this).constructor; e = Reflect.construct(t, arguments, r) } else e = t.apply(this, arguments); return function (e, t) { if (t && ("object" === vr(t) || "function" == typeof t)) return t; if (void 0 !== t) throw new TypeError("Derived constructors may only return object or undefined"); return Pr(e) }(this, e) }); function d() { var e, t, r; !function (e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, d); for (var n = arguments.length, o = new Array(n), i = 0; i < n; i++)o[i] = arguments[i]; return Ar(t = Pr(e = f.call.apply(f, [this].concat(o))), r = Rr), r.add(t), function (e, t, r) { Ar(e, t), t.set(e, { writable: !0, value: void 0 }) }(Pr(e), kr), e } return r = d, (n = [{ key: "platformId", get: function () { return e.VK } }, { key: "platformLanguage", get: function () { var e = new URL(window.location.href); if (e.searchParams.has("language")) { var t = e.searchParams.get("language"), r = 0; try { r = parseInt(t, 10) } catch (e) { r = 0 } switch (r) { case 0: default: return "ru"; case 1: return "uk"; case 2: return "be"; case 3: return "en" } } return Sr(Er(d.prototype), "platformLanguage", this) } }, { key: "platformPayload", get: function () { var e = new URL(window.location.href); return e.searchParams.has("hash") ? e.searchParams.get("hash") : Sr(Er(d.prototype), "platformPayload", this) } }, { key: "deviceType", get: function () { switch (Or(this, kr)) { case "html5_ios": case "html5_android": case "html5_mobile": return l.MOBILE; case "web": return l.DESKTOP; default: return Sr(Er(d.prototype), "deviceType", this) } } }, { key: "isPlayerAuthorizationSupported", get: function () { return !0 } }, { key: "isPlayerAuthorized", get: function () { return !0 } }, { key: "isInviteFriendsSupported", get: function () { return !0 } }, { key: "isJoinCommunitySupported", get: function () { return !0 } }, { key: "isShareSupported", get: function () { return !0 } }, { key: "isAddToHomeScreenSupported", get: function () { return "html5_android" === Or(this, kr) } }, { key: "isAddToFavoritesSupported", get: function () { return !0 } }, { key: "isLeaderboardSupported", get: function () { return this.deviceType === l.MOBILE } }, { key: "isLeaderboardNativePopupSupported", get: function () { return this.deviceType === l.MOBILE } }, { key: "initialize", value: function () { var e = this; if (this._isInitialized) return Promise.resolve(); var t, r, n, o = this._getPromiseDecorator(p.INITIALIZE); if (!o) { o = this._createPromiseDecorator(p.INITIALIZE); var i = new URL(window.location.href); i.searchParams.has("platform") && (t = this, r = kr, n = i.searchParams.get("platform"), function (e, t, r) { if (t.set) t.set.call(e, r); else { if (!t.writable) throw new TypeError("attempted to set read only private field"); t.value = r } }(t, Dr(t, r, "set"), n)), fr("https://unpkg.com/@vkontakte/vk-bridge/dist/browser.min.js").then((function () { dr("vkBridge").then((function () { e._platformSdk = window.vkBridge, e._platformSdk.send("VKWebAppInit").then((function () { e._isBannerSupported = !0, e._platformSdk.send("VKWebAppGetUserInfo").then((function (t) { t && (e._playerId = t.id, e._playerName = "".concat(t.first_name, " ").concat(t.last_name), t.photo_100 && e._playerPhotos.push(t.photo_100), t.photo_200 && e._playerPhotos.push(t.photo_200), t.photo_max_orig && e._playerPhotos.push(t.photo_max_orig)) })).finally((function () { e._isInitialized = !0, e._defaultStorageType = c.PLATFORM_INTERNAL, e._resolvePromiseDecorator(p.INITIALIZE) })) })) })) })) } return o.promise } }, { key: "authorizePlayer", value: function () { return Promise.resolve() } }, { key: "isStorageSupported", value: function (e) { return e === c.PLATFORM_INTERNAL || Sr(Er(d.prototype), "isStorageSupported", this).call(this, e) } }, { key: "isStorageAvailable", value: function (e) { return e === c.PLATFORM_INTERNAL || Sr(Er(d.prototype), "isStorageAvailable", this).call(this, e) } }, { key: "getDataFromStorage", value: function (e, t, r) { var n = this; return t === c.PLATFORM_INTERNAL ? new Promise((function (t, o) { var i = Array.isArray(e) ? e : [e]; n._platformSdk.send("VKWebAppStorageGet", { keys: i }).then((function (n) { if (Array.isArray(e)) { var o = []; return i.forEach((function (e) { var t = n.keys.findIndex((function (t) { return t.key === e })); if (t < 0) o.push(null); else if ("" !== n.keys[t].value) { var i = n.keys[t].value; if (r) try { i = JSON.parse(n.keys[t].value) } catch (e) { } o.push(i) } else o.push(null) })), void t(o) } if ("" !== n.keys[0].value) { var a = n.keys[0].value; if (r) try { a = JSON.parse(n.keys[0].value) } catch (e) { } t(a) } else t(null) })).catch((function (e) { e && e.error_data && e.error_data.error_reason ? o(e.error_data.error_reason) : o() })) })) : Sr(Er(d.prototype), "getDataFromStorage", this).call(this, e, t, r) } }, { key: "setDataToStorage", value: function (e, t, r) { var n = this; if (r === c.PLATFORM_INTERNAL) { if (Array.isArray(e)) { for (var o = [], i = 0; i < e.length; i++) { var a = { key: e[i], value: t[i] }; "string" != typeof t[i] && (a.value = JSON.stringify(t[i])), o.push(this._platformSdk.send("VKWebAppStorageSet", a)) } return Promise.all(o) } var s = { key: e, value: t }; return "string" != typeof t && (s.value = JSON.stringify(t)), new Promise((function (e, t) { n._platformSdk.send("VKWebAppStorageSet", s).then((function () { e() })).catch((function (e) { e && e.error_data && e.error_data.error_reason ? t(e.error_data.error_reason) : t() })) })) } return Sr(Er(d.prototype), "setDataToStorage", this).call(this, e, t, r) } }, { key: "deleteDataFromStorage", value: function (e, t) { if (t === c.PLATFORM_INTERNAL) { if (Array.isArray(e)) { for (var r = [], n = 0; n < e.length; n++)r.push(this.setDataToStorage(e[n], "", t)); return Promise.all(r) } return this.setDataToStorage(e, "", t) } return Sr(Er(d.prototype), "deleteDataFromStorage", this).call(this, e, t) } }, { key: "showBanner", value: function (e) { var t = this; this._platformSdk.send("VKWebAppShowBannerAd", { banner_location: e }).then((function (e) { e.result ? t._setBannerState(s.SHOWN) : t._setBannerState(s.FAILED) })).catch((function () { t._setBannerState(s.FAILED) })) } }, { key: "hideBanner", value: function () { var e = this; this._platformSdk.send("VKWebAppHideBannerAd").then((function (t) { t.result && e._setBannerState(s.HIDDEN) })) } }, { key: "showInterstitial", value: function () { var e = this; this._platformSdk.send("VKWebAppCheckNativeAds", { ad_format: "interstitial" }).then((function (t) { t.result && e._setInterstitialState(i.OPENED) })).finally((function () { e._platformSdk.send("VKWebAppShowNativeAds", { ad_format: "interstitial" }).then((function (t) { e._setInterstitialState(t.result ? i.CLOSED : i.FAILED) })).catch((function () { e._setInterstitialState(i.FAILED) })) })) } }, { key: "showRewarded", value: function () { var e = this; this._platformSdk.send("VKWebAppCheckNativeAds", { ad_format: "reward", use_waterfall: !0 }).then((function (t) { t.result && e._setRewardedState(a.OPENED) })).finally((function () { e._platformSdk.send("VKWebAppShowNativeAds", { ad_format: "reward", use_waterfall: !0 }).then((function (t) { t.result ? (e._setRewardedState(a.REWARDED), e._setRewardedState(a.CLOSED)) : e._setRewardedState(a.FAILED) })).catch((function () { e._setRewardedState(a.FAILED) })) })) } }, { key: "inviteFriends", value: function () { return wr(this, Rr, Ir).call(this, p.INVITE_FRIENDS, "VKWebAppShowInviteBox", {}, "success") } }, { key: "joinCommunity", value: function (e) { if (!e || !e.groupId) return Promise.reject(); var t = e.groupId; return "string" == typeof t && (t = parseInt(t, 10), Number.isNaN(t)) ? Promise.reject() : wr(this, Rr, Ir).call(this, p.JOIN_COMMUNITY, "VKWebAppJoinGroup", { group_id: t }).then((function () { window.open("https://vk.com/public".concat(t)) })) } }, { key: "share", value: function (e) { var t = {}; return e && e.link && (t.link = e.link), wr(this, Rr, Ir).call(this, p.SHARE, "VKWebAppShare", t, "type") } }, { key: "addToHomeScreen", value: function () { return this.isAddToHomeScreenSupported ? wr(this, Rr, Ir).call(this, p.ADD_TO_HOME_SCREEN, "VKWebAppAddToHomeScreen") : Promise.reject() } }, { key: "addToFavorites", value: function () { return wr(this, Rr, Ir).call(this, p.ADD_TO_FAVORITES, "VKWebAppAddToFavorites") } }, { key: "showLeaderboardNativePopup", value: function (e) { if (!this.isLeaderboardNativePopupSupported) return Promise.reject(); if (!e || !e.userResult) return Promise.reject(); var t = { user_result: e.userResult }; return "boolean" == typeof e.global && (t.global = e.global ? 1 : 0), wr(this, Rr, Ir).call(this, p.SHOW_LEADERBOARD_NATIVE_POPUP, "VKWebAppShowLeaderBoardBox", t) } }, { key: "clipboardWrite", value: function (e) { return wr(this, Rr, Ir).call(this, p.CLIPBOARD_WRITE, "VKWebAppCopyText", { text: e }) } }]) && _r(r.prototype, n), Object.defineProperty(r, "prototype", { writable: !1 }), d }(lr); function Lr(e) { return Lr = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e }, Lr(e) } function jr(e, t) { var r = Object.keys(e); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(e); t && (n = n.filter((function (t) { return Object.getOwnPropertyDescriptor(e, t).enumerable }))), r.push.apply(r, n) } return r } function Nr(e) { for (var t = 1; t < arguments.length; t++) { var r = null != arguments[t] ? arguments[t] : {}; t % 2 ? jr(Object(r), !0).forEach((function (t) { var n, o, i; n = e, o = t, i = r[t], (o = Br(o)) in n ? Object.defineProperty(n, o, { value: i, enumerable: !0, configurable: !0, writable: !0 }) : n[o] = i })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(r)) : jr(Object(r)).forEach((function (t) { Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(r, t)) })) } return e } function Cr(e, t) { for (var r = 0; r < t.length; r++) { var n = t[r]; n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, Br(n.key), n) } } function Br(e) { var t = function (e, t) { if ("object" != Lr(e) || !e) return e; var r = e[Symbol.toPrimitive]; if (void 0 !== r) { var n = r.call(e, "string"); if ("object" != Lr(n)) return n; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(e) }(e); return "symbol" == Lr(t) ? t : String(t) } function Gr() { return Gr = "undefined" != typeof Reflect && Reflect.get ? Reflect.get.bind() : function (e, t, r) { var n = function (e, t) { for (; !Object.prototype.hasOwnProperty.call(e, t) && null !== (e = Ur(e));); return e }(e, t); if (n) { var o = Object.getOwnPropertyDescriptor(n, t); return o.get ? o.get.call(arguments.length < 3 ? e : r) : o.value } }, Gr.apply(this, arguments) } function Mr(e, t) { return Mr = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) { return e.__proto__ = t, e }, Mr(e, t) } function Fr(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e } function Ur(e) { return Ur = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (e) { return e.__proto__ || Object.getPrototypeOf(e) }, Ur(e) } function Hr(e, t, r) { zr(e, t), t.set(e, r) } function zr(e, t) { if (t.has(e)) throw new TypeError("Cannot initialize the same private elements twice on an object") } function Wr(e, t, r) { if (!t.has(e)) throw new TypeError("attempted to get private field on non-instance"); return r } function xr(e, t, r) { return function (e, t, r) { if (t.set) t.set.call(e, r); else { if (!t.writable) throw new TypeError("attempted to set read only private field"); t.value = r } }(e, Yr(e, t, "set"), r), r } function Vr(e, t) { return function (e, t) { return t.get ? t.get.call(e) : t.value }(e, Yr(e, t, "get")) } function Yr(e, t, r) { if (!t.has(e)) throw new TypeError("attempted to " + r + " private field on non-instance"); return t.get(e) } var Zr = new WeakMap, Kr = new WeakMap, Jr = new WeakMap, qr = new WeakMap, Xr = new WeakMap, Qr = new WeakSet; function $r(e) { var t = this; return new Promise((function (r) { var n = { scopes: !1 }; e && "boolean" == typeof e.scopes && (n.scopes = e.scopes), t._platformSdk.getPlayer(n).then((function (e) { t._playerId = e.getUniqueID(), t._isPlayerAuthorized = "lite" !== e.getMode(), t._defaultStorageType = t._isPlayerAuthorized ? c.PLATFORM_INTERNAL : c.LOCAL_STORAGE; var r = e.getName(); "" !== r && (t._playerName = r), t._playerPhotos = []; var n = e.getPhoto("small"), o = e.getPhoto("medium"), i = e.getPhoto("large"); return n && t._playerPhotos.push(n), o && t._playerPhotos.push(o), i && t._playerPhotos.push(i), xr(t, Kr, e), e.getData() })).then((function (e) { t._platformStorageCachedData = e })).finally((function () { r() })) })) } const en = function (t) { !function (e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function"); e.prototype = Object.create(t && t.prototype, { constructor: { value: e, writable: !0, configurable: !0 } }), Object.defineProperty(e, "prototype", { writable: !1 }), t && Mr(e, t) }(h, t); var r, n, o, u, d = (o = h, u = function () { if ("undefined" == typeof Reflect || !Reflect.construct) return !1; if (Reflect.construct.sham) return !1; if ("function" == typeof Proxy) return !0; try { return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function () { }))), !0 } catch (e) { return !1 } }(), function () { var e, t = Ur(o); if (u) { var r = Ur(this).constructor; e = Reflect.construct(t, arguments, r) } else e = t.apply(this, arguments); return function (e, t) { if (t && ("object" === Lr(t) || "function" == typeof t)) return t; if (void 0 !== t) throw new TypeError("Derived constructors may only return object or undefined"); return Fr(e) }(this, e) }); function h() { var e, t, r; !function (e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, h); for (var n = arguments.length, o = new Array(n), i = 0; i < n; i++)o[i] = arguments[i]; return zr(t = Fr(e = d.call.apply(d, [this].concat(o))), r = Qr), r.add(t), Hr(Fr(e), Zr, { writable: !0, value: !1 }), Hr(Fr(e), Kr, { writable: !0, value: null }), Hr(Fr(e), Jr, { writable: !0, value: null }), Hr(Fr(e), qr, { writable: !0, value: null }), Hr(Fr(e), Xr, { writable: !0, value: null }), e } return r = h, (n = [{ key: "platformId", get: function () { return e.YANDEX } }, { key: "platformLanguage", get: function () { return this._platformSdk ? this._platformSdk.environment.i18n.lang.toLowerCase() : Gr(Ur(h.prototype), "platformLanguage", this) } }, { key: "platformTld", get: function () { return this._platformSdk ? this._platformSdk.environment.i18n.tld.toLowerCase() : Gr(Ur(h.prototype), "platformTld", this) } }, { key: "isPlatformGetAllGamesSupported", get: function () { return !0 } }, { key: "isPlatformGetGameByIdSupported", get: function () { return !0 } }, { key: "deviceType", get: function () { switch (this._platformSdk && this._platformSdk.deviceInfo.type) { case l.DESKTOP: return l.DESKTOP; case l.MOBILE: return l.MOBILE; case l.TABLET: return l.TABLET; case l.TV: return l.TV; default: return Gr(Ur(h.prototype), "deviceType", this) } } }, { key: "isPlayerAuthorizationSupported", get: function () { return !0 } }, { key: "isAddToHomeScreenSupported", get: function () { return Vr(this, Zr) } }, { key: "isRateSupported", get: function () { return !0 } }, { key: "isExternalLinksAllowed", get: function () { return !1 } }, { key: "isLeaderboardSupported", get: function () { return !0 } }, { key: "isLeaderboardMultipleBoardsSupported", get: function () { return !0 } }, { key: "isLeaderboardSetScoreSupported", get: function () { return !0 } }, { key: "isLeaderboardGetScoreSupported", get: function () { return !0 } }, { key: "isLeaderboardGetEntriesSupported", get: function () { return !0 } }, { key: "isPaymentsSupported", get: function () { return !0 } }, { key: "isRemoteConfigSupported", get: function () { return !0 } }, { key: "initialize", value: function () { var e = this; if (this._isInitialized) return Promise.resolve(); var t = this._getPromiseDecorator(p.INITIALIZE); return t || (t = this._createPromiseDecorator(p.INITIALIZE), fr("/sdk.js").then((function () { dr("YaGames", "init").then((function () { window.YaGames.init().then((function (t) { var r; e._platformSdk = t, xr(e, Xr, Wr(e, Qr, $r).call(e)); var n = null === (r = e._platformSdk.features.PluginEngineDataReporterAPI) || void 0 === r ? void 0 : r.report({ engineName: "", engineVersion: "", pluginName: "playgama-bridge", pluginVersion: "1.22.0" }), o = e._platformSdk.shortcut.canShowPrompt().then((function (t) { xr(e, Zr, t.canShow) })), i = new Promise((function (e) { setTimeout(e, 1e3) })), a = Promise.race([o, i]), u = e._platformSdk.getLeaderboards().then((function (t) { xr(e, Jr, t) })), c = e._platformSdk.getPayments().then((function (t) { xr(e, qr, t) })); e._isBannerSupported = !0; var l = e._platformSdk.adv.getBannerAdvStatus().then((function (t) { t.stickyAdvIsShowing && e._setBannerState(s.SHOWN) })); Promise.all([n, a, u, c, l]).finally((function () { e._isInitialized = !0, e._resolvePromiseDecorator(p.INITIALIZE) })) })) })) }))), t.promise } }, { key: "sendMessage", value: function (e) { switch (e) { case f.GAME_READY: var t; return null === (t = this._platformSdk.features.LoadingAPI) || void 0 === t || t.ready(), Promise.resolve(); case f.GAMEPLAY_STARTED: var r; return null === (r = this._platformSdk.features.GameplayAPI) || void 0 === r || r.start(), Promise.resolve(); case f.GAMEPLAY_STOPPED: var n; return null === (n = this._platformSdk.features.GameplayAPI) || void 0 === n || n.stop(), Promise.resolve(); default: return Gr(Ur(h.prototype), "sendMessage", this).call(this, e) } } }, { key: "getServerTime", value: function () { var e = this; return new Promise((function (t) { t(e._platformSdk.serverTime()) })) } }, { key: "getAllGames", value: function () { var e = this; return new Promise((function (t, r) { e._platformSdk.features.GamesAPI.getAllGames().then((function (e) { var r = e.games; t(r) })).catch(r) })) } }, { key: "getGameById", value: function (e) { var t = this; return null != e && e.gameId ? new Promise((function (r, n) { t._platformSdk.features.GamesAPI.getGameByID(null == e ? void 0 : e.gameId).then((function (e) { var t = e.game, n = e.isAvailable; r(Nr(Nr({}, t), {}, { isAvailable: n })) })).catch(n) })) : Promise.reject(new Error("Provide gameId")) } }, { key: "authorizePlayer", value: function (e) { var t = this, r = this._getPromiseDecorator(p.AUTHORIZE_PLAYER); return r || (r = this._createPromiseDecorator(p.AUTHORIZE_PLAYER), this._isPlayerAuthorized ? (xr(this, Xr, Wr(this, Qr, $r).call(this, e)), Vr(this, Xr).then((function () { t._resolvePromiseDecorator(p.AUTHORIZE_PLAYER) }))) : this._platformSdk.auth.openAuthDialog().then((function () { xr(t, Xr, Wr(t, Qr, $r).call(t, e)), Vr(t, Xr).then((function () { t._resolvePromiseDecorator(p.AUTHORIZE_PLAYER) })) })).catch((function (e) { t._rejectPromiseDecorator(p.AUTHORIZE_PLAYER, e) }))), r.promise } }, { key: "isStorageSupported", value: function (e) { return e === c.PLATFORM_INTERNAL || Gr(Ur(h.prototype), "isStorageSupported", this).call(this, e) } }, { key: "isStorageAvailable", value: function (e) { return e === c.PLATFORM_INTERNAL ? this._isPlayerAuthorized : Gr(Ur(h.prototype), "isStorageAvailable", this).call(this, e) } }, { key: "getDataFromStorage", value: function (e, t, r) { var n = this; return t === c.PLATFORM_INTERNAL ? this._isPlayerAuthorized ? Vr(this, Xr).then((function () { return new Promise((function (t) { if (Array.isArray(e)) { for (var r = [], o = 0; o < e.length; o++) { var i = void 0 === n._platformStorageCachedData[e[o]] ? null : n._platformStorageCachedData[e[o]]; r.push(i) } t(r) } else t(void 0 === n._platformStorageCachedData[e] ? null : n._platformStorageCachedData[e]) })) })) : Promise.reject() : Gr(Ur(h.prototype), "getDataFromStorage", this).call(this, e, t, r) } }, { key: "setDataToStorage", value: function (e, t, r) { var n = this; return r === c.PLATFORM_INTERNAL ? this._isPlayerAuthorized ? Vr(this, Xr).then((function () { return new Promise((function (r, o) { var i = null !== n._platformStorageCachedData ? Nr({}, n._platformStorageCachedData) : {}; if (Array.isArray(e)) for (var a = 0; a < e.length; a++)i[e[a]] = t[a]; else i[e] = t; Vr(n, Kr).setData(i).then((function () { n._platformStorageCachedData = i, r() })).catch((function (e) { o(e) })) })) })) : Promise.reject() : Gr(Ur(h.prototype), "setDataToStorage", this).call(this, e, t, r) } }, { key: "deleteDataFromStorage", value: function (e, t) { var r = this; return t === c.PLATFORM_INTERNAL ? this._isPlayerAuthorized ? Vr(this, Xr).then((function () { return new Promise((function (t, n) { var o = null !== r._platformStorageCachedData ? Nr({}, r._platformStorageCachedData) : {}; if (Array.isArray(e)) for (var i = 0; i < e.length; i++)delete o[e[i]]; else delete o[e]; Vr(r, Kr).setData(o).then((function () { r._platformStorageCachedData = o, t() })).catch((function (e) { n(e) })) })) })) : Promise.reject() : Gr(Ur(h.prototype), "deleteDataFromStorage", this).call(this, e, t) } }, { key: "showBanner", value: function () { var e = this; this._platformSdk.adv.showBannerAdv().then((function (t) { t.stickyAdvIsShowing ? e._setBannerState(s.SHOWN) : e._setBannerState(s.FAILED) })).catch((function () { e._setBannerState(s.FAILED) })) } }, { key: "hideBanner", value: function () { var e = this; this._platformSdk.adv.hideBannerAdv().then((function (t) { t.stickyAdvIsShowing || e._setBannerState(s.HIDDEN) })) } }, { key: "showInterstitial", value: function () { var e = this; this._platformSdk.adv.showFullscreenAdv({ callbacks: { onOpen: function () { e._setInterstitialState(i.OPENED) }, onClose: function (t) { t ? e._setInterstitialState(i.CLOSED) : e._setInterstitialState(i.FAILED) }, onError: function (e) { console.error(e) } } }) } }, { key: "showRewarded", value: function () { var e = this; this._platformSdk.adv.showRewardedVideo({ callbacks: { onOpen: function () { e._setRewardedState(a.OPENED) }, onRewarded: function () { e._setRewardedState(a.REWARDED) }, onClose: function () { e._setRewardedState(a.CLOSED) }, onError: function () { e._setRewardedState(a.FAILED) } } }) } }, { key: "checkAdBlock", value: function () { return new Promise((function (e) { e(!1) })) } }, { key: "addToHomeScreen", value: function () { var e = this; if (!this.isAddToHomeScreenSupported) return Promise.reject(); var t = this._getPromiseDecorator(p.ADD_TO_HOME_SCREEN); return t || (t = this._createPromiseDecorator(p.ADD_TO_HOME_SCREEN), this._platformSdk.shortcut.showPrompt().then((function (t) { "accepted" !== t.outcome ? e._rejectPromiseDecorator(p.ADD_TO_HOME_SCREEN) : e._resolvePromiseDecorator(p.ADD_TO_HOME_SCREEN) })).catch((function (t) { e._rejectPromiseDecorator(p.ADD_TO_HOME_SCREEN, t) }))), t.promise } }, { key: "rate", value: function () { var e = this, t = this._getPromiseDecorator(p.RATE); return t || (t = this._createPromiseDecorator(p.RATE), this._platformSdk.feedback.canReview().then((function (t) { t.value ? e._platformSdk.feedback.requestReview().then((function (t) { t.feedbackSent ? e._resolvePromiseDecorator(p.RATE) : e._rejectPromiseDecorator(p.RATE) })).catch((function (t) { e._rejectPromiseDecorator(p.RATE, t) })) : e._rejectPromiseDecorator(p.RATE, t.reason) })).catch((function (t) { e._rejectPromiseDecorator(p.RATE, t) }))), t.promise } }, { key: "setLeaderboardScore", value: function (e) { var t = this; if (!this._isPlayerAuthorized) return Promise.reject(); if (!(Vr(this, Jr) && e && e.score && e.leaderboardName)) return Promise.reject(); var r = this._getPromiseDecorator(p.SET_LEADERBOARD_SCORE); return r || (r = this._createPromiseDecorator(p.SET_LEADERBOARD_SCORE), Vr(this, Jr).setLeaderboardScore(e.leaderboardName, "string" == typeof e.score ? parseInt(e.score, 10) : e.score).then((function () { t._resolvePromiseDecorator(p.SET_LEADERBOARD_SCORE) })).catch((function (e) { t._rejectPromiseDecorator(p.SET_LEADERBOARD_SCORE, e) }))), r.promise } }, { key: "getLeaderboardScore", value: function (e) { var t = this; if (!this._isPlayerAuthorized) return Promise.reject(); if (!Vr(this, Jr) || !e || !e.leaderboardName) return Promise.reject(); var r = this._getPromiseDecorator(p.GET_LEADERBOARD_SCORE); return r || (r = this._createPromiseDecorator(p.GET_LEADERBOARD_SCORE), Vr(this, Jr).getLeaderboardPlayerEntry(e.leaderboardName).then((function (e) { t._resolvePromiseDecorator(p.GET_LEADERBOARD_SCORE, e.score) })).catch((function (e) { t._rejectPromiseDecorator(p.GET_LEADERBOARD_SCORE, e) }))), r.promise } }, { key: "getLeaderboardEntries", value: function (e) { var t = this; if (!Vr(this, Jr) || !e || !e.leaderboardName) return Promise.reject(); var r = this._getPromiseDecorator(p.GET_LEADERBOARD_ENTRIES); if (!r) { r = this._createPromiseDecorator(p.GET_LEADERBOARD_ENTRIES); var n = {}; n.includeUser = "boolean" == typeof e.includeUser && e.includeUser, n.quantityAround = "string" == typeof e.quantityAround ? parseInt(e.quantityAround, 10) : e.quantityAround, Number.isNaN(n.quantityAround) && (n.quantityAround = 5), n.quantityTop = "string" == typeof e.quantityTop ? parseInt(e.quantityTop, 10) : e.quantityTop, Number.isNaN(n.quantityTop) && (n.quantityTop = 5), Vr(this, Jr).getLeaderboardEntries(e.leaderboardName, n).then((function (e) { var r = null; e && e.entries.length > 0 && (r = e.entries.map((function (e) { return { id: e.player.uniqueID, score: e.score, rank: e.rank, name: e.player.publicName, photo: e.player.getAvatarSrc("large") } }))), t._resolvePromiseDecorator(p.GET_LEADERBOARD_ENTRIES, r) })).catch((function (e) { t._rejectPromiseDecorator(p.GET_LEADERBOARD_ENTRIES, e) })) } return r.promise } }, { key: "paymentsPurchase", value: function (e) { var t = this; if (!Vr(this, qr)) return Promise.reject(); var r = this._paymentsGetProductPlatformData(e); r || (r = { id: e }); var n = this._getPromiseDecorator(p.PURCHASE); return n || (n = this._createPromiseDecorator(p.PURCHASE), Vr(this, qr).purchase(r).then((function (r) { var n = Nr({ id: e }, r.purchaseData); delete n.productID, t._paymentsPurchases.push(n), t._resolvePromiseDecorator(p.PURCHASE, n) })).catch((function (e) { t._rejectPromiseDecorator(p.PURCHASE, e) }))), n.promise } }, { key: "paymentsConsumePurchase", value: function (e) { var t = this; if (!Vr(this, qr)) return Promise.reject(); var r = this._paymentsPurchases.findIndex((function (t) { return t.id === e })); if (r < 0) return Promise.reject(); var n = this._getPromiseDecorator(p.CONSUME_PURCHASE); return n || (n = this._createPromiseDecorator(p.CONSUME_PURCHASE), Vr(this, qr).consumePurchase(this._paymentsPurchases[r].purchaseToken).then((function () { t._paymentsPurchases.splice(r, 1), t._resolvePromiseDecorator(p.CONSUME_PURCHASE, { id: e }) })).catch((function (e) { t._rejectPromiseDecorator(p.CONSUME_PURCHASE, e) }))), n.promise } }, { key: "paymentsGetCatalog", value: function () { var e = this; if (!Vr(this, qr)) return Promise.reject(); var t = this._paymentsGetProductsPlatformData(), r = this._getPromiseDecorator(p.GET_CATALOG); return r || (r = this._createPromiseDecorator(p.GET_CATALOG), Vr(this, qr).getCatalog().then((function (r) { var n = t.map((function (e) { var t, n = r.find((function (t) { return t.id === e.id })); return { id: e.id, title: n.title, description: n.description, imageURI: n.imageURI, price: n.price, priceCurrencyCode: n.priceCurrencyCode, priceValue: n.priceValue, priceCurrencyImage: null === (t = n.getPriceCurrencyImage) || void 0 === t ? void 0 : t.call(n, "medium") } })); e._resolvePromiseDecorator(p.GET_CATALOG, n) })).catch((function (t) { e._rejectPromiseDecorator(p.GET_CATALOG, t) }))), r.promise } }, { key: "paymentsGetPurchases", value: function () { var e = this; if (!Vr(this, qr)) return Promise.reject(); var t = this._getPromiseDecorator(p.GET_PURCHASES); return t || (t = this._createPromiseDecorator(p.GET_PURCHASES), Vr(this, qr).getPurchases().then((function (t) { var r = e._paymentsGetProductsPlatformData(); e._paymentsPurchases = t.map((function (e) { var t = Nr({ id: r.find((function (t) { return t.id === e.productID })).id }, e.purchaseData); return delete t.productID, t })), e._resolvePromiseDecorator(p.GET_PURCHASES, e._paymentsPurchases) })).catch((function (t) { e._rejectPromiseDecorator(p.GET_PURCHASES, t) }))), t.promise } }, { key: "getRemoteConfig", value: function (e) { var t = this; if (!this._platformSdk) return Promise.reject(); var r = e; r || (r = {}), r.clientFeatures || (r.clientFeatures = []); var n = this._getPromiseDecorator(p.GET_REMOTE_CONFIG); return n || (n = this._createPromiseDecorator(p.GET_REMOTE_CONFIG), this._platformSdk.getFlags(r).then((function (e) { t._resolvePromiseDecorator(p.GET_REMOTE_CONFIG, e) })).catch((function (e) { t._rejectPromiseDecorator(p.GET_REMOTE_CONFIG, e) }))), n.promise } }, { key: "clipboardWrite", value: function (e) { var t = this, r = this._getPromiseDecorator(p.CLIPBOARD_WRITE); return r || (r = this._createPromiseDecorator(p.CLIPBOARD_WRITE), this._platformSdk.clipboard.writeText(e).then((function () { t._resolvePromiseDecorator(p.CLIPBOARD_WRITE, !0) })).catch((function (e) { t._rejectPromiseDecorator(p.CLIPBOARD_WRITE, e) }))), r.promise } }]) && Cr(r.prototype, n), Object.defineProperty(r, "prototype", { writable: !1 }), h }(lr); function tn(e) { return tn = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e }, tn(e) } function rn(e, t) { for (var r = 0; r < t.length; r++) { var n = t[r]; n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, nn(n.key), n) } } function nn(e) { var t = function (e, t) { if ("object" != tn(e) || !e) return e; var r = e[Symbol.toPrimitive]; if (void 0 !== r) { var n = r.call(e, "string"); if ("object" != tn(n)) return n; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(e) }(e); return "symbol" == tn(t) ? t : String(t) } function on() { return on = "undefined" != typeof Reflect && Reflect.get ? Reflect.get.bind() : function (e, t, r) { var n = function (e, t) { for (; !Object.prototype.hasOwnProperty.call(e, t) && null !== (e = un(e));); return e }(e, t); if (n) { var o = Object.getOwnPropertyDescriptor(n, t); return o.get ? o.get.call(arguments.length < 3 ? e : r) : o.value } }, on.apply(this, arguments) } function an(e, t) { return an = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) { return e.__proto__ = t, e }, an(e, t) } function sn(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e } function un(e) { return un = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (e) { return e.__proto__ || Object.getPrototypeOf(e) }, un(e) } function cn(e, t, r) { ln(e, t), t.set(e, r) } function ln(e, t) { if (t.has(e)) throw new TypeError("Cannot initialize the same private elements twice on an object") } function fn(e, t, r) { if (!t.has(e)) throw new TypeError("attempted to get private field on non-instance"); return r } function pn(e, t, r) { return function (e, t, r) { if (t.set) t.set.call(e, r); else { if (!t.writable) throw new TypeError("attempted to set read only private field"); t.value = r } }(e, hn(e, t, "set"), r), r } function dn(e, t) { return function (e, t) { return t.get ? t.get.call(e) : t.value }(e, hn(e, t, "get")) } function hn(e, t, r) { if (!t.has(e)) throw new TypeError("attempted to " + r + " private field on non-instance"); return t.get(e) } var yn = new WeakMap, mn = new WeakMap, vn = new WeakMap, _n = new WeakSet; function gn() { var e = this; return dn(this, mn) ? new Promise((function (t, r) { e._platformSdk.user.getUser().then((function (n) { n ? (e._isPlayerAuthorized = !0, e._defaultStorageType = c.PLATFORM_INTERNAL, n.username && (e._playerName = n.username), n.profilePictureUrl && (e._playerPhotos = [n.profilePictureUrl]), t()) : r() })).catch((function (e) { r(e) })) })) : Promise.reject() } const Sn = function (t) { !function (e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function"); e.prototype = Object.create(t && t.prototype, { constructor: { value: e, writable: !0, configurable: !0 } }), Object.defineProperty(e, "prototype", { writable: !1 }), t && an(e, t) }(y, t); var r, n, o, d, h = (o = y, d = function () { if ("undefined" == typeof Reflect || !Reflect.construct) return !1; if (Reflect.construct.sham) return !1; if ("function" == typeof Proxy) return !0; try { return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function () { }))), !0 } catch (e) { return !1 } }(), function () { var e, t = un(o); if (d) { var r = un(this).constructor; e = Reflect.construct(t, arguments, r) } else e = t.apply(this, arguments); return function (e, t) { if (t && ("object" === tn(t) || "function" == typeof t)) return t; if (void 0 !== t) throw new TypeError("Derived constructors may only return object or undefined"); return sn(e) }(this, e) }); function y() { var e, t, r; !function (e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, y); for (var n = arguments.length, o = new Array(n), s = 0; s < n; s++)o[s] = arguments[s]; return ln(t = sn(e = h.call.apply(h, [this].concat(o))), r = _n), r.add(t), cn(sn(e), yn, { writable: !0, value: !1 }), cn(sn(e), mn, { writable: !0, value: !1 }), cn(sn(e), vn, { writable: !0, value: { adStarted: function () { dn(sn(e), yn) ? e._setRewardedState(a.OPENED) : e._setInterstitialState(i.OPENED) }, adFinished: function () { dn(sn(e), yn) ? (e._setRewardedState(a.REWARDED), e._setRewardedState(a.CLOSED)) : e._setInterstitialState(i.CLOSED) }, adError: function () { dn(sn(e), yn) ? e._setRewardedState(a.FAILED) : e._setInterstitialState(i.FAILED) } } }), e } return r = y, (n = [{ key: "platformId", get: function () { return e.CRAZY_GAMES } }, { key: "platformLanguage", get: function () { return dn(this, mn) ? this._platformSdk.user.systemInfo.countryCode.toLowerCase() : on(un(y.prototype), "platformLanguage", this) } }, { key: "isPlayerAuthorizationSupported", get: function () { return dn(this, mn) } }, { key: "deviceType", get: function () { if (dn(this, mn)) { var e = this._platformSdk.user.systemInfo.device.type.toLowerCase(); if ([l.DESKTOP, l.MOBILE, l.TABLET].includes(e)) return e } return on(un(y.prototype), "deviceType", this) } }, { key: "initialize", value: function () { var e = this; if (this._isInitialized) return Promise.resolve(); var t = this._getPromiseDecorator(p.INITIALIZE); return t || (t = this._createPromiseDecorator(p.INITIALIZE), fr("https://sdk.crazygames.com/crazygames-sdk-v3.js").then((function () { dr("CrazyGames", "SDK", "init").then((function () { e._platformSdk = window.CrazyGames.SDK, e._defaultStorageType = c.LOCAL_STORAGE, e._isBannerSupported = !0, e._platformSdk.init().then((function () { pn(e, mn, e._platformSdk.user.isUserAccountAvailable); var t = fn(e, _n, gn).call(e); Promise.all([t]).finally((function () { e._isInitialized = !0, e._resolvePromiseDecorator(p.INITIALIZE) })) })) })) }))), t.promise } }, { key: "authorizePlayer", value: function () { var e = this; if (!dn(this, mn)) return Promise.reject(); if (this._isPlayerAuthorized) return Promise.resolve(); var t = this._getPromiseDecorator(p.AUTHORIZE_PLAYER); return t || (t = this._createPromiseDecorator(p.AUTHORIZE_PLAYER), this._platformSdk.user.showAuthPrompt().then((function () { fn(e, _n, gn).call(e).then((function () { e._resolvePromiseDecorator(p.AUTHORIZE_PLAYER) })) })).catch((function (t) { e._rejectPromiseDecorator(p.AUTHORIZE_PLAYER, t) }))), t.promise } }, { key: "sendMessage", value: function (e) { switch (e) { case f.IN_GAME_LOADING_STARTED: return this._platformSdk.game.loadingStart(), Promise.resolve(); case f.IN_GAME_LOADING_STOPPED: return this._platformSdk.game.loadingStop(), Promise.resolve(); case f.GAMEPLAY_STARTED: return this._platformSdk.game.gameplayStart(), Promise.resolve(); case f.GAMEPLAY_STOPPED: return this._platformSdk.game.gameplayStop(), Promise.resolve(); case f.PLAYER_GOT_ACHIEVEMENT: return this._platformSdk.game.happytime(), Promise.resolve(); default: return on(un(y.prototype), "sendMessage", this).call(this, e) } } }, { key: "isStorageSupported", value: function (e) { return e === c.PLATFORM_INTERNAL || on(un(y.prototype), "isStorageSupported", this).call(this, e) } }, { key: "isStorageAvailable", value: function (e) { return e === c.PLATFORM_INTERNAL ? this._isPlayerAuthorized : on(un(y.prototype), "isStorageAvailable", this).call(this, e) } }, { key: "getDataFromStorage", value: function (e, t, r) { var n = this; return t === c.PLATFORM_INTERNAL ? new Promise((function (t) { if (Array.isArray(e)) { var o = []; return e.forEach((function (e) { var t = n._platformSdk.data.getItem(e); if (r) try { t = JSON.parse(t) } catch (e) { } o.push(t) })), void t(o) } var i = n._platformSdk.data.getItem(e); if (r) try { i = JSON.parse(i) } catch (e) { } t(i) })) : on(un(y.prototype), "getDataFromStorage", this).call(this, e, t, r) } }, { key: "setDataToStorage", value: function (e, t, r) { var n = this; return r === c.PLATFORM_INTERNAL ? new Promise((function (r) { if (Array.isArray(e)) { for (var o = 0; o < e.length; o++) { var i = t[o]; "string" != typeof t[o] && (i = JSON.stringify(t[o])), n._platformSdk.data.setItem(e[o], i) } r() } else { var a = t; "string" != typeof t && (a = JSON.stringify(t)), n._platformSdk.data.setItem(e, a), r() } })) : on(un(y.prototype), "setDataToStorage", this).call(this, e, t, r) } }, { key: "deleteDataFromStorage", value: function (e, t) { var r = this; return t === c.PLATFORM_INTERNAL ? Array.isArray(e) ? (e.forEach((function (e) { return r._platformSdk.data.removeItem(e) })), Promise.resolve()) : (this._platformSdk.data.removeItem(e), Promise.resolve()) : on(un(y.prototype), "deleteDataFromStorage", this).call(this, e, t) } }, { key: "showBanner", value: function (e) { var t = this, r = document.getElementById(u); r || (r = pr(e)), r.style.display = "block", this._platformSdk.banner.requestResponsiveBanner([u]).then((function () { t._setBannerState(s.SHOWN) })).catch((function () { t._setBannerState(s.FAILED), r.style.display = "none" })) } }, { key: "hideBanner", value: function () { var e = document.getElementById(u); e && (e.style.display = "none"), this._platformSdk.banner.clearAllBanners(), this._setBannerState(s.HIDDEN) } }, { key: "showInterstitial", value: function () { pn(this, yn, !1), this._platformSdk.ad.requestAd("midgame", dn(this, vn)) } }, { key: "showRewarded", value: function () { pn(this, yn, !0), this._platformSdk.ad.requestAd("rewarded", dn(this, vn)) } }, { key: "checkAdBlock", value: function () { var e = this; return new Promise((function (t) { e._platformSdk.ad.hasAdblock().then((function (e) { t(e) })) })) } }]) && rn(r.prototype, n), Object.defineProperty(r, "prototype", { writable: !1 }), y }(lr); function bn(e) { return bn = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e }, bn(e) } function Pn(e, t) { var r = Object.keys(e); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(e); t && (n = n.filter((function (t) { return Object.getOwnPropertyDescriptor(e, t).enumerable }))), r.push.apply(r, n) } return r } function En(e) { for (var t = 1; t < arguments.length; t++) { var r = null != arguments[t] ? arguments[t] : {}; t % 2 ? Pn(Object(r), !0).forEach((function (t) { var n, o, i; n = e, o = t, i = r[t], (o = wn(o)) in n ? Object.defineProperty(n, o, { value: i, enumerable: !0, configurable: !0, writable: !0 }) : n[o] = i })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(r)) : Pn(Object(r)).forEach((function (t) { Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(r, t)) })) } return e } function An(e, t) { for (var r = 0; r < t.length; r++) { var n = t[r]; n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, wn(n.key), n) } } function wn(e) { var t = function (e, t) { if ("object" != bn(e) || !e) return e; var r = e[Symbol.toPrimitive]; if (void 0 !== r) { var n = r.call(e, "string"); if ("object" != bn(n)) return n; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(e) }(e); return "symbol" == bn(t) ? t : String(t) } function On() { return On = "undefined" != typeof Reflect && Reflect.get ? Reflect.get.bind() : function (e, t, r) { var n = function (e, t) { for (; !Object.prototype.hasOwnProperty.call(e, t) && null !== (e = Rn(e));); return e }(e, t); if (n) { var o = Object.getOwnPropertyDescriptor(n, t); return o.get ? o.get.call(arguments.length < 3 ? e : r) : o.value } }, On.apply(this, arguments) } function Dn(e, t) { return Dn = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) { return e.__proto__ = t, e }, Dn(e, t) } function kn(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e } function Rn(e) { return Rn = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (e) { return e.__proto__ || Object.getPrototypeOf(e) }, Rn(e) } var In = new WeakSet; function Tn() { var e = this; return this._playerId = this._platformSdk.options.player_id, this._isPlayerAuthorized = "false" === this._platformSdk.options.guest, new Promise((function (t) { e._platformSdk.getUsers([e._playerId], (function (r) { if (r && 1 === r.length) { var n = r[0]; e._playerName = n.full_name, "" !== n.avatar && (e._playerPhotos = [n.avatar]) } t() })) })) } const Ln = function (t) { !function (e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function"); e.prototype = Object.create(t && t.prototype, { constructor: { value: e, writable: !0, configurable: !0 } }), Object.defineProperty(e, "prototype", { writable: !1 }), t && Dn(e, t) }(l, t); var r, n, o, s, u = (o = l, s = function () { if ("undefined" == typeof Reflect || !Reflect.construct) return !1; if (Reflect.construct.sham) return !1; if ("function" == typeof Proxy) return !0; try { return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function () { }))), !0 } catch (e) { return !1 } }(), function () { var e, t = Rn(o); if (s) { var r = Rn(this).constructor; e = Reflect.construct(t, arguments, r) } else e = t.apply(this, arguments); return function (e, t) { if (t && ("object" === bn(t) || "function" == typeof t)) return t; if (void 0 !== t) throw new TypeError("Derived constructors may only return object or undefined"); return kn(e) }(this, e) }); function l() { var e, t, r; !function (e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, l); for (var n = arguments.length, o = new Array(n), i = 0; i < n; i++)o[i] = arguments[i]; return function (e, t) { if (t.has(e)) throw new TypeError("Cannot initialize the same private elements twice on an object") }(t = kn(e = u.call.apply(u, [this].concat(o))), r = In), r.add(t), e } return r = l, (n = [{ key: "platformId", get: function () { return e.ABSOLUTE_GAMES } }, { key: "isPlayerAuthorizationSupported", get: function () { return !0 } }, { key: "isExternalLinksAllowed", get: function () { return !1 } }, { key: "initialize", value: function () { var e = this; if (this._isInitialized) return Promise.resolve(); var t = this._getPromiseDecorator(p.INITIALIZE); return t || (t = this._createPromiseDecorator(p.INITIALIZE), fr("https://unpkg.com/@agru/sdk/dist/umd/index.min.js").then((function () { e._platformSdk = new window.AgRuSdk, e._platformSdk.on(window.AgRuSdkMethods.ShowCampaign, (function (t, r) { "rewarded" === t.type ? null === r ? t.status ? e._setRewardedState(a.OPENED) : (t.reward && e._setRewardedState(a.REWARDED), e._setRewardedState(a.CLOSED)) : e._setRewardedState(a.FAILED) : null === r ? t.status ? e._setInterstitialState(i.OPENED) : e._setInterstitialState(i.CLOSED) : e._setInterstitialState(i.FAILED) })); var t = function (e, t, r) { if (!t.has(e)) throw new TypeError("attempted to get private field on non-instance"); return r }(e, In, Tn).call(e); Promise.all([t]).finally((function () { e._isInitialized = !0, e._defaultStorageType = e._isPlayerAuthorized ? c.PLATFORM_INTERNAL : c.LOCAL_STORAGE, e._resolvePromiseDecorator(p.INITIALIZE) })) }))), t.promise } }, { key: "authorizePlayer", value: function () { var e = this; if (this._isPlayerAuthorized) return Promise.resolve(); var t = this._getPromiseDecorator(p.AUTHORIZE_PLAYER); return t || (t = this._createPromiseDecorator(p.AUTHORIZE_PLAYER), this._platformSdk.authorize((function (t, r) { null === r ? e._resolvePromiseDecorator(p.AUTHORIZE_PLAYER) : e._rejectPromiseDecorator(p.AUTHORIZE_PLAYER, r) }))), t.promise } }, { key: "isStorageSupported", value: function (e) { return e === c.PLATFORM_INTERNAL || On(Rn(l.prototype), "isStorageSupported", this).call(this, e) } }, { key: "isStorageAvailable", value: function (e) { return e === c.PLATFORM_INTERNAL ? this._isPlayerAuthorized : On(Rn(l.prototype), "isStorageAvailable", this).call(this, e) } }, { key: "getDataFromStorage", value: function (e, t, r) { var n = this; return t === c.PLATFORM_INTERNAL ? new Promise((function (t, r) { if (n._platformStorageCachedData) { if (Array.isArray(e)) { for (var o = [], i = 0; i < e.length; i++) { var a = void 0 === n._platformStorageCachedData[e[i]] ? null : n._platformStorageCachedData[e[i]]; o.push(a) } return void t(o) } t(void 0 === n._platformStorageCachedData[e] ? null : n._platformStorageCachedData[e]) } else n._isPlayerAuthorized ? n._platformSdk.getSaveData((function (o, i) { if (null === i) { if (n._platformStorageCachedData = o || {}, Array.isArray(e)) { for (var a = [], s = 0; s < e.length; s++) { var u = void 0 === n._platformStorageCachedData[e[s]] ? null : n._platformStorageCachedData[e[s]]; a.push(u) } return void t(a) } t(void 0 === n._platformStorageCachedData[e] ? null : n._platformStorageCachedData[e]) } else r(i) })) : r() })) : On(Rn(l.prototype), "getDataFromStorage", this).call(this, e, t, r) } }, { key: "setDataToStorage", value: function (e, t, r) { var n = this; return r === c.PLATFORM_INTERNAL ? new Promise((function (r, o) { if (n._isPlayerAuthorized) { var i = null !== n._platformStorageCachedData ? En({}, n._platformStorageCachedData) : {}; if (Array.isArray(e)) for (var a = 0; a < e.length; a++)i[e[a]] = t[a]; else i[e] = t; n._platformSdk.setSaveData(i, (function (e, t) { null === t && (n._platformStorageCachedData = i, r()), o(t) })) } else o() })) : On(Rn(l.prototype), "setDataToStorage", this).call(this, e, t, r) } }, { key: "deleteDataFromStorage", value: function (e, t) { var r = this; return t === c.PLATFORM_INTERNAL ? new Promise((function (t, n) { if (r._isPlayerAuthorized) { var o = null !== r._platformStorageCachedData ? En({}, r._platformStorageCachedData) : {}; if (Array.isArray(e)) for (var i = 0; i < e.length; i++)delete o[e[i]]; else delete o[e]; r._platformSdk.setSaveData(o, (function (e, i) { null === i && (r._platformStorageCachedData = o, t()), n(i) })) } else n() })) : On(Rn(l.prototype), "deleteDataFromStorage", this).call(this, e, t) } }, { key: "showInterstitial", value: function () { this._platformSdk.showCampaign("default") } }, { key: "showRewarded", value: function () { this._platformSdk.showCampaign("rewarded") } }]) && An(r.prototype, n), Object.defineProperty(r, "prototype", { writable: !1 }), l }(lr); function jn(e) { return jn = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e }, jn(e) } function Nn(e, t) { for (var r = 0; r < t.length; r++) { var n = t[r]; n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, Cn(n.key), n) } } function Cn(e) { var t = function (e, t) { if ("object" != jn(e) || !e) return e; var r = e[Symbol.toPrimitive]; if (void 0 !== r) { var n = r.call(e, "string"); if ("object" != jn(n)) return n; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(e) }(e); return "symbol" == jn(t) ? t : String(t) } function Bn(e, t) { return Bn = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) { return e.__proto__ = t, e }, Bn(e, t) } function Gn(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e } function Mn(e) { return Mn = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (e) { return e.__proto__ || Object.getPrototypeOf(e) }, Mn(e) } function Fn(e, t, r) { return function (e, t, r) { if (t.set) t.set.call(e, r); else { if (!t.writable) throw new TypeError("attempted to set read only private field"); t.value = r } }(e, Hn(e, t, "set"), r), r } function Un(e, t) { return function (e, t) { return t.get ? t.get.call(e) : t.value }(e, Hn(e, t, "get")) } function Hn(e, t, r) { if (!t.has(e)) throw new TypeError("attempted to " + r + " private field on non-instance"); return t.get(e) } var zn = new WeakMap; const Wn = function (t) { !function (e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function"); e.prototype = Object.create(t && t.prototype, { constructor: { value: e, writable: !0, configurable: !0 } }), Object.defineProperty(e, "prototype", { writable: !1 }), t && Bn(e, t) }(d, t); var r, n, o, l, f = (o = d, l = function () { if ("undefined" == typeof Reflect || !Reflect.construct) return !1; if (Reflect.construct.sham) return !1; if ("function" == typeof Proxy) return !0; try { return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function () { }))), !0 } catch (e) { return !1 } }(), function () { var e, t = Mn(o); if (l) { var r = Mn(this).constructor; e = Reflect.construct(t, arguments, r) } else e = t.apply(this, arguments); return function (e, t) { if (t && ("object" === jn(t) || "function" == typeof t)) return t; if (void 0 !== t) throw new TypeError("Derived constructors may only return object or undefined"); return Gn(e) }(this, e) }); function d() { var e, t, r, n; !function (e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, d); for (var o = arguments.length, i = new Array(o), a = 0; a < o; a++)i[a] = arguments[a]; return t = Gn(e = f.call.apply(f, [this].concat(i))), n = { writable: !0, value: !1 }, function (e, t) { if (t.has(e)) throw new TypeError("Cannot initialize the same private elements twice on an object") }(t, r = zn), r.set(t, n), e } return r = d, (n = [{ key: "platformId", get: function () { return e.GAME_DISTRIBUTION } }, { key: "isMinimumDelayBetweenInterstitialEnabled", get: function () { return !1 } }, { key: "isExternalLinksAllowed", get: function () { return !1 } }, { key: "initialize", value: function () { if (this._isInitialized) return Promise.resolve(); var e = this._getPromiseDecorator(p.INITIALIZE); if (!e) if (e = this._createPromiseDecorator(p.INITIALIZE), this._options && "string" == typeof this._options.gameId) { var t = this; window.GD_OPTIONS = { gameId: this._options.gameId, onEvent: function (e) { switch (e.name) { case "SDK_READY": t._platformSdk = window.gdsdk, t._isInitialized = !0, t.showInterstitial(), t._resolvePromiseDecorator(p.INITIALIZE); break; case "SDK_GAME_START": Un(t, zn) ? (t._setRewardedState(a.CLOSED), t._platformSdk.preloadAd("rewarded")) : t._setInterstitialState(i.CLOSED); break; case "SDK_GAME_PAUSE": Un(t, zn) ? t._setRewardedState(a.OPENED) : t._setInterstitialState(i.OPENED); break; case "SDK_REWARDED_WATCH_COMPLETE": t._setRewardedState(a.REWARDED) } } }, this._defaultStorageType = c.LOCAL_STORAGE, this._isBannerSupported = !0, fr("https://html5.api.gamedistribution.com/main.min.js") } else this._rejectPromiseDecorator(p.INITIALIZE, m); return e.promise } }, { key: "showBanner", value: function (e) { var t = this, r = document.getElementById(u); r || (r = pr(e)), r.style.display = "block", this._platformSdk.showAd("display", { containerId: u }).then((function () { t._setBannerState(s.SHOWN) })).catch((function () { t._setBannerState(s.FAILED), r.style.display = "none" })) } }, { key: "hideBanner", value: function () { var e = document.getElementById(u); e && (e.style.display = "none"), this._setBannerState(s.HIDDEN) } }, { key: "showInterstitial", value: function () { var e = this; Fn(this, zn, !1), this._platformSdk ? this._platformSdk.showAd().catch((function () { e._setInterstitialState(i.FAILED) })) : this._setInterstitialState(i.FAILED) } }, { key: "preloadRewarded", value: function () { this._platformSdk.preloadAd("rewarded") } }, { key: "showRewarded", value: function () { var e = this; Fn(this, zn, !0), this._platformSdk ? this._platformSdk.showAd("rewarded").catch((function () { e._setRewardedState(a.FAILED) })) : this._setRewardedState(a.FAILED) } }]) && Nn(r.prototype, n), Object.defineProperty(r, "prototype", { writable: !1 }), d }(lr); function xn(e) { return xn = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e }, xn(e) } function Vn(e, t) { for (var r = 0; r < t.length; r++) { var n = t[r]; n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, eo(n.key), n) } } function Yn() { return Yn = "undefined" != typeof Reflect && Reflect.get ? Reflect.get.bind() : function (e, t, r) { var n = function (e, t) { for (; !Object.prototype.hasOwnProperty.call(e, t) && null !== (e = Jn(e));); return e }(e, t); if (n) { var o = Object.getOwnPropertyDescriptor(n, t); return o.get ? o.get.call(arguments.length < 3 ? e : r) : o.value } }, Yn.apply(this, arguments) } function Zn(e, t) { return Zn = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) { return e.__proto__ = t, e }, Zn(e, t) } function Kn(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e } function Jn(e) { return Jn = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (e) { return e.__proto__ || Object.getPrototypeOf(e) }, Jn(e) } function qn(e, t) { Qn(e, t), t.add(e) } function Xn(e, t, r) { Qn(e, t), t.set(e, r) } function Qn(e, t) { if (t.has(e)) throw new TypeError("Cannot initialize the same private elements twice on an object") } function $n(e, t, r) { return (t = eo(t)) in e ? Object.defineProperty(e, t, { value: r, enumerable: !0, configurable: !0, writable: !0 }) : e[t] = r, e } function eo(e) { var t = function (e, t) { if ("object" != xn(e) || !e) return e; var r = e[Symbol.toPrimitive]; if (void 0 !== r) { var n = r.call(e, "string"); if ("object" != xn(n)) return n; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(e) }(e); return "symbol" == xn(t) ? t : String(t) } function to(e, t, r) { if (!t.has(e)) throw new TypeError("attempted to get private field on non-instance"); return r } function ro(e, t) { return function (e, t) { return t.get ? t.get.call(e) : t.value }(e, no(e, t, "get")) } function no(e, t, r) { if (!t.has(e)) throw new TypeError("attempted to " + r + " private field on non-instance"); return t.get(e) } var oo = "AUTHORIZED", io = { VALUABLE_ACCESS: "VALUABLE_ACCESS", PHOTO_CONTENT: "PHOTO_CONTENT" }, ao = new WeakMap, so = new WeakMap, uo = new WeakMap, co = new WeakMap, lo = new WeakSet, fo = new WeakSet, po = new WeakSet, ho = new WeakSet, yo = new WeakSet, mo = new WeakSet, vo = new WeakSet, _o = new WeakSet, go = new WeakSet, So = new WeakSet, bo = new WeakSet, Po = new WeakSet, Eo = new WeakSet, Ao = new WeakSet, wo = new WeakSet, Oo = new WeakSet; function Do() { return { userProfile: { fields: "uid,name,pic50x50,pic128x128,pic_base", method: "users.getCurrentUser" }, hasAppPermission: function (e) { return { method: "users.hasAppPermission", ext_perm: e } } } } function ko() { var e = this; return { userProfileCallback: function (t, r, n) { return to(e, lo, Io).call(e, t, r, n) }, hasValueAccessCallback: function (t, r, n) { return to(e, po, Lo).call(e, r, n) } } } function Ro() { var e = this; return { showPermissions: function () { return to(e, ho, jo).call(e) }, loadAd: function (t) { return to(e, yo, No).call(e, t) }, showLoadedAd: function (t, r) { return to(e, mo, Co).call(e, r) }, showAd: function (t, r) { return to(e, vo, Bo).call(e, r) }, requestBannerAds: function (t, r) { return to(e, _o, Go).call(e, t, r) }, showBannerAds: function (t, r) { return to(e, So, Fo).call(e, r) }, hideBannerAds: function (t, r) { return to(e, go, Mo).call(e, r) }, setBannerFormat: function (t) { return to(e, bo, Uo).call(e, t) }, showInvite: function (t) { return to(e, Po, Ho).call(e, t) }, showRatingDialog: function (t, r) { return to(e, Eo, zo).call(e, t, r) }, joinGroup: function (t, r) { return to(e, Ao, Wo).call(e, t, r) }, showLoginSuggestion: function (t, r) { return to(e, fo, To).call(e, t, r) }, postMediatopic: function (t, r) { return to(e, wo, xo).call(e, t, r) }, isAdBlockEnabled: function (t, r) { return to(e, Oo, Vo).call(e, t, r) } } } function Io(e, t) { "ok" === e && (this._playerId = t.uid, this._playerName = t.name, this._playerPhotos = [t.pic50x50, t.pic128x128, t.pic_base]), this._isInitialized = !0, this._platformSdk.Client.call(ro(this, so).hasAppPermission(io.VALUABLE_ACCESS), ro(this, uo).hasValueAccessCallback) } function To(e, t) { if ("error" === e) return this._isPlayerAuthorized = !1, void this._rejectPromiseDecorator(p.AUTHORIZE_PLAYER, t); this._isPlayerAuthorized = !0, this._resolvePromiseDecorator(p.AUTHORIZE_PLAYER) } function Lo(e) { if (this._hasValuableAccessPermission = !!e, this._defaultStorageType = this._hasValuableAccessPermission ? c.PLATFORM_INTERNAL : c.LOCAL_STORAGE, this._hasValuableAccessPermission || this._hasValuableAccessPermissionShowed) this._resolvePromiseDecorator(p.INITIALIZE); else { var t = Object.values(io).map((function (e) { return '"'.concat(e, '"') })).join(","); this._platformSdk.UI.showPermissions("[".concat(t, "]")) } } function jo() { this._hasValuableAccessPermissionShowed = !0, this._platformSdk.Client.call(ro(this, so).hasAppPermission(io.VALUABLE_ACCESS), ro(this, uo).hasValueAccessCallback) } function No(e) { "error" === e ? this._setRewardedState(a.FAILED) : (this._setRewardedState(a.OPENED), this._platformSdk.UI.showLoadedAd()) } function Co(e) { switch (e) { case "complete": this._setRewardedState(a.REWARDED), this._setRewardedState(a.CLOSED); break; case "skip": this._setRewardedState(a.CLOSED); break; default: this._setRewardedState(a.FAILED) } } function Bo(e) { switch (e) { case "ready": case "ad_prepared": break; case "ad_shown": this._setInterstitialState(i.OPENED), this._setInterstitialState(i.CLOSED); break; default: this._setInterstitialState(i.FAILED) } } function Go(e, t) { if ("error" !== e) switch (t) { case "ad_loaded": this._platformSdk.invokeUIMethod("showBannerAds", ro(this, ao)); break; case "banner_shown": case "ad_shown": this._setBannerState(s.SHOWN); break; case "hidden_by_user": this._setBannerState(s.HIDDEN) } else this._setBannerState(s.FAILED) } function Mo(e) { e ? this._setBannerState(s.HIDDEN) : this._setBannerState(s.FAILED) } function Fo(e) { e || this._setBannerState(s.FAILED) } function Uo(e) { "error" === e ? this._setBannerState(s.FAILED) : this.showBanner(this._platformBannerOptions) } function Ho(e) { "error" === e ? this._rejectPromiseDecorator(p.INVITE_FRIENDS) : this._resolvePromiseDecorator(p.INVITE_FRIENDS) } function zo(e, t) { "error" === e ? this._rejectPromiseDecorator(p.RATE, t) : this._resolvePromiseDecorator(p.RATE) } function Wo(e, t) { "error" === e ? this._rejectPromiseDecorator(p.JOIN_COMMUNITY, t) : this._resolvePromiseDecorator(p.JOIN_COMMUNITY) } function xo(e, t) { "error" === e ? this._rejectPromiseDecorator(p.CREATE_POST, t) : this._resolvePromiseDecorator(p.CREATE_POST) } function Vo(e, t) { "ok" === e ? this._resolvePromiseDecorator(p.ADBLOCK_DETECT, "true" === t) : this._rejectPromiseDecorator(p.ADBLOCK_DETECT) } const Yo = function (t) { !function (e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function"); e.prototype = Object.create(t && t.prototype, { constructor: { value: e, writable: !0, configurable: !0 } }), Object.defineProperty(e, "prototype", { writable: !1 }), t && Zn(e, t) }(l, t); var r, n, o, s, u = (o = l, s = function () { if ("undefined" == typeof Reflect || !Reflect.construct) return !1; if (Reflect.construct.sham) return !1; if ("function" == typeof Proxy) return !0; try { return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function () { }))), !0 } catch (e) { return !1 } }(), function () { var e, t = Jn(o); if (s) { var r = Jn(this).constructor; e = Reflect.construct(t, arguments, r) } else e = t.apply(this, arguments); return function (e, t) { if (t && ("object" === xn(t) || "function" == typeof t)) return t; if (void 0 !== t) throw new TypeError("Derived constructors may only return object or undefined"); return Kn(e) }(this, e) }); function l() { var e; !function (e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, l); for (var t = arguments.length, r = new Array(t), n = 0; n < t; n++)r[n] = arguments[n]; return qn(Kn(e = u.call.apply(u, [this].concat(r))), Oo), qn(Kn(e), wo), qn(Kn(e), Ao), qn(Kn(e), Eo), qn(Kn(e), Po), qn(Kn(e), bo), qn(Kn(e), So), qn(Kn(e), go), qn(Kn(e), _o), qn(Kn(e), vo), qn(Kn(e), mo), qn(Kn(e), yo), qn(Kn(e), ho), qn(Kn(e), po), qn(Kn(e), fo), qn(Kn(e), lo), Xn(Kn(e), co, { get: Ro, set: void 0 }), Xn(Kn(e), uo, { get: ko, set: void 0 }), Xn(Kn(e), so, { get: Do, set: void 0 }), $n(Kn(e), "_hasValuableAccessPermission", !1), $n(Kn(e), "_hasValuableAccessPermissionShowed", !1), $n(Kn(e), "_platformBannerOptions", {}), Xn(Kn(e), ao, { writable: !0, value: null }), e } return r = l, (n = [{ key: "platformId", get: function () { return e.OK } }, { key: "isPlayerAuthorizationSupported", get: function () { return !0 } }, { key: "isBannerSupported", get: function () { return !0 } }, { key: "isJoinCommunitySupported", get: function () { return !0 } }, { key: "isInviteFriendsSupported", get: function () { return !0 } }, { key: "isCreatePostSupported", get: function () { return !0 } }, { key: "isRateSupported", get: function () { return !0 } }, { key: "isExternalLinksAllowed", get: function () { return !1 } }, { key: "isClipboardSupported", get: function () { return !1 } }, { key: "initialize", value: function () { var e = this; if (this._isInitialized) return Promise.resolve(); var t = this._getPromiseDecorator(p.INITIALIZE); return t || (t = this._createPromiseDecorator(p.INITIALIZE), fr("//api.ok.ru/js/fapi5.js").then((function () { dr("FAPI").then((function () { e._platformSdk = window.FAPI, window.API_callback = function (t, r, n) { return ro(e, co)[t](r, n) }; var t = e._platformSdk.Util.getRequestParameters() || {}; t.api_server && t.apiconnection ? e._platformSdk.init(t.api_server, t.apiconnection, (function () { var t, r = null === (t = e._platformSdk) || void 0 === t ? void 0 : t.saved_state; e._isPlayerAuthorized = !r || r === oo, e._isPlayerAuthorized ? e._platformSdk.Client.call(ro(e, so).userProfile, ro(e, uo).userProfileCallback) : (e._isInitialized = !0, e._resolvePromiseDecorator(p.INITIALIZE)) }), (function () { e._rejectPromiseDecorator(p.INITIALIZE) })) : e._rejectPromiseDecorator(p.INITIALIZE, _) })) }))), t.promise } }, { key: "authorizePlayer", value: function () { if (this._isPlayerAuthorized) return Promise.resolve(); var e = this._getPromiseDecorator(p.AUTHORIZE_PLAYER); return e || (e = this._createPromiseDecorator(p.AUTHORIZE_PLAYER), this._platformSdk.UI.showLoginSuggestion(oo)), e.promise } }, { key: "isStorageSupported", value: function (e) { return e === c.PLATFORM_INTERNAL || Yn(Jn(l.prototype), "isStorageSupported", this).call(this, e) } }, { key: "isStorageAvailable", value: function (e) { return e === c.PLATFORM_INTERNAL ? this._hasValuableAccessPermission : Yn(Jn(l.prototype), "isStorageAvailable", this).call(this, e) } }, { key: "getDataFromStorage", value: function (e, t, r) { var n = this; return t === c.PLATFORM_INTERNAL ? this._hasValuableAccessPermission ? new Promise((function (t, o) { var i = Array.isArray(e) ? e : [e], a = { method: "storage.get", keys: i, scope: "CUSTOM" }; n._platformSdk.Client.call(a, (function (n, a, s) { if (a) { var u = a.data || {}; if (Array.isArray(e)) { var c = []; return i.forEach((function (e) { if ("" !== u[e] && void 0 !== u[e]) { var t = u[e]; if (r) try { t = JSON.parse(u[e]) } catch (e) { } c.push(t) } else c.push(null) })), void t(c) } if ("" === u[e] || void 0 === u[e]) return void t(null); var l = u[e]; if (r) try { l = JSON.parse(u[e]) } catch (e) { } t(l) } else o(s) })) })) : Promise.reject(y) : Yn(Jn(l.prototype), "getDataFromStorage", this).call(this, e, t, r) } }, { key: "setDataToStorage", value: function (e, t, r) { var n = this; if (r === c.PLATFORM_INTERNAL) { if (!this._hasValuableAccessPermission) return Promise.reject(y); for (var o = Array.isArray(e) ? e : [e], i = Array.isArray(e) ? t : [t], a = [], s = function () { var e = o[u], t = i[u]; "string" != typeof t && (t = JSON.stringify(t)); var r = { method: "storage.set", key: e, value: t }, s = new Promise((function (e, t) { n._platformSdk.Client.call(r, (function (r, n) { n ? e() : t() })) })); a.push(s) }, u = 0; u < o.length; u++)s(); return Promise.all(a) } return Yn(Jn(l.prototype), "setDataToStorage", this).call(this, e, t, r) } }, { key: "deleteDataFromStorage", value: function (e, t) { var r = this; if (t === c.PLATFORM_INTERNAL) { if (!this._hasValuableAccessPermission) return Promise.reject(y); for (var n = Array.isArray(e) ? e : [e], o = [], i = function () { var e = { method: "storage.set", key: n[a] }, t = new Promise((function (t, n) { r._platformSdk.Client.call(e, (function (e, r) { r ? t() : n() })) })); o.push(t) }, a = 0; a < n.length; a++)i(); return Promise.all(o) } return Yn(Jn(l.prototype), "deleteDataFromStorage", this).call(this, e, t) } }, { key: "showInterstitial", value: function () { try { this._platformSdk.UI.showAd() } catch (e) { this._setInterstitialState(i.FAILED) } } }, { key: "showRewarded", value: function () { try { this._platformSdk.UI.loadAd() } catch (e) { this._setRewardedState(a.FAILED) } } }, { key: "showBanner", value: function (e) { var t, r; r = e, function (e, t, r) { if (t.set) t.set.call(e, r); else { if (!t.writable) throw new TypeError("attempted to set read only private field"); t.value = r } }(t = this, no(t, ao, "set"), r), this._platformSdk.invokeUIMethod("requestBannerAds") } }, { key: "hideBanner", value: function () { this._platformSdk.invokeUIMethod("hideBannerAds") } }, { key: "checkAdBlock", value: function () { var e = this._getPromiseDecorator(p.ADBLOCK_DETECT); return e || (e = this._createPromiseDecorator(p.ADBLOCK_DETECT), this._platformSdk.invokeUIMethod("isAdBlockEnabled")), e.promise } }, { key: "inviteFriends", value: function (e) { var t = (e || {}).text; if (!e || "string" != typeof t) return Promise.reject(); var r = this._getPromiseDecorator(p.INVITE_FRIENDS); return r || (r = this._createPromiseDecorator(p.INVITE_FRIENDS), t.length > 120 ? this._rejectPromiseDecorator(p.INVITE_FRIENDS, S) : this._platformSdk.UI.showInvite(t)), r.promise } }, { key: "rate", value: function () { var e = this._getPromiseDecorator(p.RATE); return e || (e = this._createPromiseDecorator(p.RATE), this._platformSdk.UI.showRatingDialog()), e.promise } }, { key: "createPost", value: function (e) { if (!e || null == e || !e.media) return Promise.reject(); var t, r = this._getPromiseDecorator(p.CREATE_POST); return r || (r = this._createPromiseDecorator(p.CREATE_POST), this._platformSdk.UI.postMediatopic(e, null !== (t = e.status) && void 0 !== t && t)), r.promise } }, { key: "joinCommunity", value: function (e) { if (!e || null == e || !e.groupId) return Promise.reject(); var t, r = this._getPromiseDecorator(p.JOIN_COMMUNITY); return r || (r = this._createPromiseDecorator(p.JOIN_COMMUNITY), this._platformSdk.UI.joinGroup(e.groupId, null !== (t = e.enableMessages) && void 0 !== t && t)), r.promise } }]) && Vn(r.prototype, n), Object.defineProperty(r, "prototype", { writable: !1 }), l }(lr); function Zo(e) { return Zo = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e }, Zo(e) } function Ko() { Ko = function () { return t }; var e, t = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (e, t, r) { e[t] = r.value }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", s = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function c(e, t, r) { return Object.defineProperty(e, t, { value: r, enumerable: !0, configurable: !0, writable: !0 }), e[t] } try { c({}, "") } catch (e) { c = function (e, t, r) { return e[t] = r } } function l(e, t, r, n) { var i = t && t.prototype instanceof v ? t : v, a = Object.create(i.prototype), s = new I(n || []); return o(a, "_invoke", { value: O(e, r, s) }), a } function f(e, t, r) { try { return { type: "normal", arg: e.call(t, r) } } catch (e) { return { type: "throw", arg: e } } } t.wrap = l; var p = "suspendedStart", d = "suspendedYield", h = "executing", y = "completed", m = {}; function v() { } function _() { } function g() { } var S = {}; c(S, a, (function () { return this })); var b = Object.getPrototypeOf, P = b && b(b(T([]))); P && P !== r && n.call(P, a) && (S = P); var E = g.prototype = v.prototype = Object.create(S); function A(e) { ["next", "throw", "return"].forEach((function (t) { c(e, t, (function (e) { return this._invoke(t, e) })) })) } function w(e, t) { function r(o, i, a, s) { var u = f(e[o], e, i); if ("throw" !== u.type) { var c = u.arg, l = c.value; return l && "object" == Zo(l) && n.call(l, "__await") ? t.resolve(l.__await).then((function (e) { r("next", e, a, s) }), (function (e) { r("throw", e, a, s) })) : t.resolve(l).then((function (e) { c.value = e, a(c) }), (function (e) { return r("throw", e, a, s) })) } s(u.arg) } var i; o(this, "_invoke", { value: function (e, n) { function o() { return new t((function (t, o) { r(e, n, t, o) })) } return i = i ? i.then(o, o) : o() } }) } function O(t, r, n) { var o = p; return function (i, a) { if (o === h) throw new Error("Generator is already running"); if (o === y) { if ("throw" === i) throw a; return { value: e, done: !0 } } for (n.method = i, n.arg = a; ;) { var s = n.delegate; if (s) { var u = D(s, n); if (u) { if (u === m) continue; return u } } if ("next" === n.method) n.sent = n._sent = n.arg; else if ("throw" === n.method) { if (o === p) throw o = y, n.arg; n.dispatchException(n.arg) } else "return" === n.method && n.abrupt("return", n.arg); o = h; var c = f(t, r, n); if ("normal" === c.type) { if (o = n.done ? y : d, c.arg === m) continue; return { value: c.arg, done: n.done } } "throw" === c.type && (o = y, n.method = "throw", n.arg = c.arg) } } } function D(t, r) { var n = r.method, o = t.iterator[n]; if (o === e) return r.delegate = null, "throw" === n && t.iterator.return && (r.method = "return", r.arg = e, D(t, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), m; var i = f(o, t.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, m; var a = i.arg; return a ? a.done ? (r[t.resultName] = a.value, r.next = t.nextLoc, "return" !== r.method && (r.method = "next", r.arg = e), r.delegate = null, m) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, m) } function k(e) { var t = { tryLoc: e[0] }; 1 in e && (t.catchLoc = e[1]), 2 in e && (t.finallyLoc = e[2], t.afterLoc = e[3]), this.tryEntries.push(t) } function R(e) { var t = e.completion || {}; t.type = "normal", delete t.arg, e.completion = t } function I(e) { this.tryEntries = [{ tryLoc: "root" }], e.forEach(k, this), this.reset(!0) } function T(t) { if (t || "" === t) { var r = t[a]; if (r) return r.call(t); if ("function" == typeof t.next) return t; if (!isNaN(t.length)) { var o = -1, i = function r() { for (; ++o < t.length;)if (n.call(t, o)) return r.value = t[o], r.done = !1, r; return r.value = e, r.done = !0, r }; return i.next = i } } throw new TypeError(Zo(t) + " is not iterable") } return _.prototype = g, o(E, "constructor", { value: g, configurable: !0 }), o(g, "constructor", { value: _, configurable: !0 }), _.displayName = c(g, u, "GeneratorFunction"), t.isGeneratorFunction = function (e) { var t = "function" == typeof e && e.constructor; return !!t && (t === _ || "GeneratorFunction" === (t.displayName || t.name)) }, t.mark = function (e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, g) : (e.__proto__ = g, c(e, u, "GeneratorFunction")), e.prototype = Object.create(E), e }, t.awrap = function (e) { return { __await: e } }, A(w.prototype), c(w.prototype, s, (function () { return this })), t.AsyncIterator = w, t.async = function (e, r, n, o, i) { void 0 === i && (i = Promise); var a = new w(l(e, r, n, o), i); return t.isGeneratorFunction(r) ? a : a.next().then((function (e) { return e.done ? e.value : a.next() })) }, A(E), c(E, u, "Generator"), c(E, a, (function () { return this })), c(E, "toString", (function () { return "[object Generator]" })), t.keys = function (e) { var t = Object(e), r = []; for (var n in t) r.push(n); return r.reverse(), function e() { for (; r.length;) { var n = r.pop(); if (n in t) return e.value = n, e.done = !1, e } return e.done = !0, e } }, t.values = T, I.prototype = { constructor: I, reset: function (t) { if (this.prev = 0, this.next = 0, this.sent = this._sent = e, this.done = !1, this.delegate = null, this.method = "next", this.arg = e, this.tryEntries.forEach(R), !t) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = e) }, stop: function () { this.done = !0; var e = this.tryEntries[0].completion; if ("throw" === e.type) throw e.arg; return this.rval }, dispatchException: function (t) { if (this.done) throw t; var r = this; function o(n, o) { return s.type = "throw", s.arg = t, r.next = n, o && (r.method = "next", r.arg = e), !!o } for (var i = this.tryEntries.length - 1; i >= 0; --i) { var a = this.tryEntries[i], s = a.completion; if ("root" === a.tryLoc) return o("end"); if (a.tryLoc <= this.prev) { var u = n.call(a, "catchLoc"), c = n.call(a, "finallyLoc"); if (u && c) { if (this.prev < a.catchLoc) return o(a.catchLoc, !0); if (this.prev < a.finallyLoc) return o(a.finallyLoc) } else if (u) { if (this.prev < a.catchLoc) return o(a.catchLoc, !0) } else { if (!c) throw new Error("try statement without catch or finally"); if (this.prev < a.finallyLoc) return o(a.finallyLoc) } } } }, abrupt: function (e, t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break } } i && ("break" === e || "continue" === e) && i.tryLoc <= t && t <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = e, a.arg = t, i ? (this.method = "next", this.next = i.finallyLoc, m) : this.complete(a) }, complete: function (e, t) { if ("throw" === e.type) throw e.arg; return "break" === e.type || "continue" === e.type ? this.next = e.arg : "return" === e.type ? (this.rval = this.arg = e.arg, this.method = "return", this.next = "end") : "normal" === e.type && t && (this.next = t), m }, finish: function (e) { for (var t = this.tryEntries.length - 1; t >= 0; --t) { var r = this.tryEntries[t]; if (r.finallyLoc === e) return this.complete(r.completion, r.afterLoc), R(r), m } }, catch: function (e) { for (var t = this.tryEntries.length - 1; t >= 0; --t) { var r = this.tryEntries[t]; if (r.tryLoc === e) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; R(r) } return o } } throw new Error("illegal catch attempt") }, delegateYield: function (t, r, n) { return this.delegate = { iterator: T(t), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = e), m } }, t } function Jo(e, t, r, n, o, i, a) { try { var s = e[i](a), u = s.value } catch (e) { return void r(e) } s.done ? t(u) : Promise.resolve(u).then(n, o) } function qo(e, t) { var r = Object.keys(e); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(e); t && (n = n.filter((function (t) { return Object.getOwnPropertyDescriptor(e, t).enumerable }))), r.push.apply(r, n) } return r } function Xo(e) { for (var t = 1; t < arguments.length; t++) { var r = null != arguments[t] ? arguments[t] : {}; t % 2 ? qo(Object(r), !0).forEach((function (t) { var n, o, i; n = e, o = t, i = r[t], (o = $o(o)) in n ? Object.defineProperty(n, o, { value: i, enumerable: !0, configurable: !0, writable: !0 }) : n[o] = i })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(r)) : qo(Object(r)).forEach((function (t) { Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(r, t)) })) } return e } function Qo(e, t) { for (var r = 0; r < t.length; r++) { var n = t[r]; n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, $o(n.key), n) } } function $o(e) { var t = function (e, t) { if ("object" != Zo(e) || !e) return e; var r = e[Symbol.toPrimitive]; if (void 0 !== r) { var n = r.call(e, "string"); if ("object" != Zo(n)) return n; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(e) }(e); return "symbol" == Zo(t) ? t : String(t) } function ei() { return ei = "undefined" != typeof Reflect && Reflect.get ? Reflect.get.bind() : function (e, t, r) { var n = function (e, t) { for (; !Object.prototype.hasOwnProperty.call(e, t) && null !== (e = ni(e));); return e }(e, t); if (n) { var o = Object.getOwnPropertyDescriptor(n, t); return o.get ? o.get.call(arguments.length < 3 ? e : r) : o.value } }, ei.apply(this, arguments) } function ti(e, t) { return ti = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) { return e.__proto__ = t, e }, ti(e, t) } function ri(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e } function ni(e) { return ni = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (e) { return e.__proto__ || Object.getPrototypeOf(e) }, ni(e) } function oi(e, t) { !function (e, t) { if (t.has(e)) throw new TypeError("Cannot initialize the same private elements twice on an object") }(e, t), t.add(e) } function ii(e, t, r) { if (!t.has(e)) throw new TypeError("attempted to get private field on non-instance"); return r } var ai = new WeakSet, si = new WeakSet; function ui() { var e = this; return new Promise((function (t) { e._platformSdk.userService.getUser().then((function (t) { return e._playerId = t.id, e._isPlayerAuthorized = t.isAuthorized, e._playerName = t.name, e._playerPhotos = t.photos, e._defaultStorageType = e._isPlayerAuthorized ? c.PLATFORM_INTERNAL : c.LOCAL_STORAGE, e._isPlayerAuthorized ? ii(e, si, ci).call(e, []) : Promise.resolve() })).finally((function () { t() })) })) } function ci(e) { return li.apply(this, arguments) } function li() { var e; return e = Ko().mark((function e(t) { var r, n = arguments; return Ko().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: if (r = n.length > 1 && void 0 !== n[1] && n[1], this._platformStorageCachedData) { e.next = 5; break } return e.next = 4, this.platformSdk.cloudSaveApi.getState(); case 4: this._platformStorageCachedData = e.sent; case 5: return e.abrupt("return", mr(t, this._platformStorageCachedData, r)); case 6: case "end": return e.stop() } }), e, this) })), li = function () { var t = this, r = arguments; return new Promise((function (n, o) { var i = e.apply(t, r); function a(e) { Jo(i, n, o, a, s, "next", e) } function s(e) { Jo(i, n, o, a, s, "throw", e) } a(void 0) })) }, li.apply(this, arguments) } const fi = function (t) { !function (e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function"); e.prototype = Object.create(t && t.prototype, { constructor: { value: e, writable: !0, configurable: !0 } }), Object.defineProperty(e, "prototype", { writable: !1 }), t && ti(e, t) }(l, t); var r, n, o, s, u = (o = l, s = function () { if ("undefined" == typeof Reflect || !Reflect.construct) return !1; if (Reflect.construct.sham) return !1; if ("function" == typeof Proxy) return !0; try { return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function () { }))), !0 } catch (e) { return !1 } }(), function () { var e, t = ni(o); if (s) { var r = ni(this).constructor; e = Reflect.construct(t, arguments, r) } else e = t.apply(this, arguments); return function (e, t) { if (t && ("object" === Zo(t) || "function" == typeof t)) return t; if (void 0 !== t) throw new TypeError("Derived constructors may only return object or undefined"); return ri(e) }(this, e) }); function l() { var e; !function (e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, l); for (var t = arguments.length, r = new Array(t), n = 0; n < t; n++)r[n] = arguments[n]; return oi(ri(e = u.call.apply(u, [this].concat(r))), si), oi(ri(e), ai), e } return r = l, (n = [{ key: "platformId", get: function () { return e.PLAYGAMA } }, { key: "isExternalLinksAllowed", get: function () { return !1 } }, { key: "isPlayerAuthorizationSupported", get: function () { return !0 } }, { key: "isPaymentsSupported", get: function () { return !0 } }, { key: "platformLanguage", get: function () { return this._platformSdk.platformService.getLanguage() } }, { key: "initialize", value: function () { var e = this; if (this._isInitialized) return Promise.resolve(); var t = this._getPromiseDecorator(p.INITIALIZE); return t || (t = this._createPromiseDecorator(p.INITIALIZE), fr("https://developer.playgama.com/sdk/v1.js").then((function () { dr("PLAYGAMA_SDK").then((function () { e._platformSdk = window.PLAYGAMA_SDK, ii(e, ai, ui).call(e).then((function () { e._isInitialized = !0, e._resolvePromiseDecorator(p.INITIALIZE) })) })) }))), t.promise } }, { key: "isStorageSupported", value: function (e) { return e === c.PLATFORM_INTERNAL || ei(ni(l.prototype), "isStorageSupported", this).call(this, e) } }, { key: "isStorageAvailable", value: function (e) { return e === c.PLATFORM_INTERNAL ? this._isPlayerAuthorized : ei(ni(l.prototype), "isStorageAvailable", this).call(this, e) } }, { key: "getDataFromStorage", value: function (e, t, r) { return t === c.PLATFORM_INTERNAL ? this._isPlayerAuthorized ? ii(this, si, ci).call(this, e, r) : Promise.reject() : ei(ni(l.prototype), "getDataFromStorage", this).call(this, e, t, r) } }, { key: "setDataToStorage", value: function (e, t, r) { var n = this; switch (r) { case c.PLATFORM_INTERNAL: return this._isPlayerAuthorized ? new Promise((function (r, o) { var i = null !== n._platformStorageCachedData ? Xo({}, n._platformStorageCachedData) : {}; if (Array.isArray(e)) for (var a = 0; a < e.length; a++)i[e[a]] = t[a]; else i[e] = t; n.platformSdk.cloudSaveApi.setItems(i).then((function () { n._platformStorageCachedData = i, r() })).catch((function (e) { o(e) })) })) : Promise.reject(); case c.LOCAL_STORAGE: var o = {}; if (Array.isArray(e)) for (var i = 0; i < e.length; i++)o[e[i]] = "string" != typeof t[i] ? JSON.stringify(t[i]) : t[i]; else o[e] = "string" != typeof t ? JSON.stringify(t) : t; return this._platformSdk.storageApi.setItems(o), ei(ni(l.prototype), "setDataToStorage", this).call(this, e, t, r); default: return Promise.reject(h) } } }, { key: "deleteDataFromStorage", value: function (e, t) { var r = this; switch (t) { case c.PLATFORM_INTERNAL: return new Promise((function (t, n) { var o = null !== r._platformStorageCachedData ? Xo({}, r._platformStorageCachedData) : {}; if (Array.isArray(e)) for (var i = 0; i < e.length; i++)delete o[e[i]]; else delete o[e]; r.platformSdk.cloudSaveApi.setItems(o).then((function () { r._platformStorageCachedData = o, t() })).catch((function (e) { n(e) })) })); case c.LOCAL_STORAGE: return this._platformSdk.storageApi.deleteItems(Array.isArray(e) ? e : [e]), ei(ni(l.prototype), "deleteDataFromStorage", this).call(this, e, t); default: return Promise.reject(h) } } }, { key: "showInterstitial", value: function () { var e = this; this._platformSdk.advService.showInterstitial({ onOpen: function () { e._setInterstitialState(i.OPENED) }, onEmpty: function () { e._setInterstitialState(i.FAILED) }, onClose: function () { e._setInterstitialState(i.CLOSED) }, onError: function () { e._setInterstitialState(i.FAILED) } }) } }, { key: "showRewarded", value: function () { var e = this; this._platformSdk.advService.showRewarded({ onOpen: function () { e._setRewardedState(a.OPENED) }, onRewarded: function () { e._setRewardedState(a.REWARDED) }, onEmpty: function () { e._setRewardedState(a.FAILED) }, onClose: function () { e._setRewardedState(a.CLOSED) }, onError: function () { e._setRewardedState(a.FAILED) } }) } }, { key: "authorizePlayer", value: function (e) { var t = this, r = this._getPromiseDecorator(p.AUTHORIZE_PLAYER); return r || (r = this._createPromiseDecorator(p.AUTHORIZE_PLAYER), this._isPlayerAuthorized ? ii(this, ai, ui).call(this, e).then((function () { t._resolvePromiseDecorator(p.AUTHORIZE_PLAYER) })) : this._platformSdk.userService.authorizeUser().then((function () { ii(t, ai, ui).call(t, e).then((function () { t._resolvePromiseDecorator(p.AUTHORIZE_PLAYER) })) })).catch((function (e) { t._rejectPromiseDecorator(p.AUTHORIZE_PLAYER, e) }))), r.promise } }, { key: "paymentsPurchase", value: function (e) { var t = this, r = this._paymentsGetProductPlatformData(e); if (!r) return Promise.reject(); r.externalId || (r.externalId = this._paymentsGenerateTransactionId(e)); var n = this._getPromiseDecorator(p.PURCHASE); return n || (n = this._createPromiseDecorator(p.PURCHASE), this._platformSdk.inGamePaymentsApi.purchase(r).then((function (r) { if ("PAID" === r.status) { var n = Xo({ id: e }, r); t._paymentsPurchases.push(n), t._resolvePromiseDecorator(p.PURCHASE, n) } else t._rejectPromiseDecorator(p.PURCHASE, r.error) })).catch((function (e) { t._rejectPromiseDecorator(p.PURCHASE, e) }))), n.promise } }, { key: "paymentsGetCatalog", value: function () { var e = this._paymentsGetProductsPlatformData(); if (!e) return Promise.reject(); var t = e.map((function (e) { return { id: e.id, price: "".concat(e.amount, " Golden Fennec"), priceCurrencyCode: "Golden Fennec", priceCurrencyImage: "https://games.playgama.com/assets/gold-fennec-coin-large.webp", priceValue: e.amount } })); return Promise.resolve(t) } }]) && Qo(r.prototype, n), Object.defineProperty(r, "prototype", { writable: !1 }), l }(lr); function pi(e) { return pi = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e }, pi(e) } function di(e, t) { var r = Object.keys(e); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(e); t && (n = n.filter((function (t) { return Object.getOwnPropertyDescriptor(e, t).enumerable }))), r.push.apply(r, n) } return r } function hi(e, t) { for (var r = 0; r < t.length; r++) { var n = t[r]; n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, Si(n.key), n) } } function yi() { return yi = "undefined" != typeof Reflect && Reflect.get ? Reflect.get.bind() : function (e, t, r) { var n = function (e, t) { for (; !Object.prototype.hasOwnProperty.call(e, t) && null !== (e = _i(e));); return e }(e, t); if (n) { var o = Object.getOwnPropertyDescriptor(n, t); return o.get ? o.get.call(arguments.length < 3 ? e : r) : o.value } }, yi.apply(this, arguments) } function mi(e, t) { return mi = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) { return e.__proto__ = t, e }, mi(e, t) } function vi(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e } function _i(e) { return _i = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (e) { return e.__proto__ || Object.getPrototypeOf(e) }, _i(e) } function gi(e, t, r) { return (t = Si(t)) in e ? Object.defineProperty(e, t, { value: r, enumerable: !0, configurable: !0, writable: !0 }) : e[t] = r, e } function Si(e) { var t = function (e, t) { if ("object" != pi(e) || !e) return e; var r = e[Symbol.toPrimitive]; if (void 0 !== r) { var n = r.call(e, "string"); if ("object" != pi(n)) return n; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(e) }(e); return "symbol" == pi(t) ? t : String(t) } function bi(e, t, r) { !function (e, t) { if (t.has(e)) throw new TypeError("Cannot initialize the same private elements twice on an object") }(e, t), t.set(e, r) } function Pi(e, t, r) { return function (e, t, r) { if (t.set) t.set.call(e, r); else { if (!t.writable) throw new TypeError("attempted to set read only private field"); t.value = r } }(e, Ai(e, t, "set"), r), r } function Ei(e, t) { return function (e, t) { return t.get ? t.get.call(e) : t.value }(e, Ai(e, t, "get")) } function Ai(e, t, r) { if (!t.has(e)) throw new TypeError("attempted to " + r + " private field on non-instance"); return t.get(e) } var wi = new WeakMap, Oi = new WeakMap; const Di = function (t) { !function (e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function"); e.prototype = Object.create(t && t.prototype, { constructor: { value: e, writable: !0, configurable: !0 } }), Object.defineProperty(e, "prototype", { writable: !1 }), t && mi(e, t) }(l, t); var r, n, o, s, u = (o = l, s = function () { if ("undefined" == typeof Reflect || !Reflect.construct) return !1; if (Reflect.construct.sham) return !1; if ("function" == typeof Proxy) return !0; try { return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function () { }))), !0 } catch (e) { return !1 } }(), function () { var e, t = _i(o); if (s) { var r = _i(this).constructor; e = Reflect.construct(t, arguments, r) } else e = t.apply(this, arguments); return function (e, t) { if (t && ("object" === pi(t) || "function" == typeof t)) return t; if (void 0 !== t) throw new TypeError("Derived constructors may only return object or undefined"); return vi(e) }(this, e) }); function l() { var e; !function (e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, l); for (var t = arguments.length, r = new Array(t), n = 0; n < t; n++)r[n] = arguments[n]; return bi(vi(e = u.call.apply(u, [this].concat(r))), wi, { writable: !0, value: void 0 }), bi(vi(e), Oi, { writable: !0, value: void 0 }), gi(vi(e), "_defaultStorageType", c.PLATFORM_INTERNAL), gi(vi(e), "_isPlayerAuthorized", !0), e } return r = l, n = [{ key: "platformId", get: function () { return e.PLAYDECK } }, { key: "platformLanguage", get: function () { return Ei(this, wi) ? Ei(this, wi) : yi(_i(l.prototype), "platformLanguage", this) } }, { key: "isPlayerAuthorizationSupported", get: function () { return !0 } }, { key: "isShareSupported", get: function () { return !0 } }, { key: "isPaymentsSupported", get: function () { return !0 } }, { key: "initialize", value: function () { var e = this; if (this._isInitialized) return Promise.resolve(); var t = this._getPromiseDecorator(p.INITIALIZE); return t || (t = this._createPromiseDecorator(p.INITIALIZE), window.addEventListener("message", (function t(r) { var n = r.data; if (n && n.playdeck) { var o = n.playdeck; if ("getUserProfile" === o.method) { var i = o.value; e._playerId = i.telegramId, e._playerPhotos = [i.avatar], e._playerName = i.username, Pi(e, wi, i.locale), Pi(e, Oi, i.params), window.removeEventListener("message", t), e._isInitialized = !0, e._resolvePromiseDecorator(p.INITIALIZE) } } })), window.parent.postMessage({ playdeck: { method: "getUserProfile" } }, "*")), t.promise } }, { key: "sendMessage", value: function (e) { switch (e) { case f.GAME_OVER: return window.parent.postMessage({ playdeck: { method: "gameEnd" } }, "*"), Promise.resolve(); case f.GAME_READY: return window.parent.postMessage({ playdeck: { method: "loading", value: 100 } }, "*"), Promise.resolve(); default: return yi(_i(l.prototype), "sendMessage", this).call(this, e) } } }, { key: "showInterstitial", value: function () { var e = this; window.addEventListener("message", (function t(r) { var n = r.data, o = null == n ? void 0 : n.playdeck; if (o) switch (o.method) { case "startAd": e._setInterstitialState(i.OPENED); break; case "rewardedAd": case "skipAd": e._setInterstitialState(i.CLOSED), window.removeEventListener("message", t); break; case "errAd": case "notFoundAd": e._setInterstitialState(i.FAILED), window.removeEventListener("message", t) } })), window.parent.postMessage({ playdeck: { method: "showAd" } }, "*") } }, { key: "showRewarded", value: function () { var e = this; window.addEventListener("message", (function t(r) { var n = r.data, o = null == n ? void 0 : n.playdeck; if (o) switch (o.method) { case "startAd": e._setRewardedState(a.OPENED); break; case "rewardedAd": e._setRewardedState(a.REWARDED), e._setRewardedState(a.CLOSED), window.removeEventListener("message", t); break; case "skipAd": e._setRewardedState(a.CLOSED), window.removeEventListener("message", t); break; case "errAd": case "notFoundAd": e._setRewardedState(a.FAILED), window.removeEventListener("message", t) } })), window.parent.postMessage({ playdeck: { method: "showAd" } }, "*") } }, { key: "authorizePlayer", value: function () { return Promise.resolve() } }, { key: "isStorageSupported", value: function (e) { return e === c.PLATFORM_INTERNAL || yi(_i(l.prototype), "isStorageSupported", this).call(this, e) } }, { key: "isStorageAvailable", value: function (e) { return e === c.PLATFORM_INTERNAL || yi(_i(l.prototype), "isStorageAvailable", this).call(this, e) } }, { key: "getDataFromStorage", value: function (e, t, r) { return t === c.PLATFORM_INTERNAL ? new Promise((function (t) { var r = {}, n = Array.isArray(e) ? e : [e]; window.addEventListener("message", (function o(i) { var a = i.data; if (a && a.playdeck && "getData" === a.playdeck.method && n.includes(a.playdeck.key)) { var s = a.playdeck; if ("getData" === s.method && (r[s.key] = s.value.data), Object.keys(r).length === n.length) { window.removeEventListener("message", o); var u = Array.isArray(e) ? e.map((function (e) { return r[e] })) : r[e]; t(u) } } })), n.forEach((function (e) { return window.parent.postMessage({ playdeck: { method: "getData", key: e } }, "*") })) })) : yi(_i(l.prototype), "getDataFromStorage", this).call(this, e, t, r) } }, { key: "setDataToStorage", value: function (e, t, r) { return r === c.PLATFORM_INTERNAL ? new Promise((function (r) { var n = Array.isArray(e) ? e : [e], o = (Array.isArray(t) ? t : [t]).map((function (e) { return "string" != typeof e ? JSON.stringify(e) : e })); n.forEach((function (e, t) { return window.parent.postMessage({ playdeck: { method: "setData", key: e, value: o[t] } }, "*") })), r() })) : yi(_i(l.prototype), "setDataToStorage", this).call(this, e, t, r) } }, { key: "deleteDataFromStorage", value: function (e, t) { return t === c.PLATFORM_INTERNAL ? new Promise((function (t) { (Array.isArray(e) ? e : [e]).forEach((function (e) { return window.parent.postMessage({ playdeck: { method: "setData", key: e, value: "" } }, "*") })), t() })) : yi(_i(l.prototype), "deleteDataFromStorage", this).call(this, e, t) } }, { key: "share", value: function () { window.parent.postMessage({ playdeck: { method: "customShare", value: Ei(this, Oi) } }, "*") } }, { key: "paymentsPurchase", value: function (e) { var t = this, r = this._paymentsGetProductPlatformData(e); if (!r) return Promise.reject(); r.externalId || (r.externalId = this._paymentsGenerateTransactionId(e)); var n = this._getPromiseDecorator(p.PURCHASE); return n || (n = this._createPromiseDecorator(p.PURCHASE), window.addEventListener("message", (function e(t) { var r = t.data, n = null == r ? void 0 : r.playdeck; n && "requestPayment" === n.method && (window.parent.postMessage({ playdeck: { method: "openTelegramLink", value: n.value.url } }, "*"), window.removeEventListener("message", e)) })), window.addEventListener("message", (function r(n) { var o = n.data, i = null == o ? void 0 : o.playdeck; if (i && "invoiceClosed" === i.method) if ("paid" === i.value.status) { window.removeEventListener("message", r); var a = function (e) { for (var t = 1; t < arguments.length; t++) { var r = null != arguments[t] ? arguments[t] : {}; t % 2 ? di(Object(r), !0).forEach((function (t) { gi(e, t, r[t]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(r)) : di(Object(r)).forEach((function (t) { Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(r, t)) })) } return e }({ id: e }, i.value); t._paymentsPurchases.push(a), t._resolvePromiseDecorator(p.PURCHASE, a) } else "cancelled" !== i.value.status && "failed" !== i.value.status || (window.removeEventListener("message", r), t._rejectPromiseDecorator(p.PURCHASE, i.value)) })), window.parent.postMessage({ playdeck: { method: "requestPayment", value: r } }, "*")), n.promise } }, { key: "paymentsGetCatalog", value: function () { var e = this._paymentsGetProductsPlatformData(); if (!e) return Promise.reject(); var t = e.map((function (e) { return { id: e.id, price: "".concat(e.amount, " Stars"), priceCurrencyCode: "Stars", priceValue: e.amount } })); return Promise.resolve(t) } }], n && hi(r.prototype, n), Object.defineProperty(r, "prototype", { writable: !1 }), l }(lr); function ki(e) { return ki = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e }, ki(e) } function Ri(e, t) { for (var r = 0; r < t.length; r++) { var n = t[r]; n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, Bi(n.key), n) } } function Ii() { return Ii = "undefined" != typeof Reflect && Reflect.get ? Reflect.get.bind() : function (e, t, r) { var n = function (e, t) { for (; !Object.prototype.hasOwnProperty.call(e, t) && null !== (e = ji(e));); return e }(e, t); if (n) { var o = Object.getOwnPropertyDescriptor(n, t); return o.get ? o.get.call(arguments.length < 3 ? e : r) : o.value } }, Ii.apply(this, arguments) } function Ti(e, t) { return Ti = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) { return e.__proto__ = t, e }, Ti(e, t) } function Li(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e } function ji(e) { return ji = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (e) { return e.__proto__ || Object.getPrototypeOf(e) }, ji(e) } function Ni(e, t, r) { !function (e, t) { if (t.has(e)) throw new TypeError("Cannot initialize the same private elements twice on an object") }(e, t), t.set(e, r) } function Ci(e, t, r) { return (t = Bi(t)) in e ? Object.defineProperty(e, t, { value: r, enumerable: !0, configurable: !0, writable: !0 }) : e[t] = r, e } function Bi(e) { var t = function (e, t) { if ("object" != ki(e) || !e) return e; var r = e[Symbol.toPrimitive]; if (void 0 !== r) { var n = r.call(e, "string"); if ("object" != ki(n)) return n; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(e) }(e); return "symbol" == ki(t) ? t : String(t) } function Gi(e, t, r) { return function (e, t, r) { if (t.set) t.set.call(e, r); else { if (!t.writable) throw new TypeError("attempted to set read only private field"); t.value = r } }(e, Fi(e, t, "set"), r), r } function Mi(e, t) { return function (e, t) { return t.get ? t.get.call(e) : t.value }(e, Fi(e, t, "get")) } function Fi(e, t, r) { if (!t.has(e)) throw new TypeError("attempted to " + r + " private field on non-instance"); return t.get(e) } var Ui = new WeakMap, Hi = new WeakMap, zi = new WeakMap, Wi = new WeakMap; const xi = function (t) { !function (e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function"); e.prototype = Object.create(t && t.prototype, { constructor: { value: e, writable: !0, configurable: !0 } }), Object.defineProperty(e, "prototype", { writable: !1 }), t && Ti(e, t) }(d, t); var r, n, o, s, u = (o = d, s = function () { if ("undefined" == typeof Reflect || !Reflect.construct) return !1; if (Reflect.construct.sham) return !1; if ("function" == typeof Proxy) return !0; try { return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function () { }))), !0 } catch (e) { return !1 } }(), function () { var e, t = ji(o); if (s) { var r = ji(this).constructor; e = Reflect.construct(t, arguments, r) } else e = t.apply(this, arguments); return function (e, t) { if (t && ("object" === ki(t) || "function" == typeof t)) return t; if (void 0 !== t) throw new TypeError("Derived constructors may only return object or undefined"); return Li(e) }(this, e) }); function d() { var e; !function (e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, d); for (var t = arguments.length, r = new Array(t), n = 0; n < t; n++)r[n] = arguments[n]; return Ci(Li(e = u.call.apply(u, [this].concat(r))), "_defaultStorageType", c.PLATFORM_INTERNAL), Ci(Li(e), "_isPlayerAuthorized", !0), Ni(Li(e), Ui, { writable: !0, value: void 0 }), Ni(Li(e), Hi, { writable: !0, value: void 0 }), Ni(Li(e), zi, { writable: !0, value: { onStart: function () { return e._setRewardedState(a.OPENED) }, onSkip: function () { return e._setRewardedState(a.CLOSED) }, onReward: function () { return e._setRewardedState(a.REWARDED) }, onError: function () { return e._setRewardedState(a.FAILED) } } }), Ni(Li(e), Wi, { writable: !0, value: { onStart: function () { return e._setInterstitialState(i.OPENED) }, onSkip: function () { return e._setInterstitialState(i.CLOSED) }, onError: function () { return e._setInterstitialState(i.FAILED) } } }), e } return r = d, (n = [{ key: "platformId", get: function () { return e.TELEGRAM } }, { key: "platformLanguage", get: function () { return this._platformSdk ? this._platformSdk.initDataUnsafe.user.language_code : Ii(ji(d.prototype), "platformLanguage", this) } }, { key: "deviceType", get: function () { switch (Mi(this, Ui)) { case "android": case "android_x": case "ios": return l.MOBILE; case "tdesktop": case "unigram": case "macos": return l.DESKTOP; default: return Ii(ji(d.prototype), "deviceType", this) } } }, { key: "isPlayerAuthorizationSupported", get: function () { return !0 } }, { key: "initialize", value: function () { var e = this; if (this._isInitialized) return Promise.resolve(); var t = this._getPromiseDecorator(p.INITIALIZE); return t || (t = this._createPromiseDecorator(p.INITIALIZE), fr("https://telegram.org/js/telegram-web-app.js").then((function () { e._platformSdk = window.Telegram.WebApp; var t = e._platformSdk.initDataUnsafe.user; e._playerId = t.id, e._playerName = [t.first_name, t.last_name].filter(Boolean).join(" "), e._playerPhotos = [t.photo_url], Gi(e, Ui, e._platformSdk.platform), e._isInitialized = !0, e._options && e._options.adsgramBlockId ? fr("https://sad.adsgram.ai/js/sad.min.js").then((function () { Gi(e, Hi, window.Adsgram.init({ blockId: e._options.adsgramBlockId })) })).finally((function () { e._resolvePromiseDecorator(p.INITIALIZE) })) : e._resolvePromiseDecorator(p.INITIALIZE) }))), t.promise } }, { key: "sendMessage", value: function (e) { return e === f.GAME_READY ? (this._platformSdk.ready(), Promise.resolve()) : Ii(ji(d.prototype), "sendMessage", this).call(this, e) } }, { key: "isStorageSupported", value: function (e) { return e === c.PLATFORM_INTERNAL || Ii(ji(d.prototype), "isStorageSupported", this).call(this, e) } }, { key: "isStorageAvailable", value: function (e) { return e === c.PLATFORM_INTERNAL || Ii(ji(d.prototype), "isStorageAvailable", this).call(this, e) } }, { key: "getDataFromStorage", value: function (e, t, r) { var n = this; return t === c.PLATFORM_INTERNAL ? new Promise((function (t, o) { Array.isArray(e) ? n._platformSdk.CloudStorage.getItems(e, (function (n, i) { if (n) o(n); else { var a = []; e.forEach((function (e) { var t = i[e]; if (r && "string" == typeof t) try { t = JSON.parse(t) } catch (e) { } a.push(t) })), t(a) } })) : n._platformSdk.CloudStorage.getItem(e, (function (e, n) { e && o(e); var i = n; if (r && "string" == typeof i) try { i = JSON.parse(i) } catch (e) { } t(i) })) })) : Ii(ji(d.prototype), "getDataFromStorage", this).call(this, e, t) } }, { key: "setDataToStorage", value: function (e, t, r) { var n = this; return r === c.PLATFORM_INTERNAL ? new Promise((function (r) { var o = Array.isArray(e) ? e : [e], i = (Array.isArray(t) ? t : [t]).map((function (e) { return "string" != typeof e ? JSON.stringify(e) : e })); o.forEach((function (e, t) { return n._platformSdk.CloudStorage.setItem(e, i[t]) })), r() })) : Ii(ji(d.prototype), "setDataToStorage", this).call(this, e, t, r) } }, { key: "deleteDataFromStorage", value: function (e, t) { var r = this; return t === c.PLATFORM_INTERNAL ? new Promise((function (t) { (Array.isArray(e) ? e : [e]).forEach((function (e) { return r._platformSdk.CloudStorage.removeItem(e) })), t() })) : Ii(ji(d.prototype), "deleteDataFromStorage", this).call(this, e, t) } }, { key: "showInterstitial", value: function () { var e = this; Mi(this, Hi) ? (Mi(this, Hi).addEventListener("onStart", Mi(this, Wi).onStart), Mi(this, Hi).addEventListener("onSkip", Mi(this, Wi).onSkip), Mi(this, Hi).addEventListener("onError", Mi(this, Wi).onError), Mi(this, Hi).addEventListener("onBannerNotFound", Mi(this, Wi).onError), Mi(this, Hi).show().finally((function () { Mi(e, Hi).removeEventListener("onStart", Mi(e, Wi).onStart), Mi(e, Hi).removeEventListener("onSkip", Mi(e, Wi).onSkip), Mi(e, Hi).removeEventListener("onError", Mi(e, Wi).onError), Mi(e, Hi).removeEventListener("onBannerNotFound", Mi(e, Wi).onError) }))) : this._setInterstitialState(i.FAILED) } }, { key: "showRewarded", value: function () { var e = this; Mi(this, Hi) ? (Mi(this, Hi).addEventListener("onStart", Mi(this, zi).onStart), Mi(this, Hi).addEventListener("onSkip", Mi(this, zi).onSkip), Mi(this, Hi).addEventListener("onReward", Mi(this, zi).onReward), Mi(this, Hi).addEventListener("onError", Mi(this, zi).onError), Mi(this, Hi).addEventListener("onBannerNotFound", Mi(this, zi).onError), Mi(this, Hi).show().finally((function () { Mi(e, Hi).addEventListener("onStart", Mi(e, zi).onStart), Mi(e, Hi).addEventListener("onSkip", Mi(e, zi).onSkip), Mi(e, Hi).addEventListener("onReward", Mi(e, zi).onReward), Mi(e, Hi).addEventListener("onError", Mi(e, zi).onError), Mi(e, Hi).addEventListener("onBannerNotFound", Mi(e, zi).onError) }))) : this._setRewardedState(a.FAILED) } }, { key: "clipboardRead", value: function () { var e = this, t = this._getPromiseDecorator(p.CLIPBOARD_READ); return t || (t = this._createPromiseDecorator(p.CLIPBOARD_READ), this._platformSdk.readTextFromClipboard((function (t) { t ? e._resolvePromiseDecorator(p.CLIPBOARD_READ, t) : e._rejectPromiseDecorator(p.CLIPBOARD_READ) }))), t.promise } }]) && Ri(r.prototype, n), Object.defineProperty(r, "prototype", { writable: !1 }), d }(lr); var Vi = ["player"]; function Yi(e, t) { var r = Object.keys(e); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(e); t && (n = n.filter((function (t) { return Object.getOwnPropertyDescriptor(e, t).enumerable }))), r.push.apply(r, n) } return r } function Zi(e) { for (var t = 1; t < arguments.length; t++) { var r = null != arguments[t] ? arguments[t] : {}; t % 2 ? Yi(Object(r), !0).forEach((function (t) { var n, o, i; n = e, o = t, i = r[t], (o = qi(o)) in n ? Object.defineProperty(n, o, { value: i, enumerable: !0, configurable: !0, writable: !0 }) : n[o] = i })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(r)) : Yi(Object(r)).forEach((function (t) { Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(r, t)) })) } return e } function Ki(e) { return Ki = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e }, Ki(e) } function Ji(e, t) { for (var r = 0; r < t.length; r++) { var n = t[r]; n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, qi(n.key), n) } } function qi(e) { var t = function (e, t) { if ("object" != Ki(e) || !e) return e; var r = e[Symbol.toPrimitive]; if (void 0 !== r) { var n = r.call(e, "string"); if ("object" != Ki(n)) return n; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(e) }(e); return "symbol" == Ki(t) ? t : String(t) } function Xi() { return Xi = "undefined" != typeof Reflect && Reflect.get ? Reflect.get.bind() : function (e, t, r) { var n = function (e, t) { for (; !Object.prototype.hasOwnProperty.call(e, t) && null !== (e = ea(e));); return e }(e, t); if (n) { var o = Object.getOwnPropertyDescriptor(n, t); return o.get ? o.get.call(arguments.length < 3 ? e : r) : o.value } }, Xi.apply(this, arguments) } function Qi(e, t) { return Qi = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) { return e.__proto__ = t, e }, Qi(e, t) } function $i(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e } function ea(e) { return ea = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (e) { return e.__proto__ || Object.getPrototypeOf(e) }, ea(e) } function ta(e, t) { !function (e, t) { if (t.has(e)) throw new TypeError("Cannot initialize the same private elements twice on an object") }(e, t), t.add(e) } function ra(e, t, r) { if (!t.has(e)) throw new TypeError("attempted to get private field on non-instance"); return r } var na = "userData", oa = "6129580795478709", ia = new WeakSet, aa = new WeakSet; function sa() { var e = this; return new Promise((function (t, r) { e._platformStorageCachedData ? t(e._platformStorageCachedData) : e._platformSdk.api("user_data/retrieve", "POST", { key: na }, (function (n) { n.error && "Key not found" !== n.error && r(n); var o = {}; try { n.jsondata && (o = JSON.parse(n.jsondata)) } catch (e) { } e._platformStorageCachedData = o, t(o) })) })) } function ua(e) { if ("ok" === e.status) { this._isPlayerAuthorized = !0, this._defaultStorageType = c.PLATFORM_INTERNAL; var t = e.authResponse.details, r = t.pid, n = t.locale, o = t.nickname, i = t.first_name, a = t.last_name, s = t.avatars; r && (this._playerId = r), this._platformLanguage = n, this._playerName = [i, a].filter((function (e) { return !!e })).join(" ") || o, this._playerPhotos = []; var u = s.thumb_url, l = s.medium_url, f = s.large_url; u && this._playerPhotos.push(u), l && this._playerPhotos.push(l), f && this._playerPhotos.push(f) } } const ca = function (t) { !function (e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function"); e.prototype = Object.create(t && t.prototype, { constructor: { value: e, writable: !0, configurable: !0 } }), Object.defineProperty(e, "prototype", { writable: !1 }), t && Qi(e, t) }(l, t); var r, n, o, s, u = (o = l, s = function () { if ("undefined" == typeof Reflect || !Reflect.construct) return !1; if (Reflect.construct.sham) return !1; if ("function" == typeof Proxy) return !0; try { return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function () { }))), !0 } catch (e) { return !1 } }(), function () { var e, t = ea(o); if (s) { var r = ea(this).constructor; e = Reflect.construct(t, arguments, r) } else e = t.apply(this, arguments); return function (e, t) { if (t && ("object" === Ki(t) || "function" == typeof t)) return t; if (void 0 !== t) throw new TypeError("Derived constructors may only return object or undefined"); return $i(e) }(this, e) }); function l() { var e; !function (e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, l); for (var t = arguments.length, r = new Array(t), n = 0; n < t; n++)r[n] = arguments[n]; return ta($i(e = u.call.apply(u, [this].concat(r))), aa), ta($i(e), ia), e } return r = l, (n = [{ key: "platformId", get: function () { return e.Y8 } }, { key: "isPlayerAuthorizationSupported", get: function () { return !0 } }, { key: "isLeaderboardSupported", get: function () { return !0 } }, { key: "isLeaderboardNativePopupSupported", get: function () { return !0 } }, { key: "isLeaderboardMultipleBoardsSupported", get: function () { return !0 } }, { key: "isLeaderboardSetScoreSupported", get: function () { return !0 } }, { key: "isLeaderboardGetScoreSupported", get: function () { return !0 } }, { key: "isLeaderboardGetEntriesSupported", get: function () { return !0 } }, { key: "isAchievementsSupported", get: function () { return !0 } }, { key: "isGetAchievementsListSupported", get: function () { return !0 } }, { key: "isAchievementsNativePopupSupported", get: function () { return !0 } }, { key: "initialize", value: function () { var e = this; if (this._isInitialized) return Promise.resolve(); var t, r = this._getPromiseDecorator(p.INITIALIZE); return r || (r = this._createPromiseDecorator(p.INITIALIZE), null !== (t = this._options) && void 0 !== t && t.gameId ? fr("https://cdn.y8.com/api/sdk.js").then((function () { dr("ID").then((function () { e._platformSdk = window.ID, e._platformSdk.Event.subscribe("id.init", (function () { var t, r, n, o, i, a; (t = { hostId: "ca-host-pub-".concat(oa), adsenseId: e._options.channelId ? "ca-pub-".concat(oa) : e._options.adsenseId, channelId: e._options.channelId }, r = t.hostId, n = t.adsenseId, o = t.channelId, i = t.adFrequencyHint, a = void 0 === i ? "180s" : i, new Promise((function (e) { var t = document.createElement("script"); t.setAttribute("data-ad-client", n), o ? t.setAttribute("data-ad-channel", o) : r && t.setAttribute("data-ad-host", r), t.setAttribute("data-ad-frequency-hint", a), t.src = "https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js", t.addEventListener("load", e), document.head.appendChild(t) }))).then((function () { e._showAd = function (e) { window.adsbygoogle.push(e) }, window.adsbygoogle.push({ preloadAdBreaks: "on", sound: "on", onReady: function () { } }) })), e._platformSdk.getLoginStatus((function (t) { ra(e, aa, ua).call(e, t), e._isInitialized = !0, e._resolvePromiseDecorator(p.INITIALIZE) })) })), e._platformSdk.init({ appId: e._options.gameId }) })) })) : this._rejectPromiseDecorator(p.INITIALIZE, v)), r.promise } }, { key: "authorizePlayer", value: function () { var e = this; return this._isPlayerAuthorized ? Promise.resolve() : new Promise((function (t, r) { e._platformSdk.login((function (n) { ra(e, aa, ua).call(e, n), "ok" === n.status ? (e._platformStorageCachedData = null, t()) : r() })) })) } }, { key: "isStorageSupported", value: function (e) { return e === c.PLATFORM_INTERNAL || Xi(ea(l.prototype), "isStorageSupported", this).call(this, e) } }, { key: "isStorageAvailable", value: function (e) { return e === c.PLATFORM_INTERNAL ? this._isPlayerAuthorized : Xi(ea(l.prototype), "isStorageAvailable", this).call(this, e) } }, { key: "getDataFromStorage", value: function (e, t, r) { var n = this; return t === c.PLATFORM_INTERNAL ? new Promise((function (t, o) { ra(n, ia, sa).call(n).then((function (n) { var o = (Array.isArray(e) ? e : [e]).map((function (e) { var t = n[e]; return r || "object" !== Ki(t) || null === t ? null != t ? t : null : JSON.stringify(t) })); t(o) })).catch(o) })) : Xi(ea(l.prototype), "getDataFromStorage", this).call(this, e, t, r) } }, { key: "setDataToStorage", value: function (e, t, r) { var n = this; return r === c.PLATFORM_INTERNAL ? new Promise((function (r, o) { ra(n, ia, sa).call(n).then((function (i) { var a = Zi({}, i); if (Array.isArray(e)) for (var s = 0; s < e.length; s++)a[e[s]] = t[s]; else a[e] = t; n._platformSdk.api("user_data/submit", "POST", { key: na, value: JSON.stringify(a) }, (function (e) { "ok" === e.status ? (n._platformStorageCachedData = a, r()) : o(e) })) })).catch(o) })) : Xi(ea(l.prototype), "setDataToStorage", this).call(this, e, t, r) } }, { key: "deleteDataFromStorage", value: function (e, t) { var r = this; return t === c.PLATFORM_INTERNAL ? new Promise((function (t, n) { ra(r, ia, sa).call(r).then((function (o) { var i = Zi({}, o); if (Array.isArray(e)) for (var a = 0; a < e.length; a++)delete i[e[a]]; else delete i[e]; r._platformSdk.api("user_data/submit", "POST", { key: na, value: JSON.stringify(i) }, (function (e) { "ok" === e.status ? (r._platformStorageCachedData = i, t()) : n(e) })) })).catch(n) })) : Xi(ea(l.prototype), "deleteDataFromStorage", this).call(this, e, t) } }, { key: "showInterstitial", value: function () { var e = this; this._showAd ? this._showAd({ type: "start", name: "start-game", beforeAd: function () { e._setInterstitialState(i.OPENED) }, afterAd: function () { e.interstitialState !== i.FAILED && e._setInterstitialState(i.CLOSED) }, adBreakDone: function (t) { "viewed" !== t.breakStatus && e._setInterstitialState(i.FAILED) } }) : this._setInterstitialState(i.FAILED) } }, { key: "showRewarded", value: function () { var e = this; this._showAd ? this._showAd({ type: "reward", name: "rewarded Ad", beforeAd: function () { e._setRewardedState(a.OPENED) }, afterAd: function () { e.rewardedState !== a.FAILED && e._setRewardedState(a.CLOSED) }, beforeReward: function (e) { e(0) }, adDismissed: function () { e._setRewardedState(a.FAILED) }, adViewed: function () { e._setRewardedState(a.REWARDED) }, adBreakDone: function (t) { "frequencyCapped" !== t.breakStatus && "other" !== t.breakStatus || e._setRewardedState(a.FAILED) } }) : this._setRewardedState(a.FAILED) } }, { key: "showLeaderboardNativePopup", value: function (e) { return this._isPlayerAuthorized ? e && e.table ? (this._platformSdk.GameAPI.Leaderboards.list(e), Promise.resolve()) : Promise.reject(new Error("`table` property is not provided")) : Promise.reject() } }, { key: "setLeaderboardScore", value: function (e) { var t = this; if (!this._isPlayerAuthorized) return Promise.reject(); if (!e || !e.points || !e.table) return Promise.reject(new Error("`table` or `points` property is not provided")); var r = this._getPromiseDecorator(p.SET_LEADERBOARD_SCORE); return r || (r = this._createPromiseDecorator(p.SET_LEADERBOARD_SCORE), this._platformSdk.GameAPI.Leaderboards.save(e, (function (e) { var r = e.success, n = e.errormessage; r ? t._resolvePromiseDecorator(p.SET_LEADERBOARD_SCORE) : t._rejectPromiseDecorator(p.SET_LEADERBOARD_SCORE, n) }))), r.promise } }, { key: "getLeaderboardScore", value: function (e) { var t = this; if (!this._isPlayerAuthorized) return Promise.reject(); if (!e || !e.table) return Promise.reject(new Error("`table` property is not provided")); var r = this._getPromiseDecorator(p.GET_LEADERBOARD_SCORE); return r || (r = this._createPromiseDecorator(p.GET_LEADERBOARD_SCORE), this._platformSdk.GameAPI.Leaderboards.listCustom(Zi(Zi({}, e), {}, { playerid: this.playerId }), (function (e) { var r = e.scores, n = e.success, o = e.errormessage; n ? t._resolvePromiseDecorator(p.GET_LEADERBOARD_SCORE, r[0]) : t._rejectPromiseDecorator(p.GET_LEADERBOARD_SCORE, o) }))), r.promise } }, { key: "getLeaderboardEntries", value: function (e) { var t = this; if (!this._isPlayerAuthorized) return Promise.reject(); if (!e || !e.table) return Promise.reject(new Error("`table` property is not provided")); var r = this._getPromiseDecorator(p.GET_LEADERBOARD_ENTRIES); return r || (r = this._createPromiseDecorator(p.GET_LEADERBOARD_ENTRIES), this._platformSdk.GameAPI.Leaderboards.listCustom(e, (function (e) { var r = e.scores, n = e.success, o = e.errormessage; n ? t._resolvePromiseDecorator(p.GET_LEADERBOARD_ENTRIES, r) : t._rejectPromiseDecorator(p.GET_LEADERBOARD_ENTRIES, o) }))), r.promise } }, { key: "unlockAchievement", value: function (e) { var t = this; return this._isPlayerAuthorized && e.achievement && e.achievementkey ? new Promise((function (r) { t._platformSdk.GameAPI.Achievements.save(e, (function (e) { r(e) })) })) : Promise.reject() } }, { key: "getAchievementsList", value: function (e) { var t = this; return new Promise((function (r, n) { t._platformSdk.GameAPI.Achievements.listCustom(e, (function (e) { e.success ? r(e.achievements.map((function (e) { var t = e.player; return Zi(Zi({}, function (e, t) { if (null == e) return {}; var r, n, o = function (e, t) { if (null == e) return {}; var r, n, o = {}, i = Object.keys(e); for (n = 0; n < i.length; n++)r = i[n], t.indexOf(r) >= 0 || (o[r] = e[r]); return o }(e, t); if (Object.getOwnPropertySymbols) { var i = Object.getOwnPropertySymbols(e); for (n = 0; n < i.length; n++)r = i[n], t.indexOf(r) >= 0 || Object.prototype.propertyIsEnumerable.call(e, r) && (o[r] = e[r]) } return o }(e, Vi)), {}, { playerid: t.playerid, playername: t.playername, lastupdated: t.lastupdated, date: t.date, rdate: t.rdate }) }))) : n(new Error(e.errorcode)) })) })) } }, { key: "showAchievementsNativePopup", value: function (e) { return this._platformSdk.GameAPI.Achievements.list(e), Promise.resolve() } }]) && Ji(r.prototype, n), Object.defineProperty(r, "prototype", { writable: !1 }), l }(lr); function la(e) { return la = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e }, la(e) } function fa(e, t) { for (var r = 0; r < t.length; r++) { var n = t[r]; n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, pa(n.key), n) } } function pa(e) { var t = function (e, t) { if ("object" != la(e) || !e) return e; var r = e[Symbol.toPrimitive]; if (void 0 !== r) { var n = r.call(e, "string"); if ("object" != la(n)) return n; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(e) }(e); return "symbol" == la(t) ? t : String(t) } function da() { return da = "undefined" != typeof Reflect && Reflect.get ? Reflect.get.bind() : function (e, t, r) { var n = function (e, t) { for (; !Object.prototype.hasOwnProperty.call(e, t) && null !== (e = ya(e));); return e }(e, t); if (n) { var o = Object.getOwnPropertyDescriptor(n, t); return o.get ? o.get.call(arguments.length < 3 ? e : r) : o.value } }, da.apply(this, arguments) } function ha(e, t) { return ha = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) { return e.__proto__ = t, e }, ha(e, t) } function ya(e) { return ya = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (e) { return e.__proto__ || Object.getPrototypeOf(e) }, ya(e) } const ma = function (t) { !function (e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function"); e.prototype = Object.create(t && t.prototype, { constructor: { value: e, writable: !0, configurable: !0 } }), Object.defineProperty(e, "prototype", { writable: !1 }), t && ha(e, t) }(l, t); var r, n, o, s, u = (o = l, s = function () { if ("undefined" == typeof Reflect || !Reflect.construct) return !1; if (Reflect.construct.sham) return !1; if ("function" == typeof Proxy) return !0; try { return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function () { }))), !0 } catch (e) { return !1 } }(), function () { var e, t = ya(o); if (s) { var r = ya(this).constructor; e = Reflect.construct(t, arguments, r) } else e = t.apply(this, arguments); return function (e, t) { if (t && ("object" === la(t) || "function" == typeof t)) return t; if (void 0 !== t) throw new TypeError("Derived constructors may only return object or undefined"); return function (e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e }(e) }(this, e) }); function l() { return function (e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, l), u.apply(this, arguments) } return r = l, (n = [{ key: "platformId", get: function () { return e.LAGGED } }, { key: "isLeaderboardSupported", get: function () { return !0 } }, { key: "isLeaderboardSetScoreSupported", get: function () { return !0 } }, { key: "isAchievementsSupported", get: function () { return !0 } }, { key: "initialize", value: function () { var e = this; if (this._isInitialized) return Promise.resolve(); var t = this._getPromiseDecorator(p.INITIALIZE); return t || (t = this._createPromiseDecorator(p.INITIALIZE), this._options && this._options.devId && this._options.publisherId ? fr("https://lagged.com/api/rev-share/lagged.js").then((function () { dr("LaggedAPI").then((function () { e._platformSdk = window.LaggedAPI, e._platformSdk.init(e._options.devId, e._options.publisherId), e._platformSdk.User.get((function (t) { var r, n = null !== (r = null == t ? void 0 : t.user) && void 0 !== r ? r : {}, o = n.id, i = n.name, a = n.avatar; o > 0 && (e._playerId = o, e._playerName = i, e._playerPhotos.push(a), e._isPlayerAuthorized = !0), e._isInitialized = !0, e._resolvePromiseDecorator(p.INITIALIZE) })) })) })) : this._rejectPromiseDecorator(p.INITIALIZE, g)), t.promise } }, { key: "isStorageSupported", value: function (e) { return e !== c.PLATFORM_INTERNAL && da(ya(l.prototype), "isStorageSupported", this).call(this, e) } }, { key: "isStorageAvailable", value: function (e) { return e !== c.PLATFORM_INTERNAL && da(ya(l.prototype), "isStorageAvailable", this).call(this, e) } }, { key: "showInterstitial", value: function () { var e = this; this._setInterstitialState(i.OPENED), this._platformSdk.APIAds.show((function () { e._setInterstitialState(i.CLOSED) })) } }, { key: "showRewarded", value: function () { var e = this; this._setRewardedState(a.OPENED), this._platformSdk.GEvents.reward((function (t, r) { t ? r() : e._setRewardedState(a.FAILED) }), (function (t) { t ? (e._setRewardedState(a.REWARDED), e._setRewardedState(a.CLOSED)) : e._setRewardedState(a.FAILED) })) } }, { key: "setLeaderboardScore", value: function (e) { var t = this; if (!this._isPlayerAuthorized) return Promise.reject(); if (void 0 === (null == e ? void 0 : e.score) || null == e || !e.boardId) return Promise.reject(); var r = this._getPromiseDecorator(p.SET_LEADERBOARD_SCORE); if (!r) { r = this._createPromiseDecorator(p.SET_LEADERBOARD_SCORE); var n = { score: "string" == typeof e.score ? parseInt(e.score, 10) : e.score, board: e.boardId }; this._platformSdk.Scores.save(n, (function (e) { e.success ? t._resolvePromiseDecorator(p.SET_LEADERBOARD_SCORE) : t._rejectPromiseDecorator(p.SET_LEADERBOARD_SCORE, e.errormsg) })) } return r.promise } }, { key: "unlockAchievement", value: function (e) { var t = this; return e.achievement ? new Promise((function (r, n) { t._platformSdk.Achievements.save(Array.isArray(e.achievement) ? e.achievement : [e.achievement], (function (e) { e.success ? r(e) : n(e.errormsg) })) })) : Promise.reject() } }]) && fa(r.prototype, n), Object.defineProperty(r, "prototype", { writable: !1 }), l }(lr); function va(e, t) { var r = Object.keys(e); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(e); t && (n = n.filter((function (t) { return Object.getOwnPropertyDescriptor(e, t).enumerable }))), r.push.apply(r, n) } return r } function _a(e) { for (var t = 1; t < arguments.length; t++) { var r = null != arguments[t] ? arguments[t] : {}; t % 2 ? va(Object(r), !0).forEach((function (t) { Oa(e, t, r[t]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(r)) : va(Object(r)).forEach((function (t) { Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(r, t)) })) } return e } function ga(e) { return ga = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e }, ga(e) } function Sa(e, t) { for (var r = 0; r < t.length; r++) { var n = t[r]; n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, Da(n.key), n) } } function ba() { return ba = "undefined" != typeof Reflect && Reflect.get ? Reflect.get.bind() : function (e, t, r) { var n = function (e, t) { for (; !Object.prototype.hasOwnProperty.call(e, t) && null !== (e = Aa(e));); return e }(e, t); if (n) { var o = Object.getOwnPropertyDescriptor(n, t); return o.get ? o.get.call(arguments.length < 3 ? e : r) : o.value } }, ba.apply(this, arguments) } function Pa(e, t) { return Pa = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) { return e.__proto__ = t, e }, Pa(e, t) } function Ea(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e } function Aa(e) { return Aa = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (e) { return e.__proto__ || Object.getPrototypeOf(e) }, Aa(e) } function wa(e, t) { !function (e, t) { if (t.has(e)) throw new TypeError("Cannot initialize the same private elements twice on an object") }(e, t), t.add(e) } function Oa(e, t, r) { return (t = Da(t)) in e ? Object.defineProperty(e, t, { value: r, enumerable: !0, configurable: !0, writable: !0 }) : e[t] = r, e } function Da(e) { var t = function (e, t) { if ("object" != ga(e) || !e) return e; var r = e[Symbol.toPrimitive]; if (void 0 !== r) { var n = r.call(e, "string"); if ("object" != ga(n)) return n; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(e) }(e); return "symbol" == ga(t) ? t : String(t) } function ka(e, t, r) { if (!t.has(e)) throw new TypeError("attempted to get private field on non-instance"); return r } var Ra = new WeakSet, Ia = new WeakSet; function Ta(e) { var t = this; if (!(arguments.length > 1 && void 0 !== arguments[1] && arguments[1]) && this._preloadedInterstitialPromises[e]) return this._preloadedInterstitialPromises[e]; var r = null; return this._preloadedInterstitialPromises[e] = this._platformSdk.getInterstitialAdAsync(e).then((function (e) { return r = e, e.loadAsync() })).then((function () { return r })).catch((function () { return t._preloadedInterstitialPromises[e] = null, Promise.reject() })), this._preloadedInterstitialPromises[e] } function La(e) { var t = this; if (!(arguments.length > 1 && void 0 !== arguments[1] && arguments[1]) && this._preloadedRewardedPromises[e]) return this._preloadedRewardedPromises[e]; var r = null; return this._preloadedRewardedPromises[e] = this._platformSdk.getRewardedVideoAsync(e).then((function (e) { return r = e, e.loadAsync() })).then((function () { return r })).catch((function () { return t._preloadedRewardedPromises[e] = null, Promise.reject() })), this._preloadedRewardedPromises[e] } const ja = function (t) { !function (e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function"); e.prototype = Object.create(t && t.prototype, { constructor: { value: e, writable: !0, configurable: !0 } }), Object.defineProperty(e, "prototype", { writable: !1 }), t && Pa(e, t) }(h, t); var r, n, o, u, d = (o = h, u = function () { if ("undefined" == typeof Reflect || !Reflect.construct) return !1; if (Reflect.construct.sham) return !1; if ("function" == typeof Proxy) return !0; try { return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function () { }))), !0 } catch (e) { return !1 } }(), function () { var e, t = Aa(o); if (u) { var r = Aa(this).constructor; e = Reflect.construct(t, arguments, r) } else e = t.apply(this, arguments); return function (e, t) { if (t && ("object" === ga(t) || "function" == typeof t)) return t; if (void 0 !== t) throw new TypeError("Derived constructors may only return object or undefined"); return Ea(e) }(this, e) }); function h() { var e; !function (e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, h); for (var t = arguments.length, r = new Array(t), n = 0; n < t; n++)r[n] = arguments[n]; return wa(Ea(e = d.call.apply(d, [this].concat(r))), Ia), wa(Ea(e), Ra), Oa(Ea(e), "_contextId", null), Oa(Ea(e), "_isPlayerAuthorized", !0), Oa(Ea(e), "_supportedApis", []), Oa(Ea(e), "_preloadedInterstitialPromises", {}), Oa(Ea(e), "_preloadedRewardedPromises", {}), Oa(Ea(e), "_defaultStorageType", c.PLATFORM_INTERNAL), e } return r = h, n = [{ key: "platformId", get: function () { return e.FACEBOOK } }, { key: "platformLanguage", get: function () { return this._platformLanguage } }, { key: "deviceType", get: function () { switch (this._platformSdk && this._platformSdk.getPlatform()) { case "IOS": case "MOBILE_WEB": case "ANDROID": return l.MOBILE; case "WEB": return l.DESKTOP; default: return ba(Aa(h.prototype), "deviceType", this) } } }, { key: "isPlayerAuthorizationSupported", get: function () { return !0 } }, { key: "isPlayerAuthorized", get: function () { return this._isPlayerAuthorized } }, { key: "isBannerSupported", get: function () { return !0 } }, { key: "isLeaderboardSupported", get: function () { return this._supportedApis.includes("getLeaderboardAsync") } }, { key: "isLeaderboardMultipleBoardsSupported", get: function () { return this._supportedApis.includes("getLeaderboardAsync") } }, { key: "isLeaderboardSetScoreSupported", get: function () { return this._supportedApis.includes("getLeaderboardAsync") } }, { key: "isLeaderboardGetScoreSupported", get: function () { return this._supportedApis.includes("getLeaderboardAsync") } }, { key: "isLeaderboardGetEntriesSupported", get: function () { return this._supportedApis.includes("getLeaderboardAsync") } }, { key: "isPaymentsSupported", get: function () { return this._supportedApis.includes("payments.purchaseAsync") } }, { key: "isInviteFriendsSupported", get: function () { return this._supportedApis.includes("inviteAsync") } }, { key: "isShareSupported", get: function () { return this._supportedApis.includes("shareAsync") } }, { key: "initialize", value: function () { var e = this; if (this._isInitialized) return Promise.resolve(); var t = this._getPromiseDecorator(p.INITIALIZE); return t || (t = this._createPromiseDecorator(p.INITIALIZE), fr("https://connect.facebook.net/en_US/fbinstant.8.0.js").then((function () { return dr("FBInstant") })).then((function () { return e._platformSdk = window.FBInstant, e._platformSdk.initializeAsync() })).then((function () { e._playerId = e._platformSdk.player.getID(), e._contextId = e._platformSdk.context.getID(); var t = e._platformSdk.getLocale(); t && t.length > 2 && (e._platformLanguage = t.substring(0, 2).toLowerCase()), e._supportedApis = e._platformSdk.getSupportedAPIs(), e._isInitialized = !0, e._resolvePromiseDecorator(p.INITIALIZE) })).catch((function (t) { return e._rejectPromiseDecorator(p.INITIALIZE, t) }))), t.promise } }, { key: "sendMessage", value: function (e) { var t = this; return e === f.GAME_READY ? (this._platformSdk.setLoadingProgress(100), new Promise((function (e) { t._platformSdk.startGameAsync().then(e) }))) : ba(Aa(h.prototype), "sendMessage", this).call(this, e) } }, { key: "authorizePlayer", value: function () { return Promise.resolve() } }, { key: "isStorageSupported", value: function (e) { return e === c.PLATFORM_INTERNAL ? this._supportedApis.includes("getDataAsync") : ba(Aa(h.prototype), "isStorageSupported", this).call(this, e) } }, { key: "isStorageAvailable", value: function (e) { return e === c.PLATFORM_INTERNAL ? this._isPlayerAuthorized : ba(Aa(h.prototype), "isStorageAvailable", this).call(this, e) } }, { key: "getDataFromStorage", value: function (e, t, r) { var n = this; return t === c.PLATFORM_INTERNAL ? new Promise((function (t, o) { var i = Array.isArray(e) ? e : [e]; n._platformSdk.player.getDataAsync(i).then((function (e) { var n = i.map((function (t) { var n = e[t]; return r || "object" !== ga(n) || null === n ? null != n ? n : null : JSON.stringify(n) })); t(n) })).catch(o) })) : ba(Aa(h.prototype), "getDataFromStorage", this).call(this, e, t, r) } }, { key: "setDataToStorage", value: function (e, t, r) { var n = this; return r === c.PLATFORM_INTERNAL ? new Promise((function (r, o) { var i = {}; if (Array.isArray(e)) for (var a = 0; a < e.length; a++)i[e[a]] = t[a]; else i[e] = t; n._platformSdk.player.setDataAsync(i).then(r).catch(o) })) : ba(Aa(h.prototype), "setDataToStorage", this).call(this, e, t, r) } }, { key: "deleteDataFromStorage", value: function (e, t) { var r = this; return t === c.PLATFORM_INTERNAL ? new Promise((function (t, n) { var o = {}; if (Array.isArray(e)) for (var i = 0; i < e.length; i++)o[e[i]] = null; else o[e] = null; r._platformSdk.player.setDataAsync(o).then(t).catch(n) })) : ba(Aa(h.prototype), "deleteDataFromStorage", this).call(this, e, t) } }, { key: "showBanner", value: function (e, t) { var r = this; this._platformSdk.loadBannerAdAsync(t, e).then((function () { r._setBannerState(s.SHOWN) })).catch((function () { r._setBannerState(s.FAILED) })) } }, { key: "hideBanner", value: function () { var e = this; this._platformSdk.hideBannerAdAsync().then((function () { e._setBannerState(s.HIDDEN) })).catch((function () { e._setBannerState(s.FAILED) })) } }, { key: "preloadInterstitial", value: function (e) { ka(this, Ra, Ta).call(this, e) } }, { key: "showInterstitial", value: function (e) { var t = this; ka(this, Ra, Ta).call(this, e).then((function (e) { return t._setInterstitialState(i.OPENED), e.showAsync() })).then((function () { t._setInterstitialState(i.CLOSED) })).catch((function () { t._setInterstitialState(i.FAILED) })).finally((function () { ka(t, Ra, Ta).call(t, e, !0) })) } }, { key: "preloadRewarded", value: function (e) { ka(this, Ia, La).call(this, e) } }, { key: "showRewarded", value: function (e) { var t = this; ka(this, Ia, La).call(this, e).then((function (e) { return t._setRewardedState(a.OPENED), e.showAsync() })).then((function () { t._setRewardedState(a.REWARDED), t._setRewardedState(a.CLOSED) })).catch((function () { t._setRewardedState(a.FAILED) })).finally((function () { ka(t, Ia, La).call(t, e, !0) })) } }, { key: "setLeaderboardScore", value: function (e) { var t = this; if (!this._isPlayerAuthorized) return Promise.reject(); if (!e || !e.score || !e.leaderboardName) return Promise.reject(); var r = this._getPromiseDecorator(p.SET_LEADERBOARD_SCORE); return r || (r = this._createPromiseDecorator(p.SET_LEADERBOARD_SCORE), this._platformSdk.getLeaderboardAsync(e.leaderboardName).then((function (t) { return t.setScoreAsync(e.score, e.extraData ? JSON.stringify(e.extraData) : null) })).then((function () { t._resolvePromiseDecorator(p.SET_LEADERBOARD_SCORE) })).catch((function (e) { t._rejectPromiseDecorator(p.SET_LEADERBOARD_SCORE, e) }))), r.promise } }, { key: "getLeaderboardScore", value: function (e) { var t = this; if (!this._isPlayerAuthorized) return Promise.reject(); if (!e || !e.leaderboardName) return Promise.reject(); var r = this._getPromiseDecorator(p.GET_LEADERBOARD_SCORE); return r || (r = this._createPromiseDecorator(p.GET_LEADERBOARD_SCORE), this._platformSdk.getLeaderboardAsync(e.leaderboardName).then((function (e) { return e.getPlayerEntryAsync() })).then((function (e) { t._resolvePromiseDecorator(p.GET_LEADERBOARD_SCORE, e.getScore()) })).catch((function (e) { t._rejectPromiseDecorator(p.GET_LEADERBOARD_SCORE, e) }))), r.promise } }, { key: "getLeaderboardEntries", value: function (e) { var t = this; if (!e || !e.leaderboardName) return Promise.reject(); var r = this._getPromiseDecorator(p.GET_LEADERBOARD_ENTRIES); if (!r) { var n, o; r = this._createPromiseDecorator(p.GET_LEADERBOARD_ENTRIES); var i = [null !== (n = e.count) && void 0 !== n ? n : 5, null !== (o = e.offset) && void 0 !== o ? o : 0]; this._platformSdk.getLeaderboardAsync(e.leaderboardName).then((function (e) { return e.getConnectedPlayerEntriesAsync.apply(e, i) })).then((function (e) { var r = null; e && e.entries.length > 0 && (r = e.entries.map((function (e) { return { rank: e.rank, score: e.score, format_score: e.format_score, ts: e.ts, extra_data: e.extra_data, playerId: e.player.player_id, playerName: e.player.name, playerPhoto: e.player.photo } }))), t._resolvePromiseDecorator(p.GET_LEADERBOARD_ENTRIES, r) })).catch((function (e) { t._rejectPromiseDecorator(p.GET_LEADERBOARD_ENTRIES, e) })) } return r.promise } }, { key: "paymentsPurchase", value: function (e) { var t = this, r = this._paymentsGetProductPlatformData(e); r || (r = { id: e }); var n = this._getPromiseDecorator(p.PURCHASE); return n || (n = this._createPromiseDecorator(p.PURCHASE), this._platformSdk.payments.purchaseAsync({ productID: r.id }).then((function (r) { var n = _a({ id: e }, r); delete n.productID, t._paymentsPurchases.push(n), t._resolvePromiseDecorator(p.PURCHASE, r) })).catch((function (e) { t._rejectPromiseDecorator(p.PURCHASE, e) }))), n.promise } }, { key: "paymentsConsumePurchase", value: function (e) { var t = this, r = this._paymentsPurchases.findIndex((function (t) { return t.id === e })); if (r < 0) return Promise.reject(); var n = this._getPromiseDecorator(p.CONSUME_PURCHASE); return n || (n = this._createPromiseDecorator(p.CONSUME_PURCHASE), this._platformSdk.payments.consumePurchaseAsync(this._paymentsPurchases[r].purchaseToken).then((function () { t._paymentsPurchases.splice(r, 1), t._resolvePromiseDecorator(p.CONSUME_PURCHASE, { id: e }) })).catch((function (e) { t._rejectPromiseDecorator(p.CONSUME_PURCHASE, e) }))), n.promise } }, { key: "paymentsGetCatalog", value: function () { var e = this, t = this._paymentsGetProductsPlatformData(); if (!t) return Promise.reject(); var r = this._getPromiseDecorator(p.GET_CATALOG); return r || (r = this._createPromiseDecorator(p.GET_CATALOG), this._platformSdk.payments.getCatalogAsync().then((function (r) { var n = t.map((function (e) { var t = r.find((function (t) { return t.productID === e.id })); return { id: e.id, title: t.title, description: t.description, imageURI: t.imageURI, price: t.price, priceCurrencyCode: t.priceCurrencyCode, priceValue: t.priceAmount } })); e._resolvePromiseDecorator(p.GET_CATALOG, n) })).catch((function (t) { e._rejectPromiseDecorator(p.GET_CATALOG, t) }))), r.promise } }, { key: "paymentsGetPurchases", value: function () { var e = this, t = this._getPromiseDecorator(p.GET_PURCHASES); return t || (t = this._createPromiseDecorator(p.GET_PURCHASES), this._platformSdk.payments.getPurchasesAsync().then((function (t) { var r = e._paymentsGetProductsPlatformData(); e._paymentsPurchases = t.map((function (e) { var t = _a({ id: r.find((function (t) { return t.id === e.productID })).id }, e); return delete t.productID, t })), e._resolvePromiseDecorator(p.GET_PURCHASES, e._paymentsPurchases) })).catch((function (t) { e._rejectPromiseDecorator(p.GET_PURCHASES, t) }))), t.promise } }, { key: "inviteFriends", value: function () { var e = this, t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}; if (!t.image || !t.text) return Promise.reject(); if (!hr(t.image)) return Promise.reject(new Error("Image is not base64")); var r = this._getPromiseDecorator(p.INVITE_FRIENDS); return r || (r = this._createPromiseDecorator(p.INVITE_FRIENDS), this._platformSdk.inviteAsync(t).then((function () { e._resolvePromiseDecorator(p.INVITE_FRIENDS) })).catch((function (t) { e._rejectPromiseDecorator(p.INVITE_FRIENDS, t) }))), r.promise } }, { key: "share", value: function (e) { var t = this; if (!e.image || !e.text) return Promise.reject(); if (!hr(e.image)) return Promise.reject(new Error("Image is not base64")); var r = this._getPromiseDecorator(p.SHARE); return r || (r = this._createPromiseDecorator(p.SHARE), this._platformSdk.shareAsync(e).then((function () { t._resolvePromiseDecorator(p.SHARE) })).catch((function (e) { t._rejectPromiseDecorator(p.SHARE, e) }))), r.promise } }], n && Sa(r.prototype, n), Object.defineProperty(r, "prototype", { writable: !1 }), h }(lr); function Na(e) { return Na = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e }, Na(e) } function Ca(e, t) { for (var r = 0; r < t.length; r++) { var n = t[r]; n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, Ba(n.key), n) } } function Ba(e) { var t = function (e, t) { if ("object" != Na(e) || !e) return e; var r = e[Symbol.toPrimitive]; if (void 0 !== r) { var n = r.call(e, "string"); if ("object" != Na(n)) return n; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(e) }(e); return "symbol" == Na(t) ? t : String(t) } var Ga, Ma = function () { function e() { !function (e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, e) } var t, r; return t = e, r = [{ key: "send", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "*"; window.parent && window.parent.postMessage(e, t) } }, { key: "addListener", value: function (e) { window.addEventListener("message", e) } }, { key: "removeListener", value: function (e) { window.removeEventListener("message", e) } }, { key: "generateMessageId", value: function () { return "".concat(Date.now(), "-").concat(Math.random()) } }], r && Ca(t.prototype, r), Object.defineProperty(t, "prototype", { writable: !1 }), e }(); function Fa(e, t) { var r = Object.keys(e); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(e); t && (n = n.filter((function (t) { return Object.getOwnPropertyDescriptor(e, t).enumerable }))), r.push.apply(r, n) } return r } function Ua(e) { for (var t = 1; t < arguments.length; t++) { var r = null != arguments[t] ? arguments[t] : {}; t % 2 ? Fa(Object(r), !0).forEach((function (t) { Ka(e, t, r[t]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(r)) : Fa(Object(r)).forEach((function (t) { Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(r, t)) })) } return e } function Ha(e) { return Ha = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e }, Ha(e) } function za(e, t) { for (var r = 0; r < t.length; r++) { var n = t[r]; n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, Ja(n.key), n) } } function Wa(e, t) { return Wa = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) { return e.__proto__ = t, e }, Wa(e, t) } function xa(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e } function Va(e, t) { Xa(e, t), t.add(e) } function Ya() { return Ya = "undefined" != typeof Reflect && Reflect.get ? Reflect.get.bind() : function (e, t, r) { var n = function (e, t) { for (; !Object.prototype.hasOwnProperty.call(e, t) && null !== (e = Za(e));); return e }(e, t); if (n) { var o = Object.getOwnPropertyDescriptor(n, t); return o.get ? o.get.call(arguments.length < 3 ? e : r) : o.value } }, Ya.apply(this, arguments) } function Za(e) { return Za = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (e) { return e.__proto__ || Object.getPrototypeOf(e) }, Za(e) } function Ka(e, t, r) { return (t = Ja(t)) in e ? Object.defineProperty(e, t, { value: r, enumerable: !0, configurable: !0, writable: !0 }) : e[t] = r, e } function Ja(e) { var t = function (e, t) { if ("object" != Ha(e) || !e) return e; var r = e[Symbol.toPrimitive]; if (void 0 !== r) { var n = r.call(e, "string"); if ("object" != Ha(n)) return n; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(e) }(e); return "symbol" == Ha(t) ? t : String(t) } function qa(e, t, r) { Xa(e, t), t.set(e, r) } function Xa(e, t) { if (t.has(e)) throw new TypeError("Cannot initialize the same private elements twice on an object") } function Qa(e, t) { var r = function (e, t, r) { if (!t.has(e)) throw new TypeError("attempted to get private field on non-instance"); return t.get(e) }(e, t); return function (e, t) { return t.get ? t.get.call(e) : t.value }(e, r) } function $a(e, t, r) { if (!t.has(e)) throw new TypeError("attempted to get private field on non-instance"); return r } var es = "banner", ts = "get_data_from_storage", rs = "get_server_time", ns = "clipboard_read", os = "unlock_achievement", is = "get_achievements", as = "get_performance_resources", ss = "isStorageInternalSupported", us = "isStorageLocalSupported", cs = new WeakMap, ls = new WeakMap, fs = new WeakSet, ps = new WeakSet, ds = function (r) { !function (e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function"); e.prototype = Object.create(t && t.prototype, { constructor: { value: e, writable: !0, configurable: !0 } }), Object.defineProperty(e, "prototype", { writable: !1 }), t && Wa(e, t) }(h, r); var n, o, u, l, d = (u = h, l = function () { if ("undefined" == typeof Reflect || !Reflect.construct) return !1; if (Reflect.construct.sham) return !1; if ("function" == typeof Proxy) return !0; try { return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function () { }))), !0 } catch (e) { return !1 } }(), function () { var e, t = Za(u); if (l) { var r = Za(this).constructor; e = Reflect.construct(t, arguments, r) } else e = t.apply(this, arguments); return function (e, t) { if (t && ("object" === Ha(t) || "function" == typeof t)) return t; if (void 0 !== t) throw new TypeError("Derived constructors may only return object or undefined"); return xa(e) }(this, e) }); function h() { var e; !function (e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, h); for (var t = arguments.length, r = new Array(t), n = 0; n < t; n++)r[n] = arguments[n]; return Va(xa(e = d.call.apply(d, [this].concat(r))), ps), Va(xa(e), fs), qa(xa(e), cs, { get: hs, set: void 0 }), qa(xa(e), ls, { writable: !0, value: new Ma }), Ka(xa(e), "_supportedFeatures", []), e } return n = h, (o = [{ key: "platformId", get: function () { return e.QA_TOOL } }, { key: "platformLanguage", get: function () { return this._platformLanguage } }, { key: "platformTld", get: function () { return this._platformTld } }, { key: "deviceType", get: function () { return this._deviceType } }, { key: "platformPayload", get: function () { return this._platformPayload } }, { key: "isPlayerAuthorizationSupported", get: function () { return this._supportedFeatures.includes("isPlayerAuthorizationSupported") } }, { key: "isPaymentsSupported", get: function () { return this._supportedFeatures.includes("isPaymentsSupported") } }, { key: "isRemoteConfigSupported", get: function () { return this._supportedFeatures.includes("isRemoteConfigSupported") } }, { key: "isInviteFriendsSupported", get: function () { return this._supportedFeatures.includes("isInviteFriendsSupported") } }, { key: "isJoinCommunitySupported", get: function () { return this._supportedFeatures.includes("isJoinCommunitySupported") } }, { key: "isShareSupported", get: function () { return this._supportedFeatures.includes("isShareSupported") } }, { key: "isCreatePostSupported", get: function () { return this._supportedFeatures.includes("isCreatePostSupported") } }, { key: "isAddToHomeScreenSupported", get: function () { return this._supportedFeatures.includes("isAddToHomeScreenSupported") } }, { key: "isAddToFavoritesSupported", get: function () { return this._supportedFeatures.includes("isAddToFavoritesSupported") } }, { key: "isRateSupported", get: function () { return this._supportedFeatures.includes("isRateSupported") } }, { key: "isLeaderboardSupported", get: function () { return this._supportedFeatures.includes("isLeaderboardSupported") } }, { key: "isLeaderboardMultipleBoardsSupported", get: function () { return this._supportedFeatures.includes("isLeaderboardMultipleBoardsSupported") } }, { key: "isLeaderboardSetScoreSupported", get: function () { return this._supportedFeatures.includes("isLeaderboardSetScoreSupported") } }, { key: "isLeaderboardGetScoreSupported", get: function () { return this._supportedFeatures.includes("isLeaderboardGetScoreSupported") } }, { key: "isLeaderboardGetEntriesSupported", get: function () { return this._supportedFeatures.includes("isLeaderboardGetEntriesSupported") } }, { key: "isLeaderboardNativePopupSupported", get: function () { return this._supportedFeatures.includes("isLeaderboardNativePopupSupported") } }, { key: "isClipboardSupported", get: function () { return this._supportedFeatures.includes("isClipboardSupported") } }, { key: "isAchievementsSupported", get: function () { return this._supportedFeatures.includes("isAchievementsSupported") } }, { key: "isGetAchievementsListSupported", get: function () { return this._supportedFeatures.includes("isGetAchievementsListSupported") } }, { key: "isAchievementsNativePopupSupported", get: function () { return this._supportedFeatures.includes("isAchievementsNativePopupSupported") } }, { key: "initialize", value: function () { var e = this; if (this._isInitialized) return Promise.resolve(); var r = this._getPromiseDecorator(p.INITIALIZE); return r || (r = this._createPromiseDecorator(p.INITIALIZE), this._defaultStorageType = c.PLATFORM_INTERNAL, Qa(this, ls).addListener((function (r) { var n = r.data; if (null != n && n.type && n.type === t.PLATFORM && (n.action === p.INITIALIZE && $a(e, fs, ys).call(e, n), n.action === as)) { var o, i = Qa(e, ls).generateMessageId(), a = (null == n || null === (o = n.options) || void 0 === o ? void 0 : o.resources) || []; $a(e, ps, ms).call(e, i, a) } })), Qa(this, ls).send({ type: t.PLATFORM, action: p.INITIALIZE })), r.promise } }, { key: "authorizePlayer", value: function (e) { var r = this, n = this._getPromiseDecorator(p.AUTHORIZE_PLAYER); if (!n) { n = this._createPromiseDecorator(p.AUTHORIZE_PLAYER); var o = Qa(this, ls).generateMessageId(); Qa(this, ls).addListener((function e(n) { var i = n.data; if ((null == i ? void 0 : i.type) === t.PLAYER && i.action === p.AUTHORIZE_PLAYER && i.id === o) { var a = i.player, s = i.auth; "success" === s.status ? (r._isPlayerAuthorized = !0, r._playerId = a.userId, r._playerName = a.name, a.profilePictureUrl && (r._playerPhotos = [a.profilePictureUrl]), r._resolvePromiseDecorator(p.AUTHORIZE_PLAYER)) : r._rejectPromiseDecorator(p.AUTHORIZE_PLAYER, s.error), Qa(r, ls).removeListener(e) } })), Qa(this, ls).send({ type: t.PLAYER, action: p.AUTHORIZE_PLAYER, id: o, options: e }) } return n.promise } }, { key: "sendMessage", value: function (e) { return [f.GAME_READY, f.IN_GAME_LOADING_STARTED, f.IN_GAME_LOADING_STOPPED, f.GAMEPLAY_STARTED, f.GAMEPLAY_STOPPED, f.PLAYER_GOT_ACHIEVEMENT, f.GAME_OVER].includes(e) ? (Qa(this, ls).send({ type: t.PLATFORM, action: e }), Promise.resolve()) : Ya(Za(h.prototype), "sendMessage", this).call(this, e) } }, { key: "getServerTime", value: function () { var e = this; return new Promise((function (r, n) { var o, i = Qa(e, ls).generateMessageId(), a = function a(s) { var u = s.data; if ((null == u ? void 0 : u.type) === t.PLATFORM && u.action === rs && u.id === i) { if (!u.time) return void n(new Error("Invalid server time")); clearTimeout(o), r(u.time), Qa(e, ls).removeListener(a) } }; Qa(e, ls).addListener(a), Qa(e, ls).send({ type: t.PLATFORM, action: rs, id: i }), o = setTimeout((function () { n(new Error("Server time request timeout")), Qa(e, ls).removeListener(a) }), 5e3) })) } }, { key: "isStorageSupported", value: function (e) { return Qa(this, ls).send({ type: t.STORAGE, action: "is_storage_supported", options: { storageType: e } }), !(e !== c.PLATFORM_INTERNAL || !this._supportedFeatures.includes(ss)) || !(e !== c.LOCAL_STORAGE || !this._supportedFeatures.includes(us)) } }, { key: "isStorageAvailable", value: function (e) { return Qa(this, ls).send({ type: t.STORAGE, action: "is_storage_available", options: { storageType: e } }), !(e !== c.PLATFORM_INTERNAL || !this._supportedFeatures.includes(ss)) || !(e !== c.LOCAL_STORAGE || !this._supportedFeatures.includes(us)) } }, { key: "getDataFromStorage", value: function (e, r, n) { var o = this; if (r === c.PLATFORM_INTERNAL || r === c.LOCAL_STORAGE && Qa(this, cs)) { var i = Qa(this, ls).generateMessageId(); return new Promise((function (a) { Qa(o, ls).addListener((function e(r) { var n = r.data; if ((null == n ? void 0 : n.type) === t.STORAGE && n.action === ts && n.id === i) { var s = Object.values(n.storage); a(s), Qa(o, ls).removeListener(e) } })), Qa(o, ls).send({ type: t.STORAGE, action: ts, id: i, options: { key: e, storageType: r, tryParseJson: n } }) })) } return Qa(this, ls).send({ type: t.STORAGE, action: ts, options: { key: e, storageType: r, tryParseJson: n } }), Ya(Za(h.prototype), "getDataFromStorage", this).call(this, e, r, n) } }, { key: "setDataToStorage", value: function (e, r, n) { return Qa(this, ls).send({ type: t.STORAGE, action: "set_data_to_storage", options: { key: e, value: r, storageType: n } }), n === c.PLATFORM_INTERNAL || n === c.LOCAL_STORAGE && Qa(this, cs) ? Promise.resolve() : Ya(Za(h.prototype), "setDataToStorage", this).call(this, e, r, n) } }, { key: "deleteDataFromStorage", value: function (e, r) { return Qa(this, ls).send({ type: t.STORAGE, action: "delete_data_from_storage", options: { key: e, storageType: r } }), r === c.PLATFORM_INTERNAL || r === c.LOCAL_STORAGE && Qa(this, cs) ? Promise.resolve() : Ya(Za(h.prototype), "deleteDataFromStorage", this).call(this, e, r) } }, { key: "showInterstitial", value: function (e) { var r = this; Qa(this, ls).addListener((function e(n) { var o = n.data; if ((null == o ? void 0 : o.type) === t.ADVERTISEMENT) switch (o.payload.status) { case "start": r._setInterstitialState(i.LOADING); break; case "open": r._setInterstitialState(i.OPENED); break; case "failed": r._setInterstitialState(i.FAILED); break; case "close": r._setInterstitialState(i.CLOSED), Qa(r, ls).removeListener(e) } })), Qa(this, ls).send({ type: t.ADVERTISEMENT, action: "interstitial", options: { placement: e } }) } }, { key: "showRewarded", value: function (e) { var r = this; Qa(this, ls).addListener((function e(n) { var o = n.data; if ((null == o ? void 0 : o.type) === t.ADVERTISEMENT) switch (o.payload.status) { case "start": r._setRewardedState(a.LOADING); break; case "open": r._setRewardedState(a.OPENED); break; case "failed": r._setRewardedState(a.FAILED); break; case "rewarded": r._setRewardedState(a.REWARDED); break; case "close": r._setRewardedState(a.CLOSED), Qa(r, ls).removeListener(e) } })), Qa(this, ls).send({ type: t.ADVERTISEMENT, action: "reward", options: { placement: e } }) } }, { key: "showBanner", value: function (e, r) { this._setBannerState(s.SHOWN), Qa(this, ls).send({ type: t.ADVERTISEMENT, action: s.SHOWN, options: { type: es, position: e, placement: r } }) } }, { key: "hideBanner", value: function () { this._setBannerState(s.HIDDEN), Qa(this, ls).send({ type: t.ADVERTISEMENT, action: s.HIDDEN, options: { type: es } }) } }, { key: "checkAdBlock", value: function () { return Qa(this, ls).send({ type: "check_adblock", action: p.ADBLOCK_DETECT }), Ya(Za(h.prototype), "checkAdBlock", this).call(this) } }, { key: "inviteFriends", value: function () { var e = this._getPromiseDecorator(p.INVITE_FRIENDS); return e || (e = this._createPromiseDecorator(p.INVITE_FRIENDS), this._resolvePromiseDecorator(p.INVITE_FRIENDS), Qa(this, ls).send({ type: t.SOCIAL, action: p.INVITE_FRIENDS })), e.promise } }, { key: "joinCommunity", value: function () { var e = this._getPromiseDecorator(p.JOIN_COMMUNITY); return e || (e = this._createPromiseDecorator(p.JOIN_COMMUNITY), this._resolvePromiseDecorator(p.JOIN_COMMUNITY), Qa(this, ls).send({ type: t.SOCIAL, action: p.JOIN_COMMUNITY })), e.promise } }, { key: "share", value: function () { var e = this._getPromiseDecorator(p.SHARE); return e || (e = this._createPromiseDecorator(p.SHARE), this._resolvePromiseDecorator(p.SHARE), Qa(this, ls).send({ type: t.SOCIAL, action: p.SHARE })), e.promise } }, { key: "createPost", value: function () { var e = this._getPromiseDecorator(p.CREATE_POST); return e || (e = this._createPromiseDecorator(p.CREATE_POST), this._resolvePromiseDecorator(p.CREATE_POST), Qa(this, ls).send({ type: t.SOCIAL, action: p.CREATE_POST })), e.promise } }, { key: "addToHomeScreen", value: function () { var e = this._getPromiseDecorator(p.ADD_TO_HOME_SCREEN); return e || (e = this._createPromiseDecorator(p.ADD_TO_HOME_SCREEN), this._resolvePromiseDecorator(p.ADD_TO_HOME_SCREEN), Qa(this, ls).send({ type: t.SOCIAL, action: p.ADD_TO_HOME_SCREEN })), e.promise } }, { key: "addToFavorites", value: function () { var e = this._getPromiseDecorator(p.ADD_TO_FAVORITES); return e || (e = this._createPromiseDecorator(p.ADD_TO_FAVORITES), this._resolvePromiseDecorator(p.ADD_TO_FAVORITES), Qa(this, ls).send({ type: t.SOCIAL, action: p.ADD_TO_FAVORITES })), e.promise } }, { key: "rate", value: function () { var e = this._getPromiseDecorator(p.RATE); return e || (e = this._createPromiseDecorator(p.RATE), this._resolvePromiseDecorator(p.RATE), Qa(this, ls).send({ type: t.SOCIAL, action: p.RATE })), e.promise } }, { key: "paymentsPurchase", value: function (e) { var r = this, n = this._paymentsGetProductPlatformData(e); if (!n) return Promise.reject(); var o = this._getPromiseDecorator(p.PURCHASE); if (!o) { o = this._createPromiseDecorator(p.PURCHASE); var i = Qa(this, ls).generateMessageId(); Qa(this, ls).addListener((function n(o) { var a = o.data; if ((null == a ? void 0 : a.type) === t.PAYMENTS && a.action === p.PURCHASE && a.id === i) { var s; if (!a.purchase || "object" !== Ha(a.purchase)) return r._rejectPromiseDecorator(p.PURCHASE, new Error("Invalid purchase")), void Qa(r, ls).removeListener(n); if (null !== (s = a.purchase) && void 0 !== s && s.status) { var u = Ua({ id: e }, a.purchase.purchaseData); delete u.commonId, r._paymentsPurchases.push(u), r._resolvePromiseDecorator(p.PURCHASE, u) } else { var c; r._rejectPromiseDecorator(p.PURCHASE, (null === (c = a.purchase) || void 0 === c ? void 0 : c.error) || new Error("Unknown purchase error")) } Qa(r, ls).removeListener(n) } })), Qa(this, ls).send({ type: t.PAYMENTS, action: p.PURCHASE, id: i, options: { product: n } }) } return o.promise } }, { key: "paymentsConsumePurchase", value: function (e) { var r = this, n = this._paymentsPurchases.findIndex((function (t) { return t.id === e })); if (n < 0) return Promise.reject(); var o = this._getPromiseDecorator(p.CONSUME_PURCHASE); if (!o) { o = this._createPromiseDecorator(p.CONSUME_PURCHASE); var i = Qa(this, ls).generateMessageId(); Qa(this, ls).addListener((function o(a) { var s = a.data; if ((null == s ? void 0 : s.type) === t.PAYMENTS && s.action === p.CONSUME_PURCHASE && s.id === i) { var u; if (!s.purchase || "object" !== Ha(s.purchase)) return r._rejectPromiseDecorator(p.CONSUME_PURCHASE, new Error("Invalid purchase")), void Qa(r, ls).removeListener(o); if (null !== (u = s.purchase) && void 0 !== u && u.status) { var c = Ua({ id: e }, s.purchase); r._paymentsPurchases.splice(n, 1), r._resolvePromiseDecorator(p.CONSUME_PURCHASE, c) } else { var l; r._rejectPromiseDecorator(p.CONSUME_PURCHASE, (null === (l = s.purchase) || void 0 === l ? void 0 : l.error) || new Error("Unknown consume purchase error")) } Qa(r, ls).removeListener(o) } })), Qa(this, ls).send({ type: t.PAYMENTS, action: p.CONSUME_PURCHASE, id: i, options: { product: this._paymentsPurchases[n] } }) } return o.promise } }, { key: "paymentsGetCatalog", value: function () { var e = this, r = this._getPromiseDecorator(p.GET_CATALOG); if (!r) { r = this._createPromiseDecorator(p.GET_CATALOG); var n = this._paymentsGetProductsPlatformData(), o = Qa(this, ls).generateMessageId(); Qa(this, ls).addListener((function r(i) { var a = i.data; if ((null == a ? void 0 : a.type) === t.PAYMENTS && a.action === p.GET_CATALOG && a.id === o) { var s = n.map((function (e) { return { id: e.id, price: "".concat(e.amount, " Golden Fennec"), priceCurrencyCode: "Golden Fennec", priceCurrencyImage: "https://games.playgama.com/assets/gold-fennec-coin-large.webp", priceValue: e.amount } })); Qa(e, ls).removeListener(r), e._resolvePromiseDecorator(p.GET_CATALOG, s) } })), Qa(this, ls).send({ type: t.PAYMENTS, action: p.GET_CATALOG, id: o }) } return r.promise } }, { key: "paymentsGetPurchases", value: function () { var e = this, r = this._getPromiseDecorator(p.GET_PURCHASES); if (!r) { r = this._createPromiseDecorator(p.GET_PURCHASES); var n = Qa(this, ls).generateMessageId(); Qa(this, ls).addListener((function r(o) { var i = o.data; if ((null == i ? void 0 : i.type) === t.PAYMENTS && i.action === p.GET_PURCHASES && i.id === n) { var a = e._paymentsGetProductsPlatformData(); e._paymentsPurchases = i.purchases.map((function (e) { return Ua({ id: a.find((function (t) { return t.id === e.id })).id }, e.purchaseData) })), Qa(e, ls).removeListener(r), e._resolvePromiseDecorator(p.GET_PURCHASES, e._paymentsPurchases) } })), Qa(this, ls).send({ type: t.PAYMENTS, action: p.GET_PURCHASES, id: n }) } return r.promise } }, { key: "getRemoteConfig", value: function () { var e = this, r = this._getPromiseDecorator(p.GET_REMOTE_CONFIG); if (!r) { r = this._createPromiseDecorator(p.GET_REMOTE_CONFIG); var n = Qa(this, ls).generateMessageId(); Qa(this, ls).addListener((function r(o) { var i = o.data; (null == i ? void 0 : i.type) === t.REMOTE_CONFIG && i.action === p.GET_REMOTE_CONFIG && i.id === n && (e._resolvePromiseDecorator(p.GET_REMOTE_CONFIG, i.result), Qa(e, ls).removeListener(r)) })), Qa(this, ls).send({ type: t.REMOTE_CONFIG, action: p.GET_REMOTE_CONFIG, id: n }) } return r.promise } }, { key: "clipboardWrite", value: function (e) { var r = this, n = this._getPromiseDecorator(p.CLIPBOARD_WRITE); if (!n) { n = this._createPromiseDecorator(p.CLIPBOARD_WRITE); var o = Qa(this, ls).generateMessageId(); Qa(this, ls).addListener((function e(n) { var i = n.data; (null == i ? void 0 : i.type) === t.CLIPBOARD && i.action === p.CLIPBOARD_WRITE && i.id === o && (r._resolvePromiseDecorator(p.CLIPBOARD_WRITE, !0), Qa(r, ls).removeListener(e)) })), Qa(this, ls).send({ type: t.CLIPBOARD, action: p.CLIPBOARD_WRITE, id: o, options: { text: e } }) } return n.promise } }, { key: "clipboardRead", value: function () { var e = this, r = this._getPromiseDecorator(ns); if (!r) { r = this._createPromiseDecorator(ns); var n = Qa(this, ls).generateMessageId(); Qa(this, ls).addListener((function r(o) { var i = o.data; if ((null == i ? void 0 : i.type) === t.CLIPBOARD && i.action === ns && i.id === n) { var a = i.text; e._resolvePromiseDecorator(ns, a), Qa(e, ls).removeListener(r) } })), Qa(this, ls).send({ type: t.CLIPBOARD, action: ns, id: n, options: {} }) } return r.promise } }, { key: "setLeaderboardScore", value: function (e) { var r = this._getPromiseDecorator(p.SET_LEADERBOARD_SCORE); if (!r) { r = this._createPromiseDecorator(p.SET_LEADERBOARD_SCORE); var n = Ua({}, e); "string" == typeof n.score && (n.score = parseInt(n.score, 10)), Qa(this, ls).send({ type: t.LEADERBOARD, action: p.SET_LEADERBOARD_SCORE, options: n }), this._resolvePromiseDecorator(p.SET_LEADERBOARD_SCORE) } return r.promise } }, { key: "getLeaderboardScore", value: function (e) { var r = this, n = Object.values(e || {}).find((function (e) { return null == e ? void 0 : e.leaderboardName })), o = null == n ? void 0 : n.leaderboardName, i = "".concat(p.GET_LEADERBOARD_SCORE, "_").concat(o), a = this._getPromiseDecorator(i); if (!a) { a = this._createPromiseDecorator(i); var s = Qa(this, ls).generateMessageId(); Qa(this, ls).addListener((function e(n) { var a = n.data; (null == a ? void 0 : a.type) === t.LEADERBOARD && a.action === p.GET_LEADERBOARD_SCORE && a.id === s && a.leaderboardName === o && (r._resolvePromiseDecorator(i, a.score), Qa(r, ls).removeListener(e)) })), Qa(this, ls).send({ type: t.LEADERBOARD, action: p.GET_LEADERBOARD_SCORE, id: s, leaderboardName: o, options: e }) } return a.promise } }, { key: "getLeaderboardEntries", value: function (e) { var r = this, n = this._getPromiseDecorator(p.GET_LEADERBOARD_ENTRIES); if (!n) { n = this._createPromiseDecorator(p.GET_LEADERBOARD_ENTRIES); var o = Qa(this, ls).generateMessageId(); Qa(this, ls).addListener((function e(n) { var i; (null === (i = n.data) || void 0 === i ? void 0 : i.type) === t.LEADERBOARD && n.data.action === p.GET_LEADERBOARD_ENTRIES && n.data.id === o && (r._resolvePromiseDecorator(p.GET_LEADERBOARD_ENTRIES, n.data.entries), Qa(r, ls).removeListener(e)) })), Qa(this, ls).send({ type: t.LEADERBOARD, action: p.GET_LEADERBOARD_ENTRIES, id: o, options: e }) } return n.promise } }, { key: "showLeaderboardNativePopup", value: function (e) { var r = this._getPromiseDecorator(p.SHOW_LEADERBOARD_NATIVE_POPUP); return r || (r = this._createPromiseDecorator(p.SHOW_LEADERBOARD_NATIVE_POPUP), Qa(this, ls).send({ type: t.LEADERBOARD, action: p.SHOW_LEADERBOARD_NATIVE_POPUP, options: e }), this._resolvePromiseDecorator(p.SHOW_LEADERBOARD_NATIVE_POPUP)), r.promise } }, { key: "unlockAchievement", value: function (e) { var r = this; return new Promise((function (n) { var o = Qa(r, ls).generateMessageId(); Qa(r, ls).addListener((function e(i) { var a = i.data; (null == a ? void 0 : a.type) === t.ACHIEVEMENTS && a.action === os && a.id === o && (n(a.result), Qa(r, ls).removeListener(e)) })), Qa(r, ls).send({ type: t.ACHIEVEMENTS, action: os, id: o, options: e }) })) } }, { key: "getAchievementsList", value: function (e) { var r = this; return new Promise((function (n) { var o = Qa(r, ls).generateMessageId(); Qa(r, ls).addListener((function e(i) { var a = i.data; (null == a ? void 0 : a.type) === t.ACHIEVEMENTS && a.action === is && a.id === o && (n(a.result), Qa(r, ls).removeListener(e)) })), Qa(r, ls).send({ type: t.ACHIEVEMENTS, action: is, id: o, options: e }) })) } }, { key: "showAchievementsNativePopup", value: function () { return Qa(this, ls).send({ type: t.ACHIEVEMENTS, action: "show_achievements_native_popup" }), Promise.resolve() } }, { key: "_paymentsGetProductsPlatformData", value: function () { return this._options.payments ? this._options.payments.map((function (e) { return Ua({ id: e.id }, e.playgama) })) : [] } }, { key: "_paymentsGetProductPlatformData", value: function (e) { var t = this._options.payments; if (!t) return null; var r = t.find((function (t) { return t.id === e })); return r ? Ua({ id: r.id }, r.playgama) : null } }]) && za(n.prototype, o), Object.defineProperty(n, "prototype", { writable: !1 }), h }(lr); function hs() { return this._supportedFeatures.includes("isStorageRemoteLocalSupported") } function ys(e) { var t, r, n, o; this._supportedFeatures = e.supportedFeatures || [], this._isBannerSupported = this._supportedFeatures.includes("isBannerSupported"); var i = e.config, a = void 0 === i ? {} : i; this._deviceType = null !== (t = a.deviceType) && void 0 !== t ? t : Ya(Za(Ga.prototype), "deviceType", this), this._platformLanguage = null !== (r = a.platformLanguage) && void 0 !== r ? r : Ya(Za(Ga.prototype), "platformLanguage", this), this._platformTld = null !== (n = a.platformTld) && void 0 !== n ? n : Ya(Za(Ga.prototype), "platformTld", this), this._platformPayload = null !== (o = a.platformPayload) && void 0 !== o ? o : Ya(Za(Ga.prototype), "platformPayload", this), this._paymentsPurchases = e.purchases || [], this._isInitialized = !0, this._resolvePromiseDecorator(p.INITIALIZE), Qa(this, ls).send({ type: "liveness", action: "ping", options: { version: "1.22.0" } }) } function ms(e) { var r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : [], n = Array.isArray(r) ? r : [], o = performance.getEntriesByType("resource") || [], i = n.length > 0 ? n : ["name", "initiatorType"], a = o.map((function (e) { var t = {}; return i.forEach((function (r) { r in e && (t[r] = e[r]) })), t })); return Qa(this, ls).send({ type: t.PLATFORM, action: as, id: e, options: { resources: a } }), Promise.resolve(o) } Ga = ds; const vs = ds; function _s(e) { return _s = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e }, _s(e) } function gs(e, t) { for (var r = 0; r < t.length; r++) { var n = t[r]; n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, Ss(n.key), n) } } function Ss(e) { var t = function (e, t) { if ("object" != _s(e) || !e) return e; var r = e[Symbol.toPrimitive]; if (void 0 !== r) { var n = r.call(e, "string"); if ("object" != _s(n)) return n; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(e) }(e); return "symbol" == _s(t) ? t : String(t) } function bs() { return bs = "undefined" != typeof Reflect && Reflect.get ? Reflect.get.bind() : function (e, t, r) { var n = function (e, t) { for (; !Object.prototype.hasOwnProperty.call(e, t) && null !== (e = Es(e));); return e }(e, t); if (n) { var o = Object.getOwnPropertyDescriptor(n, t); return o.get ? o.get.call(arguments.length < 3 ? e : r) : o.value } }, bs.apply(this, arguments) } function Ps(e, t) { return Ps = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) { return e.__proto__ = t, e }, Ps(e, t) } function Es(e) { return Es = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (e) { return e.__proto__ || Object.getPrototypeOf(e) }, Es(e) } const As = function (t) { !function (e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function"); e.prototype = Object.create(t && t.prototype, { constructor: { value: e, writable: !0, configurable: !0 } }), Object.defineProperty(e, "prototype", { writable: !1 }), t && Ps(e, t) }(c, t); var r, n, o, s, u = (o = c, s = function () { if ("undefined" == typeof Reflect || !Reflect.construct) return !1; if (Reflect.construct.sham) return !1; if ("function" == typeof Proxy) return !0; try { return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function () { }))), !0 } catch (e) { return !1 } }(), function () { var e, t = Es(o); if (s) { var r = Es(this).constructor; e = Reflect.construct(t, arguments, r) } else e = t.apply(this, arguments); return function (e, t) { if (t && ("object" === _s(t) || "function" == typeof t)) return t; if (void 0 !== t) throw new TypeError("Derived constructors may only return object or undefined"); return function (e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e }(e) }(this, e) }); function c() { return function (e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, c), u.apply(this, arguments) } return r = c, (n = [{ key: "platformId", get: function () { return e.POKI } }, { key: "isExternalLinksAllowed", get: function () { return !1 } }, { key: "isClipboardSupported", get: function () { return !1 } }, { key: "initialize", value: function () { var e = this; if (this._isInitialized) return Promise.resolve(); var t = this._getPromiseDecorator(p.INITIALIZE); return t || (t = this._createPromiseDecorator(p.INITIALIZE), fr("https://game-cdn.poki.com/scripts/v2/poki-sdk.js").then((function () { dr("PokiSDK", "init").then((function () { e._platformSdk = window.PokiSDK, e._platformSdk.init().then((function () { e._isInitialized = !0, e._resolvePromiseDecorator(p.INITIALIZE) })) })) }))), t.promise } }, { key: "sendMessage", value: function (e) { switch (e) { case f.GAME_READY: return this._platformSdk.gameLoadingFinished(), Promise.resolve(); case f.GAMEPLAY_STARTED: return this._platformSdk.gameplayStart(), Promise.resolve(); case f.GAMEPLAY_STOPPED: return this._platformSdk.gameplayStop(), Promise.resolve(); default: return bs(Es(c.prototype), "sendMessage", this).call(this, e) } } }, { key: "showInterstitial", value: function () { var e = this, t = !1; this._platformSdk.commercialBreak((function () { t = !0, e._setInterstitialState(i.OPENED) })).then((function () { t ? e._setInterstitialState(i.CLOSED) : e._setInterstitialState(i.FAILED) })).catch((function (t) { e._setInterstitialState(i.FAILED, t) })) } }, { key: "showRewarded", value: function () { var e = this, t = !1; this._platformSdk.rewardedBreak((function () { t = !0, e._setRewardedState(a.OPENED) })).then((function (r) { t ? (r && e._setRewardedState(a.REWARDED), e._setRewardedState(a.CLOSED)) : e._setRewardedState(a.FAILED) })).catch((function (t) { e._setRewardedState(a.FAILED, t) })) } }]) && gs(r.prototype, n), Object.defineProperty(r, "prototype", { writable: !1 }), c }(lr); function ws(e) { return ws = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e }, ws(e) } function Os(e, t) { var r = Object.keys(e); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(e); t && (n = n.filter((function (t) { return Object.getOwnPropertyDescriptor(e, t).enumerable }))), r.push.apply(r, n) } return r } function Ds(e) { for (var t = 1; t < arguments.length; t++) { var r = null != arguments[t] ? arguments[t] : {}; t % 2 ? Os(Object(r), !0).forEach((function (t) { js(e, t, r[t]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(r)) : Os(Object(r)).forEach((function (t) { Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(r, t)) })) } return e } function ks(e, t) { for (var r = 0; r < t.length; r++) { var n = t[r]; n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, Ns(n.key), n) } } function Rs(e, t) { return Rs = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) { return e.__proto__ = t, e }, Rs(e, t) } function Is(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e } function Ts(e) { return Ts = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (e) { return e.__proto__ || Object.getPrototypeOf(e) }, Ts(e) } function Ls(e, t) { !function (e, t) { if (t.has(e)) throw new TypeError("Cannot initialize the same private elements twice on an object") }(e, t), t.add(e) } function js(e, t, r) { return (t = Ns(t)) in e ? Object.defineProperty(e, t, { value: r, enumerable: !0, configurable: !0, writable: !0 }) : e[t] = r, e } function Ns(e) { var t = function (e, t) { if ("object" != ws(e) || !e) return e; var r = e[Symbol.toPrimitive]; if (void 0 !== r) { var n = r.call(e, "string"); if ("object" != ws(n)) return n; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(e) }(e); return "symbol" == ws(t) ? t : String(t) } function Cs(e, t, r) { if (!t.has(e)) throw new TypeError("attempted to get private field on non-instance"); return r } var Bs = new WeakSet, Gs = new WeakSet, Ms = new WeakSet, Fs = new WeakSet; function Us() { var e = this; return arguments.length > 0 && void 0 !== arguments[0] && arguments[0] || !this._preloadedRewardedPromise ? (this._preloadedRewardedPromise = Cs(this, Ms, zs).call(this, !0).catch((function () { e._preloadedRewardedPromise = null })), this._preloadedRewardedPromise) : this._preloadedRewardedPromise } function Hs() { var e = this; return arguments.length > 0 && void 0 !== arguments[0] && arguments[0] || !this._preloadedInterstitialPromise ? (this._preloadedInterstitialPromise = Cs(this, Ms, zs).call(this).catch((function () { e._preloadedInterstitialPromise = null })), this._preloadedInterstitialPromise) : this._preloadedInterstitialPromise } function zs() { var e = this, t = arguments.length > 0 && void 0 !== arguments[0] && arguments[0]; return new Promise((function (r, n) { var o = 3; !function i() { o -= 1, e._platformSdk.loadAdsAsync(t).then(r).catch((function (e) { "LOAD_ADS_FAILURE" !== e.code || o < 1 ? n(e) : i() })) }() })) } function Ws(e) { e.playerId && (this._playerId = e.playerId, this._playerName = e.playerDisplayName, this._isPlayerAuthorized = !0) } const xs = function (t) { !function (e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function"); e.prototype = Object.create(t && t.prototype, { constructor: { value: e, writable: !0, configurable: !0 } }), Object.defineProperty(e, "prototype", { writable: !1 }), t && Rs(e, t) }(l, t); var r, n, o, u, c = (o = l, u = function () { if ("undefined" == typeof Reflect || !Reflect.construct) return !1; if (Reflect.construct.sham) return !1; if ("function" == typeof Proxy) return !0; try { return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function () { }))), !0 } catch (e) { return !1 } }(), function () { var e, t = Ts(o); if (u) { var r = Ts(this).constructor; e = Reflect.construct(t, arguments, r) } else e = t.apply(this, arguments); return function (e, t) { if (t && ("object" === ws(t) || "function" == typeof t)) return t; if (void 0 !== t) throw new TypeError("Derived constructors may only return object or undefined"); return Is(e) }(this, e) }); function l() { var e; !function (e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, l); for (var t = arguments.length, r = new Array(t), n = 0; n < t; n++)r[n] = arguments[n]; return Ls(Is(e = c.call.apply(c, [this].concat(r))), Fs), Ls(Is(e), Ms), Ls(Is(e), Gs), Ls(Is(e), Bs), js(Is(e), "_preloadedInterstitialPromise", null), js(Is(e), "_preloadedRewardedPromise", null), e } return r = l, (n = [{ key: "platformId", get: function () { return e.MSN } }, { key: "isPlayerAuthorizationSupported", get: function () { return !0 } }, { key: "isShareSupported", get: function () { return !0 } }, { key: "isLeaderboardSupported", get: function () { return !0 } }, { key: "isLeaderboardSetScoreSupported", get: function () { return !0 } }, { key: "isBannerSupported", get: function () { return !0 } }, { key: "isPaymentsSupported", get: function () { return !0 } }, { key: "initialize", value: function () { var e = this; if (this._isInitialized) return Promise.resolve(); var t = this._getPromiseDecorator(p.INITIALIZE); return t || (t = this._createPromiseDecorator(p.INITIALIZE), fr("https://assets.msn.com/staticsb/statics/latest/msstart-games-sdk/msstart-v1.0.0-rc.20.min.js").then((function () { dr("$msstart").then((function () { e._platformSdk = window.$msstart, e._platformSdk.getSignedInUserAsync().then((function (t) { Cs(e, Fs, Ws).call(e, t) })).finally((function () { e._isInitialized = !0, e._resolvePromiseDecorator(p.INITIALIZE) })) })) }))), t.promise } }, { key: "authorizePlayer", value: function () { var e = this; return this._isPlayerAuthorized ? Promise.resolve() : new Promise((function (t, r) { e._platformSdk.signInAsync().then((function (r) { Cs(e, Fs, Ws).call(e, r), t() })).catch((function (e) { r(e) })) })) } }, { key: "share", value: function (e) { var t = this; return new Promise((function (r, n) { t._platformSdk.shareAsync(e).then(r).catch(n) })) } }, { key: "setLeaderboardScore", value: function (e) { var t = this; return null != e && e.score ? new Promise((function (r, n) { t._platformSdk.submitGameResultsAsync(e.score).then(r).catch(n) })) : Promise.reject(new Error("`score` option is required")) } }, { key: "showBanner", value: function (e) { var t, r = this; t = "top" === e ? "top:728x90" : "bottom:320x50", this._platformSdk.showDisplayAdsAsync([t]).then((function () { r._setBannerState(s.SHOWN) })).catch((function () { r._setBannerState(s.FAILED) })) } }, { key: "hideBanner", value: function () { var e = this; this._platformSdk.hideDisplayAdsAsync().then((function () { e._setBannerState(s.HIDDEN) })) } }, { key: "preloadInterstitial", value: function () { Cs(this, Gs, Hs).call(this, !0) } }, { key: "showInterstitial", value: function () { var e = this; Cs(this, Gs, Hs).call(this).then((function (t) { return e._platformSdk.showAdsAsync(t.instanceId) })).then((function (t) { return e._setInterstitialState(i.OPENED), t.showAdsCompletedAsync })).then((function () { return e._setInterstitialState(i.CLOSED) })).catch((function () { e._setInterstitialState(i.FAILED) })).finally((function () { Cs(e, Gs, Hs).call(e, !0) })) } }, { key: "preloadRewarded", value: function () { Cs(this, Bs, Us).call(this, !0) } }, { key: "showRewarded", value: function () { var e = this; Cs(this, Bs, Us).call(this).then((function (t) { return e._platformSdk.showAdsAsync(t.instanceId) })).then((function (t) { return e._setRewardedState(a.OPENED), t.showAdsCompletedAsync })).then((function () { e._setRewardedState(a.REWARDED), e._setRewardedState(a.CLOSED) })).catch((function () { e._setRewardedState(a.FAILED) })).finally((function () { Cs(e, Bs, Us).call(e, !0) })) } }, { key: "paymentsPurchase", value: function (e) { var t = this; if (!this._paymentsGetProductPlatformData(e)) return Promise.reject(); var r = this._getPromiseDecorator(p.PURCHASE); return r || (r = this._createPromiseDecorator(p.PURCHASE), this._platformSdk.iap.purchaseAsync({ productId: e }).then((function (r) { if ("IAP_PURCHASE_FAILURE" !== r.code) { var n = Ds(Ds({ id: e }, r.receipt), {}, { receiptSignature: r.receiptSignature }); delete n.productId, t._paymentsPurchases.push(n), t._resolvePromiseDecorator(p.PURCHASE, n) } else t._rejectPromiseDecorator(p.PURCHASE, r.description) })).catch((function (e) { t._rejectPromiseDecorator(p.PURCHASE, e) }))), r.promise } }, { key: "paymentsConsumePurchase", value: function (e) { var t = this, r = this._paymentsPurchases.findIndex((function (t) { return t.id === e })); if (r < 0) return Promise.reject(); var n = this._getPromiseDecorator(p.CONSUME_PURCHASE); return n || (n = this._createPromiseDecorator(p.CONSUME_PURCHASE), this._platformSdk.iap.consumeAsync({ productId: this._paymentsPurchases[r].id }).then((function (n) { if ("IAP_CONSUME_FAILURE" !== n.code) { t._paymentsPurchases.splice(r, 1); var o = Ds(Ds({ id: e }, n.consumptionReceipt), {}, { consumptionSignature: n.consumptionSignature }); delete o.productId, t._resolvePromiseDecorator(p.CONSUME_PURCHASE, o) } else t._rejectPromiseDecorator(p.CONSUME_PURCHASE, n.description) })).catch((function (e) { t._rejectPromiseDecorator(p.CONSUME_PURCHASE, e) }))), n.promise } }, { key: "paymentsGetCatalog", value: function () { var e = this, t = this._paymentsGetProductsPlatformData(); if (!t) return Promise.reject(); var r = this._getPromiseDecorator(p.GET_CATALOG); return r || (r = this._createPromiseDecorator(p.GET_CATALOG), this._platformSdk.iap.getAllAddOnsAsync().then((function (r) { if ("IAP_GET_ALL_ADD_ONS_FAILURE" !== r.code) { var n = t.map((function (e) { var t = r.find((function (t) { return t.productId === e.id })); return { id: e.id, title: t.title, description: t.description, publisherName: t.publisherName, inAppOfferToken: t.inAppOfferToken, isConsumable: t.isConsumable, price: "".concat(t.price.listPrice, " ").concat(t.price.currencyCode, " "), priceCurrencyCode: t.price.currencyCode, priceValue: t.price.listPrice } })); e._resolvePromiseDecorator(p.GET_CATALOG, n) } else e._rejectPromiseDecorator(p.GET_CATALOG, r.description) })).catch((function (t) { e._rejectPromiseDecorator(p.GET_CATALOG, t) }))), r.promise } }, { key: "paymentsGetPurchases", value: function () { var e = this, t = this._getPromiseDecorator(p.GET_PURCHASES); return t || (t = this._createPromiseDecorator(p.GET_PURCHASES), this._platformSdk.iap.getAllPurchasesAsync().then((function (t) { if ("IAP_GET_ALL_PURCHASES_FAILURE" !== t.code) { var r = e._paymentsGetProductsPlatformData(); e._paymentsPurchases = t.receipts.map((function (e) { var n = Ds(Ds({ id: r.find((function (t) { return t.id === e.productId })).id }, e), {}, { receiptSignature: t.receiptSignature }); return delete n.productId, n })), e._resolvePromiseDecorator(p.GET_PURCHASES, e._paymentsPurchases) } else e._rejectPromiseDecorator(p.GET_PURCHASES, t.description) })).catch((function (t) { e._rejectPromiseDecorator(p.GET_PURCHASES, t) }))), t.promise } }]) && ks(r.prototype, n), Object.defineProperty(r, "prototype", { writable: !1 }), l }(lr); function Vs(e) { return Vs = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e }, Vs(e) } function Ys(e, t) { var r = Object.keys(e); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(e); t && (n = n.filter((function (t) { return Object.getOwnPropertyDescriptor(e, t).enumerable }))), r.push.apply(r, n) } return r } function Zs(e) { for (var t = 1; t < arguments.length; t++) { var r = null != arguments[t] ? arguments[t] : {}; t % 2 ? Ys(Object(r), !0).forEach((function (t) { var n, o, i; n = e, o = t, i = r[t], (o = Js(o)) in n ? Object.defineProperty(n, o, { value: i, enumerable: !0, configurable: !0, writable: !0 }) : n[o] = i })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(r)) : Ys(Object(r)).forEach((function (t) { Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(r, t)) })) } return e } function Ks(e, t) { for (var r = 0; r < t.length; r++) { var n = t[r]; n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, Js(n.key), n) } } function Js(e) { var t = function (e, t) { if ("object" != Vs(e) || !e) return e; var r = e[Symbol.toPrimitive]; if (void 0 !== r) { var n = r.call(e, "string"); if ("object" != Vs(n)) return n; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(e) }(e); return "symbol" == Vs(t) ? t : String(t) } function qs(e, t) { Qs(e, t), t.add(e) } function Xs(e, t, r) { Qs(e, t), t.set(e, r) } function Qs(e, t) { if (t.has(e)) throw new TypeError("Cannot initialize the same private elements twice on an object") } function $s(e, t, r) { return function (e, t, r) { if (t.set) t.set.call(e, r); else { if (!t.writable) throw new TypeError("attempted to set read only private field"); t.value = r } }(e, ru(e, t, "set"), r), r } function eu(e, t, r) { if (!t.has(e)) throw new TypeError("attempted to get private field on non-instance"); return r } function tu(e, t) { return function (e, t) { return t.get ? t.get.call(e) : t.value }(e, ru(e, t, "get")) } function ru(e, t, r) { if (!t.has(e)) throw new TypeError("attempted to " + r + " private field on non-instance"); return t.get(e) } var nu = new WeakMap, ou = new WeakMap, iu = new WeakMap, au = new WeakMap, su = new WeakSet, uu = new WeakSet, cu = new WeakSet; function lu(t) { var r, n = e.MOCK, o = new URL(window.location.href); if (t.forciblySetPlatformId) n = eu(this, uu, fu).call(this, t.forciblySetPlatformId.toLowerCase()); else { var i = ["y", "a", "n", "d", "e", "x", ".", "n", "e", "t"].join(""); o.searchParams.has("platform_id") ? n = eu(this, uu, fu).call(this, o.searchParams.get("platform_id").toLowerCase()) : o.hostname.includes(i) || o.hash.includes("yandex") ? n = e.YANDEX : o.hostname.includes("crazygames.") || o.hostname.includes("1001juegos.com") ? n = e.CRAZY_GAMES : o.hostname.includes("gamedistribution.com") ? n = e.GAME_DISTRIBUTION : o.hostname.includes("lagged.") ? n = e.LAGGED : o.searchParams.has("api_id") && o.searchParams.has("viewer_id") && o.searchParams.has("auth_key") || o.searchParams.has("vk_app_id") ? n = e.VK : o.searchParams.has("app_id") && o.searchParams.has("player_id") && o.searchParams.has("game_sid") && o.searchParams.has("auth_key") ? n = e.ABSOLUTE_GAMES : o.searchParams.has("playdeck") ? n = e.PLAYDECK : o.hash.includes("tgWebAppData") ? n = e.TELEGRAM : o.hostname.includes("y8") ? n = e.Y8 : o.hostname.includes("fbsbx") ? n = e.FACEBOOK : o.hostname.includes("poki-gdn") || o.hostname.includes("poki-user-content") ? n = e.POKI : (o.hostname.includes("msn.") || o.hostname.includes("msnfun.") || o.hostname.includes("start.gg")) && (n = e.MSN) } var a = t; switch (null !== (r = a.platforms) && void 0 !== r && r[n] && (a = Zs(Zs({}, a), a.platforms[n])), delete a.platforms, n) { case e.VK: $s(this, iu, new Tr(a)); break; case e.YANDEX: $s(this, iu, new en(a)); break; case e.CRAZY_GAMES: $s(this, iu, new Sn(a)); break; case e.ABSOLUTE_GAMES: $s(this, iu, new Ln(a)); break; case e.GAME_DISTRIBUTION: $s(this, iu, new Wn(a)); break; case e.OK: $s(this, iu, new Yo(a)); break; case e.PLAYGAMA: $s(this, iu, new fi(a)); break; case e.PLAYDECK: $s(this, iu, new Di(a)); break; case e.TELEGRAM: $s(this, iu, new xi(a)); break; case e.Y8: $s(this, iu, new ca(a)); break; case e.LAGGED: $s(this, iu, new ma(a)); break; case e.FACEBOOK: $s(this, iu, new ja(a)); break; case e.POKI: $s(this, iu, new As(a)); break; case e.QA_TOOL: $s(this, iu, new vs(a)); break; case e.MSN: $s(this, iu, new xs(a)); break; default: $s(this, iu, new lr(a)) } } function fu(t) { for (var r = Object.values(e), n = 0; n < r.length; n++)if (t === r[n]) return t; return e.MOCK } function pu(e) { return tu(this, nu) || console.error(d), tu(this, au)[e] } const du = function () { function r() { !function (e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, r), qs(this, cu), qs(this, uu), qs(this, su), Xs(this, nu, { writable: !0, value: !1 }), Xs(this, ou, { writable: !0, value: null }), Xs(this, iu, { writable: !0, value: null }), Xs(this, au, { writable: !0, value: {} }) } var u, p; return u = r, (p = [{ key: "version", get: function () { return "1.22.0" } }, { key: "isInitialized", get: function () { return tu(this, nu) } }, { key: "options", get: function () { return tu(this, iu).options } }, { key: "platform", get: function () { return eu(this, cu, pu).call(this, t.PLATFORM) } }, { key: "player", get: function () { return eu(this, cu, pu).call(this, t.PLAYER) } }, { key: "game", get: function () { return eu(this, cu, pu).call(this, t.GAME) } }, { key: "storage", get: function () { return eu(this, cu, pu).call(this, t.STORAGE) } }, { key: "advertisement", get: function () { return eu(this, cu, pu).call(this, t.ADVERTISEMENT) } }, { key: "social", get: function () { return eu(this, cu, pu).call(this, t.SOCIAL) } }, { key: "device", get: function () { return eu(this, cu, pu).call(this, t.DEVICE) } }, { key: "leaderboard", get: function () { return eu(this, cu, pu).call(this, t.LEADERBOARD) } }, { key: "payments", get: function () { return eu(this, cu, pu).call(this, t.PAYMENTS) } }, { key: "achievements", get: function () { return eu(this, cu, pu).call(this, t.ACHIEVEMENTS) } }, { key: "remoteConfig", get: function () { return eu(this, cu, pu).call(this, t.REMOTE_CONFIG) } }, { key: "clipboard", get: function () { return eu(this, cu, pu).call(this, t.CLIPBOARD) } }, { key: "PLATFORM_ID", get: function () { return e } }, { key: "PLATFORM_MESSAGE", get: function () { return f } }, { key: "MODULE_NAME", get: function () { return t } }, { key: "EVENT_NAME", get: function () { return n } }, { key: "INTERSTITIAL_STATE", get: function () { return i } }, { key: "REWARDED_STATE", get: function () { return a } }, { key: "BANNER_STATE", get: function () { return s } }, { key: "STORAGE_TYPE", get: function () { return c } }, { key: "VISIBILITY_STATE", get: function () { return o } }, { key: "DEVICE_TYPE", get: function () { return l } }, { key: "initialize", value: function (e) { var r = this; if (tu(this, nu)) return Promise.resolve(); if (!tu(this, ou)) { $s(this, ou, new T); var n, o = "./playgama-bridge-config.json"; e && e.configFilePath && (o = e.configFilePath), fetch(o).then((function (e) { return e.json() })).then((function (e) { n = Zs({}, e) })).catch((function () { n = Zs({}, e) })).finally((function () { eu(r, su, lu).call(r, n), tu(r, au)[t.PLATFORM] = new V(tu(r, iu)), tu(r, au)[t.PLAYER] = new X(tu(r, iu)), tu(r, au)[t.GAME] = new ae(tu(r, iu)), tu(r, au)[t.STORAGE] = new pe(tu(r, iu)), tu(r, au)[t.ADVERTISEMENT] = new pt(tu(r, iu)), tu(r, au)[t.SOCIAL] = new _t(tu(r, iu)), tu(r, au)[t.DEVICE] = new At(tu(r, iu)), tu(r, au)[t.LEADERBOARD] = new It(tu(r, iu)), tu(r, au)[t.PAYMENTS] = new Bt(tu(r, iu)), tu(r, au)[t.REMOTE_CONFIG] = new zt(tu(r, iu)), tu(r, au)[t.CLIPBOARD] = new Kt(tu(r, iu)), tu(r, au)[t.ACHIEVEMENTS] = new er(tu(r, iu)), tu(r, iu).initialize().then((function () { var e, n; if ($s(r, nu, !0), console.info("%c PlaygamaBridge v.".concat(r.version, " initialized. "), "background: #01A5DA; color: white"), tu(r, ou) && (tu(r, ou).resolve(), $s(r, ou, null)), null !== (e = tu(r, iu).options) && void 0 !== e && null !== (e = e.advertisement) && void 0 !== e && null !== (e = e.interstitial) && void 0 !== e && e.preloadOnStart) { var o = tu(r, iu).options.advertisement.interstitial.preloadOnStart; tu(r, au)[t.ADVERTISEMENT].preloadInterstitial(o) } if (null !== (n = tu(r, iu).options) && void 0 !== n && null !== (n = n.advertisement) && void 0 !== n && null !== (n = n.rewarded) && void 0 !== n && n.preloadOnStart) { var i = tu(r, iu).options.advertisement.rewarded.preloadOnStart; tu(r, au)[t.ADVERTISEMENT].preloadRewarded(i) } })) })) } return tu(this, ou).promise } }]) && Ks(u.prototype, p), Object.defineProperty(u, "prototype", { writable: !1 }), r }(); window.bridge = new du, window.playgamaBridge = window.bridge })() })();
